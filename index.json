[{"authors":["admin"],"categories":null,"content":"Chiu Yu Ko obtained his B.B.A. (Insurance, Financial and Actuarial Analysis) and M.Phil. (Economics) from the Chinese University of Hong Kong in 2005 and 2007. He received his MA (Economics) and Ph.D. (Economics) from Boston College in 2009 and 2012. Upon graduation, he worked in the National University of Singapore between 2012-2020 as an assistant professor. He currently works in the Department of Decision Sciences and Managerial Economics (renamed as Department of Decisions, Operations, and Technology since 1 August 2023) in the Chinese University of Hong Kong as an associate professor. He also holds a courtesy appointment as Associate Professor from the Department of Economics.\nHis research focuses on game theory, industrial organization, and political economy. His research has been published/accepted in peer-reviewed journals including Canadian Journal of Economics, Economic Inquiry, Economic Modelling, Games and Economic Behavior, Global Finance Journal, International Economic Review, Journal of Economic Theory, Journal of Economic and Management Strategy, Journal of Environmental Economics and Management, Journal of Institutional and Theoretical Economics, Journal of Public Economic Theory, Mathematical Social Science, Management Science, and Theory and Decision.\nHe subscribes to the philosophy that effective learning requires an understanding of multiple facets in both depth and breadth. He also believes that giving students continuous feedback during the course is crucial as it means they learn from their mistakes, consolidate the knowledge they have acquired, and gives them the motivation to explore further and deeper.\n","date":1692201600,"expirydate":-62135596800,"kind":"term","lang":"en","lastmod":1692201600,"objectID":"2525497d367e79493fd32b198b28f040","permalink":"/author/chiu-yu-ko/","publishdate":"0001-01-01T00:00:00Z","relpermalink":"/author/chiu-yu-ko/","section":"authors","summary":"Chiu Yu Ko obtained his B.B.A. (Insurance, Financial and Actuarial Analysis) and M.Phil. (Economics) from the Chinese University of Hong Kong in 2005 and 2007. He received his MA (Economics) and Ph.","tags":null,"title":"Chiu Yu Ko","type":"authors"},{"authors":null,"categories":null,"content":"This tutorial contains two parts:\nBasic Excel: Why Excel? Basic Excel Worksheet Functions Advanced Excel: Add-in Analysis Toolpak Sorting Filtering Pivot Table Freeze plane Charting Conditional Statement ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"4b0e2259ba76e41586e91e9bfc1cc544","permalink":"/programming/excel/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/programming/excel/","section":"programming","summary":"Learn the basics of Excel.","tags":null,"title":"Introduction to Excel","type":"docs"},{"authors":null,"categories":null,"content":"This contains\nBasic VBA:\nWhat is VBA? Why VBA? Hello World What is function? What is subroutine? How to define variable? VBA Objects Record Macro Advanced VBA:\nConditional Statements Iterative Statements Book:\nFinancial Programming with Excel VBA and R ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"3f9e20c49c114bab3dfe7c3c633aba4b","permalink":"/programming/vba/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/programming/vba/","section":"programming","summary":"Learn the basics of Excel VBA.","tags":null,"title":"Overview","type":"docs"},{"authors":null,"categories":null,"content":"This tips is for economic academic job market. This note was prepared based on information adapted from many different sources and experiences of me and others. Now I can no longer tell which part is mine and which part is other. Good luck!\nTimeline Job Market Process usually starts from summer until the April the year after:\nSummer: Get approval from advisor September: Final version of paper October: Register for AEA conference and get ready for application November: Send applications December: Schedule and prepare for interviews January: AEA meeting and flyout February-April: Flyout and offers ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"0f4cf48ec517e1d64877fa4093ca4e55","permalink":"/others/jobmarkettips/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/others/jobmarkettips/","section":"others","summary":"Tips for economics PhD job market","tags":null,"title":"Job Market Tips","type":"docs"},{"authors":null,"categories":null,"content":"There are two parts:\nJournal Ranking:\nNUS ranking Ambition Ranking CL index Ritzberger IDEAS Journal Submission Fees:\nGeneral Interest Theory Industrial organization Macro Finance Accounting ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"142a610a9b9007aa8f1f631035bd41fa","permalink":"/others/journal/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/others/journal/","section":"others","summary":"Journal ranking and submission fee.","tags":null,"title":"Journal","type":"docs"},{"authors":null,"categories":null,"content":"This contains\nIntroduction:\nWhat is LaTeX? Why LaTeX? Installation of LaTeX Hello world Basic setup of TikZ Demand and Supply Diagram Basic LaTeX:\nHello World Title Page Sectioning/Appendix/List Reference Font/Page Layout/Line Spacing Mathematics Table/Graphics/Figures Page Margin Line spacing Font Size ** LaTeX Programming**:\nVariable: newcommand, newenvironment Conditional: if Iteration: for loop ** bemaer**\nTitle Page Content Slide List Figure ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"f6667d1a66a536f114bbbe188e42ff02","permalink":"/programming/latex/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/programming/latex/","section":"programming","summary":"Learn the basics of LaTeX","tags":null,"title":"LaTeX","type":"docs"},{"authors":null,"categories":null,"content":"This contains\nShort Tutorial:\nInstallation of R Installation of RStudio Book:\nTechnical Analysis with R Financial Programming with Excel VBA and R Package:\nCandleStickPattern: determine candle stick patters. Available at GitHub. ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"04430fb6eb6ad3a6a0d5c28e5ac0614c","permalink":"/programming/r-programming/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/programming/r-programming/","section":"programming","summary":"Learn the basics of R programming and how to use it for financial trading.","tags":null,"title":"R Programming","type":"docs"},{"authors":null,"categories":null,"content":"Reading Group I am currently the coordinator for the reading group between 2013-2019 in National University of Singpaore.\nTime: Monday 12:00nn-1:00pm Venue: AS2-05-10, National University of Singapore, 1 Arts Link, Singapore 117570 PhD Conference I am the coordinator the Second Singapore Economics PhD Conference (2nd SEPC) will be held at the National University of Singapore on 18th November, 2016 (Friday). The first conference (1st SEPC) was organized by the Division of Economics at Nanyang Technological University on 22nd April, 2016. This conference series aims to feature the collective works of Economics PhD students based in Singapore.\nFor details, please visit https://sites.google.com/site/sgeconphdcon/\n","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"7227089a8ab4b3700ff86ea11c504380","permalink":"/others/seminar/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/others/seminar/","section":"others","summary":"Reading Group and PhD Conference","tags":null,"title":"Job Market Tips","type":"docs"},{"authors":null,"categories":null,"content":"I am the main advisor of dissertation for two Ph.D. students, and honor thesis for 17 undergraduate students. Besides, between 2015 and 2018, I have been helping Ph.D. students prepare their academic job market.\n","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"e359ba04571dca80fc62ebeeb770b7c9","permalink":"/others/advising/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/others/advising/","section":"others","summary":"Supervision of PhD and undergraduates","tags":null,"title":"Job Market Tips","type":"docs"},{"authors":null,"categories":null,"content":"This contains\nShort Tutorial: Installation of MikTeX and MacTeX Brief introducation of LaTeX and TikZ Book: TikZ Cookbook TikZ Cookbook Companion TikZ examples: consumer theory producer theory demand and supply labor eocomics game theory macroeconomics ","date":1536451200,"expirydate":-62135596800,"kind":"section","lang":"en","lastmod":1536451200,"objectID":"19826c77eda9ccc18003d1079fe21cdf","permalink":"/programming/tikz/","publishdate":"2018-09-09T00:00:00Z","relpermalink":"/programming/tikz/","section":"programming","summary":"Learn the basics of drawing package TikZ.","tags":null,"title":"LaTeX and TikZ","type":"docs"},{"authors":null,"categories":null,"content":"In this book, we learn how to do financial programming in two steps. We first cover Excel that requires minimum programming technique, it is desirable to start learning it first. Excel VBA is covered to provide a smooth transition to more complicated R programming. In particular, students first learn how to use Excel to generate a simple trading system and this builds the foundation for the more complicated trading system in R.\nExcel VBA is commonly used for computationally less demanding calculations in both academic and business world. Students are prepared to how to use them to do various financial analysis including fundamental analysis, technical analysis and time series analysis. In particular, students will learn how to write an analyst report, and create the computer-aided technical trading system.\nThe book is available through Google Play or Google book. You can read the whole book through free sampling and preview. If you think that I have done a good or bad job, please feel free to drop me an email with comments/suggestions. Of course, you are very welcome to consider buying me a cup of coffee through purchasing the ebook.\nAfter purchasing through Google Play, you may download acsm file to be opened by specialized software such as Adobe Digital Edition. The software will download the pdf file to be read offline. ","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"1451c4b2b0252cfd00eaa827bf7d00c2","permalink":"/programming/vba/excel-vba-r/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/vba/excel-vba-r/","section":"programming","summary":"In this book, we learn how to do financial programming in two steps. We first cover Excel that requires minimum programming technique, it is desirable to start learning it first. Excel VBA is covered to provide a smooth transition to more complicated R programming.","tags":null,"title":"Financial programming with Excel VBA R","type":"docs"},{"authors":["Jens Gudmundsoon","Jens Hougaard","Chiu Yu Ko"],"categories":null,"content":"","date":1692201600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1692201600,"objectID":"4a5be3ca584993be6c56ec618279e8c7","permalink":"/publication/sharing-sequential/","publishdate":"2023-08-17T00:00:00+08:00","relpermalink":"/publication/sharing-sequential/","section":"publication","summary":"This paper discusses the question of assigning responsibility and liability when one agent's actions cause another to deviate from their agreements with a third party. It introduces fixed-fraction rules as a way to balance accident prevention and fairness in assigning liabilities. These rules are characterized through an axiomatic approach and can be implemented through smart contracts for automated conflict resolution.","tags":["Game Theory","Industrial Organization","Innovation"],"title":"Automated conflict resolution: Sharing sequentially triggered losses","type":"publication"},{"authors":["Jens Hougaard","Chiu Yu Ko","Xuyao Zhang"],"categories":null,"content":"","date":1684771200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1684771200,"objectID":"f0d0b5af9655f7fa76ab528f79072a05","permalink":"/publication/frand-royalty/","publishdate":"2023-05-23T00:00:00+08:00","relpermalink":"/publication/frand-royalty/","section":"publication","summary":"Establishing a standardized framework is crucial for the smooth functioning and efficiency of information and communication technologies. In particular, ensuring Fair, Reasonable, and Non-Discriminatory (FRAND) licensing terms is vital to minimize holdup problems. However, the lack of consensus on the precise meaning of FRAND poses challenges in both legal proceedings and industries. To address this, the paper introduces a new conceptual model that provides a clear distinction between fairness in royalty distribution among patent users and reasonableness in determining compensation for patent holders. The model incorporates well-known principles from the theory of fair allocation and characterizes specific royalty rules that exhibit desirable properties. By determining royalties relative to firm-specific liability indexes, the framework ensures equitable treatment of similar firms. The model's applicability is demonstrated through its implementation in various standard settings within the field of Industrial Organization.","tags":["Game Theory","Industrial Organization","Innovation"],"title":"A conceptual model for FRAND royalty setting","type":"publication"},{"authors":["Jinghan Cai","Manyi Fan","Chiu Yu Ko"],"categories":null,"content":"","date":1684252800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1684252800,"objectID":"66048524eb04abf2e65506ce77e8acbb","permalink":"/publication/world-cup/","publishdate":"2023-05-17T00:00:00+08:00","relpermalink":"/publication/world-cup/","section":"publication","summary":"This study examines the impact of sleeplessness and distraction on global stock markets using the FIFA World Cup as a proxy. The findings show that sleeplessness leads to a -26 basis-point daily return, while distraction causes a -22 basis-point return. These effects are consistent across different methodologies.","tags":["Finance","Sleeplessness","Distraction","Behaviorial economics"],"title":"Sleeplessness, distraction and stock market performance: Evidence from the world cup","type":"publication"},{"authors":null,"categories":null,"content":"Overview\nThe course covers both micro- and macro-economics fundamental to finance practice. Topics for microeconomics include: game theory and its application in finance, asymmetric information, consumer and producer behaviors, externality, public goods, information technology and network effect, asset markets and investment under uncertainty, mean variance optimization and portfolio theory, and behavioral economics. Topics for macroeconomics include: classical macroeconomics, Keynesian macroeconomics, output, inflation and unemployment, trade and exchange rate, economic policies, and economic growth. Topics:\nTBA ","date":1682524800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1682524800,"objectID":"c870d326ee2eca940ff4932a0127bc32","permalink":"/teaching/economics-for-finance-practice/","publishdate":"2023-04-27T00:00:00+08:00","relpermalink":"/teaching/economics-for-finance-practice/","section":"teaching","summary":"Master (Spring 2023)","tags":["Master"],"title":"Economics for Finance Practice","type":"teaching"},{"authors":null,"categories":null,"content":"Overview\nThis course is intended to equip students with the basic statistical tools required for the quantitative analysis of business problems. Topics include basic sampling and analysis of data, probability distribution functions, estimation of parameters and hypothesis testing, goodness-of-fit tests, analysis of variance, simple regression, correlation, and basic non-parametric statistical methods. Topics:\nIntroduction \u0026amp; Descriptive Statistics Probability Distributions Sampling Distributions Interval Estimation Hypothesis Testing Simple Linear Regression Multiple Regression Models Regression Model Building Regression Pitfalls Regression Residual Analysis ","date":1682524800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1682524800,"objectID":"8a6c7cbbe324491b3ee306795d90e9bd","permalink":"/teaching/statistical-analysis/","publishdate":"2023-04-27T00:00:00+08:00","relpermalink":"/teaching/statistical-analysis/","section":"teaching","summary":"Master (Fall 2023)","tags":["Master"],"title":"Statistical Analysis","type":"teaching"},{"authors":["Chiu Yu Ko","Rong Ding"],"categories":null,"content":" Supplementary notes can be added here, including code and math. ","date":1660752000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1660752000,"objectID":"14633afe77fd5609ef634e50031f8d4a","permalink":"/publication/corruption-tech-transfer/","publishdate":"2022-08-18T00:00:00+08:00","relpermalink":"/publication/corruption-tech-transfer/","section":"publication","summary":"We consider platforms’ choices of application compatibility in two-sided markets. Network effects on both market sides are crucial for equilibrium compatibility. Partial compatibility can be the unique coalition-proof market outcome. Coalition-proof market outcomes may go from full compatibility to incompatibility. Consumer surplus and total surplus can be the highest under partial compatibility.","tags":["Public Economics","Industrial Organization","Innovation"],"title":"Partial compatibility in two-sided markets: Equilibrium and welfare analysis","type":"publication"},{"authors":["Chiu Yu Ko","Rong Ding"],"categories":null,"content":" Supplementary notes can be added here, including code and math. ","date":1660665600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1660665600,"objectID":"e7a6248f720a96011feb924064c3902a","permalink":"/publication/partial-compatibility/","publishdate":"2022-08-17T00:00:00+08:00","relpermalink":"/publication/partial-compatibility/","section":"publication","summary":"We consider platforms’ choices of application compatibility in two-sided markets. Network effects on both market sides are crucial for equilibrium compatibility. Partial compatibility can be the unique coalition-proof market outcome. Coalition-proof market outcomes may go from full compatibility to incompatibility. Consumer surplus and total surplus can be the highest under partial compatibility.","tags":["Industrial Organization","Innovation"],"title":"Partial compatibility in two-sided markets: Equilibrium and welfare analysis","type":"publication"},{"authors":["Chiu Yu Ko","Rong Ding"],"categories":null,"content":"","date":1632326400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1632326400,"objectID":"929772db6a4dcfa2715f3f2e3f2dd2ab","permalink":"/publication/patent-competition-transfer/","publishdate":"2021-09-23T00:00:00+08:00","relpermalink":"/publication/patent-competition-transfer/","section":"publication","summary":"This paper studies how technology transfer changes welfare in a Cournot oligopoly, taking rent dissipation into account. Firms engage in a patent competition for a cost-reducing innovation, and the winner of the competition may license the patent to its rivals. We show that welfare is reduced when innovations are minor under licensing auction, while royalty licensing never changes welfare. In addition, welfare generally fails to improve when the patentee may choose between licensing auction and royalty licensing.","tags":["Game Theory","Industrial Organization","Innovation"],"title":"A Welfare Analysis of Licensing under Rent Dissipation","type":"publication"},{"authors":null,"categories":null,"content":"Overview:\nThis course is on advanced microeconomic theory. Topics include individual decision theory (consumer theory, production theory, choice under uncertainty), game theory (static and dynamic games under complete and incomplete information), and equilibrium and market failure (general equilibrium, principal-agent problems, economics of information, auctions, bargaining, and market design). Topics:\nIndividual Decision Making consumer: preference, utility, demand production: profit, cost competitive market and general equilibrium: welfare theorems choice under uncertainty: expected utility, risk aversion, stochastic dominance Game Theory static games of complete information: dominance, Nash equilibrium dynamic games of complete information: backward induction, subgame perfect equilibrium, folk theorem, Markovian refinement static games of incomplete information: Bayesian Nash equilibrium dynamic games of incomplete information: perfect Bayesian equilibrium Equilibrium and Market Failure market power: monopoly, oligopoly contract theory: screening, moral hazard, adverse selection allocative mechanism: contest, bargaining market design: auction, matching ","date":1630166400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1630166400,"objectID":"ade4a972a720ad37564d6c6eaee4aa4d","permalink":"/teaching/microeconomic-theory/","publishdate":"2021-08-29T00:00:00+08:00","relpermalink":"/teaching/microeconomic-theory/","section":"teaching","summary":"Ph.D. (Fall 2021, Fall 2022, Fall 2023)","tags":["PhD"],"title":"Microeconomic Theory","type":"teaching"},{"authors":["Chiu Yu Ko","Bo Shen"],"categories":null,"content":" Supplementary notes can be added here, including code and math. ","date":1610899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1610899200,"objectID":"23f4bac805ed5ab0d5122cccee6a1153","permalink":"/publication/dominant-platform/","publishdate":"2021-01-18T00:00:00+08:00","relpermalink":"/publication/dominant-platform/","section":"publication","summary":"We develop a two-sided market model where both platforms and sellers charge buyers for access. When network effects are moderate, a dominant platform that attracts more sellers and buyers is more likely to arise. Compared to when platforms split the market equally, a dominant platform always leads to higher consumer surplus and total welfare. Moreover, both of these measures improve as network effects increase. Our results suggest that competition authorities should be cautious regarding complaints related to dominant platforms in two-sided markets, as they may be good for consumers.","tags":["dominant","platform","network"],"title":"Are dominant platforms good for consumers?","type":"publication"},{"authors":["Inacio Bo","Chiu Yu Ko"],"categories":null,"content":" Supplementary notes can be added here, including code and math. ","date":1610899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1610899200,"objectID":"a6acf3cba92ec52b4400e3b94561615c","permalink":"/publication/competitive-screening/","publishdate":"2021-01-18T00:00:00+08:00","relpermalink":"/publication/competitive-screening/","section":"publication","summary":"We consider a model in which schools and colleges compete for high-ability students, which are independently identified through a costly screening procedure. This independence creates a channel through which students' preferences affect the strategic interaction between schools -- students with competing offers accept the most-preferred one, increasing the screening costs of unpopular schools. When preferences between schools are more heterogeneous, schools screen more, increasing the proportion of students with multiple offers, but paradoxically reducing the extent to which their preferences determine their outcomes. By observing the students' schools of origin, colleges can free-ride of the fierce competition that occurs during screening.","tags":["matching","screening","Innovation"],"title":"Competitive Screening and information transmission","type":"publication"},{"authors":["Rong Ding","Chiu Yu Ko","Bo Shen"],"categories":null,"content":" Supplementary notes can be added here, including code and math. ","date":1610812800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1610812800,"objectID":"545b928f9364b96b3b1a8cdb69d5cd44","permalink":"/publication/production-joint-venture/","publishdate":"2021-01-17T00:00:00+08:00","relpermalink":"/publication/production-joint-venture/","section":"publication","summary":"We study how a firm inside or outside an industry selects a partner among asymmetric firms to form a production joint venture (PJV), in which technology transfer takes place. We show that the partner selected under a two-part tariff contractis always (weakly) more efficient than the one selected under a first-price auction. Comparing these two schemes, we find that a two-part tariff contract can be superior for the most efficient incumbent firm or for an outside innovator, while a first-price auction is always superior for the least efficient incumbent firm. Moreover, in terms of consumer surplus and welfare, two-part tariff contract is always (weakly) superior.","tags":["production joint venture","Innovation"],"title":"Choosing a Production Joint Venture Partner","type":"publication"},{"authors":null,"categories":null,"content":"Overview:\nThis course deals with the fundamentals of statistical methods, including descriptive statistics, probability, statistical inference, simple linear regression and basic ANOVA. Application of statistical methods to problems pertaining to business will be emphasized throughout this course. Topics:\nDescriptive Statistics Probability Discrete Probability Distributions Continuous Probability Distributions Sampling and Sampling Distribution Interval Estimation Hypothesis Tests Simple Linear Regression ANOVA ","date":1598457600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1598457600,"objectID":"cbd6852b5d4fd53bcd75a7426464cace","permalink":"/teaching/business-statistics/","publishdate":"2020-08-27T00:00:00+08:00","relpermalink":"/teaching/business-statistics/","section":"teaching","summary":"Undergraduate (Fall 2020, Fall 2021, Fall 2022, Fall 2023)","tags":["Undergraduate"],"title":"Statistical Analysis for Business Decisions","type":"teaching"},{"authors":["Chiu Yu Ko","Duozhe Li"],"categories":null,"content":" Supplementary notes can be added here, including code and math. ","date":1597593600,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1597593600,"objectID":"9b2d96ebaee33b8ddb676e2cdc7b0f2d","permalink":"/publication/many-to-one-bargaining/","publishdate":"2020-08-17T00:00:00+08:00","relpermalink":"/publication/many-to-one-bargaining/","section":"publication","summary":"An industry-wide research joint venture (RJV) does not lead to better technological development or a higher consumer surplus. In contrast, every non-industry-wide RJV leads to strict improvements in both measures. Our results continue to hold when technology transfer is possible. Independent collaboration with technology transfer is an alternative to establishing industry-wide research consortiums.","tags":["Game Theory","Industrial Organization","Innovation"],"title":"Decentralized one-to-many Bargaining","type":"publication"},{"authors":["Chiu Yu Ko","Xuyao Zhang"],"categories":null,"content":"","date":1565971200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1565971200,"objectID":"e4b8471214d72c28c60f8aaff4d76067","permalink":"/publication/rjv-transfer/","publishdate":"2019-08-17T00:00:00+08:00","relpermalink":"/publication/rjv-transfer/","section":"publication","summary":"An industry-wide research joint venture (RJV) does not lead to better technological development or a higher consumer surplus. In contrast, every non-industry-wide RJV leads to strict improvements in both measures. Our results continue to hold when technology transfer is possible. Independent collaboration with technology transfer is an alternative to establishing industry-wide research consortiums.","tags":["Game Theory","Industrial Organization","Innovation"],"title":"Research Joint Venture with Technology Transfer","type":"publication"},{"authors":["Chiu Yu Ko"],"categories":null,"content":"I have written an introductory book with R, titled Technical Analysis with R\u0026quot;. Readers are prepared how to do\ndata manipulation (dyplr package), conduct econometric analysis (regression, time series), plotting (ggplot2 package, dygraphs package), webscrapping (rvest package, wbstat package, quantmod package), and financial analysis (quantmod package, quantstrat package). backtest a complex trading strategy and evaluate the performance. The book is available through bookdown (free online gitbook) or Gumroad (name-your-own-price offline pdf and epub). You can read the whole book through bookdown. Of course, you are very welcome to consider buying me a cup of coffee by purchasing the ebook.\nAfter purchasing through Gumroad, you can download pdf and epub. ","date":1565971200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1565971200,"objectID":"ea83a2177a8c2e81f1c1dfba086a01fc","permalink":"/book/technical-trading-r/","publishdate":"2019-08-17T00:00:00+08:00","relpermalink":"/book/technical-trading-r/","section":"book","summary":"This is an introductory textbook that focuses on how to use R to test a technical trading strategy. No prior programming knowledge is needed..","tags":["Game Theory","Industrial Organization","Innovation"],"title":"Technical Analysis with R","type":"book"},{"authors":["Chiu Yu Ko"],"categories":null,"content":"TikZ is a drawing package in LaTeX. It is very useful to draw a professional-looking diagram. However, the learning curve is a little bit steep for a beginner. I have recently compiled a 629-page cookbook that provides step-by-step illustrations on how to use TikZ to draw various diagrams in economics:\nThe book is available through Google Play or Google book. You can read the whole book through free sampling and preview. If you think that I have done a good or bad job, please feel free to drop me an email with comments/suggestions or write a short review here. Of course, you are very welcome to consider buying me a cup of coffee through purchasing the ebook.\nNote: After purchasing, you may copy code directly through Google Play (only benefit of spending your money) and you can download a pdf file of the book but the pdf file does not allow search nor copy.\nAfter purchasing through Gumroad, you can download pdf and epub. ","date":1565971200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1565971200,"objectID":"68111ea64683fad8bab346e231d4c15b","permalink":"/book/tikz-cookbook/","publishdate":"2019-08-17T00:00:00+08:00","relpermalink":"/book/tikz-cookbook/","section":"book","summary":"TikZ is a drawing package in LaTeX. It is very useful to draw a professional-looking diagram. However, the learning curve is a little bit steep for a beginner. This is a cookbook that provides step-by-step illustrations on how to use TikZ to draw various diagrams in economics.","tags":["Game Theory","Industrial Organization","Innovation"],"title":"TikZ Cookbook","type":"book"},{"authors":["Chiu Yu Ko"],"categories":null,"content":"Related to the first book (TikZ Cookbook), I have compiled a companion textbook with more examples. The book shows 100 diagrams that can be found in textbooks of introductory principle classes.\nThe book is available through Google Play or Google book. You can read the whole book through free sampling and preview. If you think that I have done a good or bad job, please feel free to drop me an email with comments/suggestions. Of course, you are very welcome to consider buying me a cup of coffee through purchasing the ebook.\nAfter purchasing through Google Play, you may download acsm file to be opened by specialized software such as Adobe Digital Edition. The software will download the pdf file to be read offline. ","date":1565971200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1565971200,"objectID":"db4ff10e36ef4ed6703502f9df9dcf06","permalink":"/book/tikz-cookbook-companion/","publishdate":"2019-08-17T00:00:00+08:00","relpermalink":"/book/tikz-cookbook-companion/","section":"book","summary":"TikZ is a drawing package in LaTeX. It is very useful to draw a professional-looking diagram. However, the learning curve is a little bit steep for a beginner. This is a cookbook that provides step-by-step illustrations on how to use TikZ to draw various diagrams in economics.","tags":["Game Theory","Industrial Organization","Innovation"],"title":"TikZ Cookbook Companion","type":"book"},{"authors":null,"categories":null,"content":"Learning Objectives:\nAdd-in Analysis Toolpak Sorting Filtering Pivot Table Freeze plane Charting Conditional Statement Useful tools Add-in If you see Analysis Toolpak under the Active Application Add-Ins section, you do not need to do anything. Otherwise, you need to activate it.\nIf you want to enable Analysis toolpak, go to Options \u0026gt; Add-Ins \u0026gt; Analysis Toolpak. The same goes for Solver.\nAnalysis Toolpak: Regression Analysis Toolpak lets you run multiple regressions in Excel.\nAnalysis Toolpak: Solver Solver lets you solve linear and nonlinear equations, by optimizing the variables. This is extremely useful when you have a regression with multiple variables that you need to estimate. However, one drawback is that it can give you multiple solutions, so you might get a different answer when you re-run it. To check if you have enabled it, go to Options \u0026gt; Add-Ins \u0026gt; Solver.\nHowever, one drawback of using Solver is that it can have multiple solutions, meaning that the solution changes every time you run it.\nWe will cover other useful tools such as sorting, filtering, pivot table, freeze plane, split plane, and charting.\nSorting Sometimes, data that you download is in descending order of date, meaning that the most recent data is at the top. If you want to change the dates to be in ascending order(i.e. the latest date is at the bottom), you can use the Sort function in Excel.\nFirst, select your data. This step is necessary. If you have corresponding data, for example, prices that correspond to the dates, you have to select them as well. Otherwise, only the dates will be sorted, and the prices will correspond to the wrong dates.\nFiltering You can also filter data using the Filter option, and this is useful in pinpointing a particular subset of data.\nAfter selecting the Filter function, you will then see a small button on the top right-hand corner of your selected range. Clicking on it will show you the following figure.\nYou can then choose how you want to filter the data.\nSubtotal After filtering the data, one natural question is how to calculate summarize the filter data. For example, we want to calculate the sum or average of filter data. For example, we might want to know the sales of product grouped by region. One straightforward way is to produce subtables using SUMIF, COUNTIF or AVERAGEIF.\nWe employ the function \\subtotal(function, range). Where function is an integer where 1 is average and 9 is sum.\nPivot Table Excel has a one very efficient tools to do subtotal \u0026ndash; Pivot table. It is one of the most powerful tools in Excel. It allows you to calculate subtotal easily.\nFirst, prepare your data in a table form with header. As shown in Figure below.\nThen go to insert ribbon and then choose pivot table.Then fill in the table range.\nThen you can drag variables into four boxes: filters, columns, rows and values.\nThe basic elements are rows and values. Rows are the groups needed and values are the summary statistics to be calculated such as sum, average, count, standard deviation.\nIf we want to include grouping for values, then we can put the variable into columns. If we want to include grouping for everything, then it will be in filter.\nFor example, consider student record data with following columns: year, semester, course, students, assessment (mid-term, assignment or final), and scores. Then row variable can be course, and then values is scores. Then column is assessment. Filter can be year and semester.\nFreeze Plane When we have large spreadsheet, it is convenient to keep some parts (especially the row or columns headers) while we are scroll away. To do so, we can use freeze plane.\nSplit Plane When we have large spreadsheet, we want to compare some parts with another parts. To do so, we can use split plane function.\nHide and Unhide When we have many rows and columns, the screen may be too small to display all. For example, some rows are too bothering to work on. Then we have a row of data we wish to hide. We could do that by simply selecting the row, and pressing the right mouse button, then selecting the hide option.\nThe result would then look like this. You can also unhide row 1 by selecting the unhide option. See Figure \\ref{Excel-Hide-Row2}.\nCharting Excel also allows you to plot charts or graphs easily, to aid in the visualization of data. Simply go to the Insert tab, and there are multiple options available there. See Figure \\ref{Excel-Charting}\nConditional Logical statements are either true or false. Very often, we want to compare two numbers. For example, 2\u0026gt; 1 is true statement but 2 \u0026lt; 1 is false statement.\nFunction Meaning \u0026gt; Greater than \u0026lt; Less than = Equal to \u0026gt;= Greater than or equal to \u0026lt;= Less than or equal to Conditional function is useful for piece-wise function. One common example is absolute function. It returns the same number if the number is positive but change the number to positive if the given number is negative. The following expression takes the absolute value in the cell A1: =IF(A1\u0026gt;0,A1,-A1).\nFunction Meaning IF (logical, A, B) It checks whether the logical is true, and returns A value if TRUE, and B if FALSE. Here we provide an example of using conditional statement.\nFor a list of scores: 85, 90, 72, 45\u0026hellip;, we want to assign Pass if no less than 50, and Fail otherwise.\nA B C 1 Students Score Pass? 2 Peter 85 =IF(B2\u0026gt;50,\u0026quot;PASS\u0026quot;,\u0026quot;FAIL\u0026quot;) 3 John 94 4 Mart 72 5 Susan 45 Now we have another example of grading: A for scores no less than 80, B for scores no less than 70, and C otherwise.\nA B C 1 Students Score Grade 2 Peter 85 =IF(B2\u0026gt;80,\u0026quot;A\u0026quot;,IF(B2\u0026gt;70,\u0026quot;B\u0026quot;,\u0026quot;C\u0026quot;)) 3 John 94 4 Mart 72 5 Susan 45 Next example is about the most simplest technical trading rule \u0026ndash; simple filter rule. We calculate the price change P(t)/P(t-1) in column C and then for column D we use conditional statement to set Buy=1 when the price change is greater than $1+\\delta$ and Buy=0 otherwise.\nA B C D 1 Delta 0.02 2 Date P(t) P(t)/P(t-1) Buy 3 02-May-16 10 4 03-May-16 12 =C4/C3 =IF(C4\u0026gt;1+$B$1,1,0) 5 04-May-16 11 Then we can add sell variable at column D. It is set to 1 when the price change is less than $1-\\delta$ and Buy=0 otherwise. Finally, column E is the trading signal, and it is sum of buy and sell.\nA B C D E F 1 Delta 0.02 2 Date P(t) P(t)/P(t-1) Buy Sell Trade 3 02-May-16 10 4 03-May-16 12 =C4/C3 =IF(C4\u0026gt;1+$B$1,1,0) =IF(C4\u0026lt;1-$B$1,-1,0) =D4+E4 5 04-May-16 11 There are some conditional functions: COUNTA only counts non-empty cell, and COUNTBLANK counts blank cell. COUNTIF only counts cells with specific criteria. SUMIF and AVERAGEIF only sum and average over cells with specific criteria.\nFunction Meaning COUNTA(range) Counts the number of cells in a range that are not empty COUNTBLANK(range) Counts the number of empty cells in a specified range of cells COUNTIF(range, criteria) Counts the number of cells within a range that meet the given condition. For example, COUNTIF(\u0026quot;A1:B2\u0026quot;,\u0026quot;\u0026gt;0\u0026quot;) counts the number of cells with positive number SUMIF(range, criteria) Adds the cells specified by a given condition or criteria AVERAGEIF(range, criteria) Finds average(arithmetic mean) for the cells specified by a given condition or criteria Sometimes, we want to combine several logical statements.\nFunction Meaning AND(logical1, logical2) Returns TRUE if both logicals are TRUE OR(logical1, logical2) Returns TRUE if any of the logicals are TRUE, and Returns FALSE only if all logicals are FALSE NOT(logical) Changes FALSE to TRUE, or TRUE to FALSE Now we have another example of grading. Grading depends on the sum of test and exam. Similar to the above example, a student will get an A for scores no less than 80, a B for scores no less than 70, and a C otherwise. However, if an A student score more than 60 in final, A+ will be given.\nA B C D 1 Student Test Exam Grade 2 Pert 30 55 =IF(AND(B2+C2\u0026gt;80,C2\u0026gt;60),\u0026quot;A\u0026quot;,IF(B2+C2\u0026gt;80,\u0026quot;A\u0026quot;,IF(B2+C2\u0026gt;70,\u0026quot;B\u0026quot;,\u0026quot;C\u0026quot;)) 3 John 28 62 4 Mary 22 40 5 Susan 45 40==30 For technical analysis, we usually use more than one signals. To combine two signals, one common method is to take action when both signals agree. It combines two buy signals (columns A and B) into final signal (column C).\nA B C 1 Rule1 Rule2 Buy? 2 0 1 =IF(AND(A1=1,B1=1),1,0) 3 1 0 4 0 1 5 1 0 More applications Excel spreadsheet can be used for fundamental analysis, technical analysis and simulation.\nFundamental Analysis We can construct the spreadsheet of performance ratio analysis from data generated from financial statements of a given year. Vlookup will be useful in this case. We can also use the copy and paste function to replicate the analysis for other years. Relative address will be useful here.\nTechnical analysis We can also perform technical analysis in Excel, by setting up our own spreadsheet and incorporating the formula. Examples include Filter rule, Simple Moving Average (SMA),Exponential Moving Average (EMA), Bollinger Band, Moving Average Convergence Divergence (MACD), Relative Strength Index (RSI).\nTime Series Analysis We can also do some basic time series analysis in Excel spreadsheet. Examples include, Gaussian White Noise, Moving Average MA1 model, Autoregressive AR1 model, Random Walk.\n","date":1556899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556899200,"objectID":"7840f23db0ed5694110f217519318fa6","permalink":"/programming/excel/advanced-excel/","publishdate":"2019-05-04T00:00:00+08:00","relpermalink":"/programming/excel/advanced-excel/","section":"programming","summary":"Learning Objectives:\nAdd-in Analysis Toolpak Sorting Filtering Pivot Table Freeze plane Charting Conditional Statement Useful tools Add-in If you see Analysis Toolpak under the Active Application Add-Ins section, you do not need to do anything.","tags":null,"title":"Advanced Excel","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nConditional Statements Iterative Statements Conditionals There are 4 main types of conditionals that we will use in VBA:\nIf, If-else, If-ElseIf-else, and Select Case. Relational Operator Conditional statement are executed based on logical statement (true/false). The most basic logical statement is by relational operators. VBA uses the same relational operator as those in Excel spreadsheet.\nOperator Meaning \u0026gt; greater than \u0026lt; less than = equal to \u0026gt;= greater than or equal to \u0026lt;= less than or equal to If How do conditionals work? They are usually put at the front of a condition that you want to be met. If that condition is met, then Excel will carry out the specified action or task. The syntax looks like this:\nIf (condition is True) Then\rDo action/task End if\rHere is an example for if-statement using subroutine.\nSub SimpleIF()\rDim a as Integer Dim b as Integer a = 2\rb = 1\rIf a \u0026gt; b Then\rMsgBox( \u0026quot;I like this class!\u0026quot; )\rEnd If\rIf a \u0026lt; b Then\rMsgBox( \u0026quot;I hate this class!\u0026quot; )\rEnd If\rEnd Sub\rHere is an example for if-statement using function.\nFor a list of scores: 85, 90, 72, 45…, we want to assign Pass if no less than 50, and Fail otherwise.\nA B C 1 Student Score Pass? 2 Peter 85 =IF(B2\u0026gt;50,\u0026quot;PASS\u0026quot;,\u0026quot;FAIL\u0026quot;) 3 John 94 4 Mary 72 5 Susuan 45 We can write the following function.\nFunction Pass1(Mark As Integer)\rIf Mark \u0026gt;= 50 Then\rPass1 = \u0026quot;Pass\u0026quot;\rEnd If\rIf Mark \u0026lt; 50 Then\rPass1 = \u0026quot;Fail\u0026quot;\rEnd If\rEnd Function\rA B C 1 Student Score Pass? 2 Peter 85 =Pass1(B2) 3 John 94 4 Mary 72 5 Susuan 45 If-else We sometimes have a binary situation that we want to execute task A if condition is true and otherwise task B. We can use the following if-else statement.\nIf (condition is True) Then\rDo action/task A\rElse\rDo action/task B\rEnd if\rIn this example, if the 1st condition is met, task A will be carried out. Otherwise, we immediately carry out task B, because no other conditions are specified.\nHere is an example of routine for if-statement.\nSub IFElse()\rDim a as Integer Dim b as Integer a = 2\rb = 1\rIf a = b Then\rMsgBox( \u0026quot;I like this module!\u0026quot; )\rElse MsgBox( \u0026quot;I hate this module!\u0026quot; )\rEnd If\rEnd Sub\rHere, we are using 2 If conditions. Also note that the code only accounts for the case a \u0026gt; b, and the case a\u0026lt;b. If a=b, then you will not get any result. This is extremely important, because when coding people often tend to neglect one or two cases, and this causes problems in their code. Also note that every If chunk must be ended with the code End If, otherwise VBA will not know that you have ended the If code chunk.\nContinue with our Pass1, we can use if-else statement.\nFunction Pass2(Mark As Integer)\rIf Mark \u0026gt;= 50 Then\rPass2 = \u0026quot;Pass\u0026quot;\rElse\rPass2 = \u0026quot;Fail\u0026quot;\rEnd If\rEnd Function\rA B C 1 Student Score Pass? 2 Peter 85 =Pass2(B2) 3 John 94 4 Mary 72 5 Susuan 45 If-elseif-else The next question would then be, what if we wanted to include another condition? We would then make use of the If-ElseIf-else conditional, as shown below.\nIf (condition1 is True) Then Do action/task A\rElseIf (condition2 is True) Then\rDo action/task B\rElse\rDo action/task C\rEnd if Note that If-ElseIf-Else conditionals are only evaluated once, in order. The topmost condition is checked, if that isn’t true, the next one is checked, and so on, until you find one that is true and perform that task. Whatever other conditions remaining below the true one are not gone through, because once that true condition’s task has been carried out, the checking stops. In other words, VBA will exit that If-ElseIf-Else chunk. For correctness, none of your conditions should have identical overlapping parts!\nHere we use a If-Else condition, and now the a=b case is also accounted for, under the Else condition.\nSub IFElseIF()\rDim a as Integer Dim b as Integer a = 2\rb = 1\rIf a = b Then\rMsgBox( \u0026quot;I like this module!\u0026quot; )\rElseIf a \u0026lt; b Then\rMsgBox( \u0026quot;I hate this module!\u0026quot; )\rElse\rMsgBox( \u0026quot;I am neutral towards this module!\u0026quot; )\rEnd If\rEnd Sub\rHere, we have used an ElseIf condition, and this separates the previous a\u0026lt;b and a=b cases into 2 different cases now. Previously in confession1() they were lumped together under the Else condition.\nRecall our grading function as follows:\nA B C 1 Student Score Pass? 2 Peter 85 =IF(B2\u0026gt;80,\u0026quot;A\u0026quot;,IF(B2\u0026gt;70,\u0026quot;B\u0026quot;,\u0026quot;C\u0026quot;)) 3 John 94 4 Mary 72 5 Susuan 45 Function Grade1(Mark As Integer)\rIf Mark \u0026gt;= 80 Then\rGrade1 = \u0026quot;A\u0026quot;\rElseif Mark \u0026gt;= 70 Then\rGrade1 = \u0026quot;B\u0026quot;\rElse\rGrade1 = \u0026quot;C\u0026quot;\rEnd If\rEnd Sub\rA B C 1 Student Score Pass? 2 Peter 85 =Grade1(B2) 3 John 94 4 Mary 72 5 Susuan 45 Select Case How to handle if we have many different cases? We can use the Select function, to create cases that we want to choose between.\nSub SelectCase()\rDim a as Integer\ra = 1\rSelect Case a\rCase 1 MsgBox (\u0026quot;I like this module!\u0026quot;)\rCase 2\rMsgBox (\u0026quot;I hate this module!\u0026quot;)\rCase 3\rMsgBox (\u0026quot;I am neutral!\u0026quot;)\rEnd Select\rEnd Sub\rIn this case, since you have set the value of a to 1, the output will be I like this module. If you were to change the value of a in the code, the corresponding case will then be selected. This is useful if you had a variable with multiple states or values that you might want to switch between.\nSelect case can also accommodate cases using relational operator. To do so, we have to use Is to represent the variable, and Else to represent all residual cases.\nThe following function returns the grade of a class based on the mark. A student will get an A if the mark is no less than 80, B if the mark is no less than 70 and C otherwise.\nFunction Grade2(Mark As Integer)\rSelect Case Mark\rCase Is \u0026gt;= 80\rGrade2 = \u0026quot;A\u0026quot;\rCase Is \u0026gt;= 70\rGrade2 = \u0026quot;B\u0026quot;\rCase Else\rGrade2 = \u0026quot;C\u0026quot;\rEnd Select\rEnd Function\rA B C 1 Student Score Pass? 2 Peter 85 =Grade2(B2) 3 John 94 4 Mary 72 5 Susuan 45 Logical Operators Sometimes, we want to combine several logical statements. However, different from Excel spreadsheet, for and and or VBA uses logical operator instead of logical function.\nOperator Meaning logical1 AND logical2 Returns TRUE if both logicals are TRUE logical1 OR logical2 Returns TRUE if any of the logicals are TRUE, and Returns FALSE only if all logicals are FALSE NOT logical Changes FALSE to TRUE, or TRUE to FALSE Recall our A+ grading example.\nA B C D 1 Student Test Exam Grade 2 Peter 30 55 =IF(AND(B2+C2\u0026gt;80,C2\u0026gt;60),\u0026quot;A\u0026quot;,IF(B2+C2\u0026gt;80,\u0026quot;A\u0026quot;,IF(B2+C2\u0026gt;70,\u0026quot;B\u0026quot;,\u0026quot;C\u0026quot;)) 3 John 28 62 4 Mary 22 40 5 Susuan 45 30 Function AplusGrade(Test As Integer, Exam As Integer)\rDim Total As Integer\rTotal = Test + Exam\rIf Total \u0026gt;= 80 And Exam \u0026gt; 60 Then\rAplusGrade = \u0026quot;A+\u0026quot;\rElseif Total \u0026gt;= 80 Then\rAplusGrade = \u0026quot;A\u0026quot;\rElseif Total \u0026gt;= 70 Then\rAplusGrade= \u0026quot;B\u0026quot;\rElse\rAplusGrade = \u0026quot;C\u0026quot;\rEnd If\rEnd Function\rA B C D 1 Student Test Exam Grade 2 Peter 30 55 =APlusGrade(B2,C2) 3 John 28 62 4 Mary 22 40 5 Susuan 45 30 Example: SMA Recall that how we generate SMA as below\nA B C 1 n 5 2 Date Price SMA(n) 3 02-May-16 10 =IF(COUNT($A$3:A3)\u0026gt;=$B$1,average(Offset(B3,0,0,-$B1$)), \u0026quot;\u0026quot;) 4 03-May-16 9 5 04-May-16 8 Function SMA(Price As Range, n As Integer, Price0 As Range)\rDim day As Integer\rday = WorksheetFunction.Count(Range(Price0,Price))\rIf day \u0026gt;= n Then\rSMA = WorksheetFunction.Average(Range(Price.Offset(-n+1,0),Price))\rElse\rSMA = \u0026quot;\u0026quot;\rEnd If\rEnd Function\rA B C 1 n 5 2 Date Price SMA(n) 3 02-May-16 10 =SMA(B3,B$1,B$3) 4 03-May-16 9 5 04-May-16 8 Example: SMA Trading Rule To generate a trading signal based on SMA, we can use the SMA function above.\nA B C D E F 1 Delta 5 2 S 3 L 4 Date Price SMA(S) SMA(L) r Trade 5 02-May-16 10 =SMA(B5,$B$2,$B$5) =SMA(B5,$B$3,$B$5) =C5/D5-1 =IF(E5\u0026gt;=$B1$,1,IF(E5\u0026lt;=-$B1$,-1,0)) 6 03-May-16 9 7 04-May-16 8 SMA(ST, LT, Delta, price, price0) where price is current price, price0 is initial price, ST is the length of short term SMA, LT is the length of long term SMA, and Delta is threshold parameter.\nThis function assumes the prices are sorted chronologically. Then, using the SMA function above and finally calculate the trading signal using the if condition.\nFunction SMATrade(ST As Integer, LT As Integer, Delta As Double, Price As Range, Price0 As Range)\rDim smas As Double\rDim smal As Double\rDim r As Double\rDim day As Integer\rday = WorksheetFunction.Count(Range(Price0,Price))\rIf day \u0026gt;= LT Then\rsmaS = SMA(Price, ST, Price0)\rsmaL = SMA(Price, LT, Price0)\rr = (smaS - smaL) / smaL\rIf r \u0026gt; Delta Then\rSMATrade = 1\rElseIf r \u0026lt; -Delta Then\rSMATrade = -1\rElse\rSMATrade= 0\rEnd If\rEnd If\rEnd Function\rEnd Function\rA B C 1 Delta 5 2 S 3 L 4 Date Price Trade 5 02-May-16 10 =SMATrade($B$2,$B$3,$B$1,B15,$B$5) 6 03-May-16 9 7 04-May-16 8 Iteration Sometimes, when coding certain things we want to check the same conditions multiple times. One way would be to write multiple If-Else chunks, but that would be extremely inefficient and tedious. We can use loops, such that we only need to type the If-Else chunk once and the loop will repeat it multiple times. There are 2 types of loops, the while loop and the for loop. They work in a similar way, however you will use them under different circumstances, depending on what your code requires.\nWhile Loop We first look at an example of a while loop.\nSub WhileLoop()\rDim a As Integer\ra = 0\rDo While a \u0026lt; 3\rMsgBox (a \u0026amp; \u0026quot;: I like this class! \u0026quot;)\ra = a + 1\rLoop\rMsgBox (\u0026quot;It is important so I said this \u0026quot; \u0026amp; a \u0026amp; \u0026quot; times!\u0026quot;)\rEnd Sub\rHere, a has the initial value of 0. By the time the first loop is finished, a now has the value 1, because of the line a = a + 1, and the message box has appeared once with the message I like this class!. VBA then goes back to the top of the while loop, and checks if a\u0026lt;3. Since a=1, this condition is satisfied, so the loop runs another iteration. Now a=2. Since the while condition is still satisfied, the loop runs a 3rd iteration. Now a=3. The condition a\u0026lt;3 is no longer true, so the loop does not continue running, and VBA exits the loop. We then expect to see a message box with the value a=3 inside.\nFor Loop Another type of loop is the for loop. It works in a similar way to a while loop, but there will be occasions when it is more convenient to use a for loop instead of a while loop, and vice versa.\nSub ForLoop()\rDim a As Integer\rFor a = 1 to 5 Step 1\rMsgBox (a \u0026amp; \u0026quot;: I like this class!\u0026quot;)\rNext a\rMsgBox (\u0026quot;OK. I know. You have said this \u0026quot; \u0026amp; a-1 \u0026amp; \u0026quot; times!\u0026quot;)\rEnd Sub\rInitially, a=1. Step 1 means that every time the loop completes one iteration, a will increase by 1. The increment happens when you reach the line Next a. Once the for loop finishes running, a will have the value 5. Note that when the 5th iteration finishes running, a will have the value 6. Since 6 is not within the given range of the for loop, VBA exits the for loop. To get the correct number in the next message box, we use a-1 instead of a.\nIn most cases, the task can be coded using either a for loop or a while loop. It depends on the situation, but using either usually has no difference, more of a preference issue.\nFor each Loop For collections, which are objects that contain a group of the same object, we can use the For Each method to iterate through the collection.\nThe following sub display the formula for each cells in the range A1:A3.\nSub ForEachLoop()\rDim myCell as Range\rFor Each myCell in Range(\u0026quot;A1:A3\u0026quot;)\rMsgBox myCell.Formula\rNext myCell\rEnd Sub\rThe following functions returns the product of positive numbers within the range of cells. It will return 1 if none of the cells is positive.\nFunction ProdPositive(Cells As Range)\rProdPositive = 1\rFor Each cell In Cells\rIf cell.Value \u0026gt; 0 Then\rProdPositive = ProdPositive * cell.Value\rEnd If\rNext cell\rEnd Function\rAnother example is to remove all the charts in the activesheet.\nSub RemoveAllChart()\rDim mycharts As ChartObject\rFor Each mycharts In ActiveSheet.ChartObjects\rmycharts.Delete\rNext\rEnd Sub\rExample: Relative Strength Index Here is a spreadsheet to calculate RSI.\nA B C D E F 1 n 14 2 Date Price U D RS RSI 3 02-May-16 10 =IF(B4\u0026gt;B3,1,0) =IF(B4\u0026lt;B3,1,0) =IF(COUNT($A$4:A4)\u0026gt;=$B$2,SUM(OFFSET(C4,0,0,-$B$1))/SUM(OFFSET(D4,0,0,-$B$1)),\u0026quot;\u0026quot;) =100*E4/(1+E4) 4 03-May-16 9 5 04-May-16 8 To show a more elaborate example of iteration, we go through the code for the Relative Strength Index(RSI) indicator. We know that RSI only requires past price data.\nHere we are setting Prices as an input, and telling VBA that this input should be a range. We then define up, down as long variables for up, down. We also define RS as double variable as relative strength. For calculation, we define count as a long variable and day as a range variable. After which, we assign the initial values of 0 to up_day, down and count.\nFunction RSI(Prices As Range)\rDim up, down, count As Long\rDim RS As Double\rDim day As Range\rup = 0\rdown= 0\rcount = 1\rFor Each day In Prices\rIf count \u0026gt; 1 Then\rIf day.Value \u0026gt; day.Offset(-1, 0).Value Then\rup = up+ 1\rElseIf day.Value \u0026lt; day.Offset(-1, 0).Value Then\rdown = down + 1\rEnd If\rEnd if\rcount = count + 1\rNext day\rIf down \u0026lt;\u0026gt; 0 Then\rRS = up / down\rRSI = 100 * (RS / (1 + RS))\relse RSI = 100\rEnd If\rEnd Function\rHere, the loop just runs through the data, and adds numbers to up and down accordingly. When the loop is done, we can then calculate RSI.\nNow we see how this RSI function applies in spreadsheet as below.\nA B C 1 n 14 2 Date Price RSI 3 02-May-16 10 =IF(COUNT($A$3:A3)\u0026gt;=$B$1,RSI(OFFSET(B2,-$B$1-1,0))), \u0026quot;\u0026quot;) 4 03-May-16 9 5 04-May-16 8 ","date":1556899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556899200,"objectID":"7349acf69c05638aa001d1617f0fe975","permalink":"/programming/vba/advanced-vba/","publishdate":"2019-05-04T00:00:00+08:00","relpermalink":"/programming/vba/advanced-vba/","section":"programming","summary":"Learning Objectives:\nConditional Statements Iterative Statements Conditionals There are 4 main types of conditionals that we will use in VBA:\nIf, If-else, If-ElseIf-else, and Select Case. Relational Operator Conditional statement are executed based on logical statement (true/false).","tags":null,"title":"Advanced VBA","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nWhy Excel? Basic Excel Worksheet Functions What is Excel? Why Excel? Excel is a spreadsheet program. It is widely used in the industry because they are simple, and also allow you to view data visually.\nSince Excel is widely used, it is usually the basic requirement for many jobs.\nHere, we will go into the basics of Excel, and how to use them.\nCells The basic element of spreadsheet is a cell. We often work with multiple cells. Some cells will be data, some cells will be calculation steps and some cells contains results that require calculations.\nAnother cell in the same sheet The first thing to learn in excel is how to refer to another cell. There are 2 ways to reference cells:\nA1 method and R1C1 method. The A1 method is more commonly used, since the columns are already labeled with letters, and the rows are labeled by numbers.\nHowever, if your dataset has many columns (more than 26), it might be a good idea to use the R1C1 method.\nTo calculate the sum of 2 cells A1 and B1, simply type in the equation box: = A1 + B1.\nPressing the Enter key will then give you the following result.\nThis is assuming that both A1 and B1 contain numerical values. Otherwise, you will get a \\#VALUE! Error.\nIf you place your mouse cursor on the yellow diamond box, it will tell you what error has occurred.\nBecause A1 contains a numerical value, and B1 contains text, you cannot apply the Sum function, hence Excel raises an error. We then show an example of multiplication as below.\nRange, Worksheet and Workbook We sometimes need to refer to a group of cells for calculation. Range is always rectangular, hence, we just need the top left cell and bottom right cell. For example, A1:B2 implies cells A1, A2, B1, and B2.\nTo refer to cells in other worksheet in the same workbook (xlsx file), we use the name and exclamation mark. For example, =Sheet1!A1\nTo refers to cells in the other worksheet in the different workbook, we use squared bracket. For example, =[appl.xlsx]Sheet1!A1 for workbook that is currently open in Excel. Alternatively, ='C:\\\\document\\\\[appl.xlsx]'Sheet1!A1 for workbook that is not open.\nCopy and Paste: Iteration Copy and Paste is the most commonly used operation in Excel. It is very powerful tools to perform calculation repetitively. In programming terminology, it is called iteration.\nReferencing: Absolute vs. Relative You can use absolute referencing, or relative referencing. We start by explaining relative referencing.\nSay I have the following values for columns A, B, and C, and I want to calculate D as their product. If I simply copy D1 and paste it in D2, by default Excel will take it as relative referencing, and D2 = A2*B2*C2 = 210.\nWhat if I want to reuse the value of A1, say I want D2 = A1*B2*C2? We then use the $ sign to indicate absolute referencing. Placing the $ sign in front of the row or column of the cell will tell Excel to always take that particular row or column even when the formula is copied.\nTips: Pressing F2 will change between relative address and absolute address.\nWe see that D2=A1*B2*C2 even when we copied the formula from D1. Because of the $ in $A$1, Excel did not use relative referencing for that row/column.\nThe following example shows how relative address can be used effectively to reduce typing when we create multiplication table. We just need to enter the formula in B2. Then copy and paste the rest of the cells.\nA B C 1 x 1 2 2 1 =$A2*B$1 3 2 Naming Usually, we will label our rows and/or columns, to let the user know what kind of data or variables are in the spreadsheet. This is for convenience so that the user can follow what you are doing easily.\nMoreover, we give a name to a cell. In the ribbon, choose FORMULAS tab and then choose to define the name. Then you can refer a cell by its name. This is particularly useful to make your spreadsheet easy to read and understand by other users.\ndividend discount model Let us illustrate the idea of relative address using the dividend discount model(DDM) example. Consider stock which pays out a fixed dividend of $1 per year for the next 10 years. The rate of inflation is going to be constant at 3% per year. We want to find out how much the future dividend payouts are worth in present values.\nThe discount factor is equal to 1/1.03, which is approximately 0.9709. How do we do this calculation efficiently in Excel? We make use of both relative and absolute referencing.\nThe only thing that changes here is the overall discount factor, which depends on the number of years ahead. Hence we use absolute referencing for the dividend payout amount, and the yearly discount factor, and then multiply the yearly discount factor accordingly with the number of years. Lastly, we sum up the values to get 8.53.\nWorksheet Functions Excel spreadsheet is very convenient because it has a large number of built-in functions that perform calculation without programming. We will learn how to write these functions by yourself in the next class using VBA.\nArithmetic Operators We first cover some basic arithmetic operators and some basic mathematics functions.\nFunction Meaning + Addition - Substraction * Multiplication / Division ^ Power SQRT() Square Root ABS() Absolute number Basic Math Functions Function Meaning COUNT(range) Counts the number of cells in a range that contain numbers SUM(range) Adds all the numbers in a range of cells PRODUCT(range) Multiplies all the numbers given as arguments SUMPRODUCT(range1, range2) Sum of products of the first elements in both ranges, the second elements,\u0026hellip;. Basic Statistic Functions Function Meaning MIN(range) Returns the smallest number in a set of values. Ignores logical values and text MAX(range) Returns the largest number in a set of values. Ignores logical values and text MEDIAN(range) Returns the median, or the number in the middle of the set of given numbers VAR.P(range) Calculates population variance VAR.S(range) Calculates sample variance STDEV.P(range) Calculate population standard deviation STDEV.S(range) Calculate sample standard deviation The following example shows AVERAGE is used to calculate simple moving average.\nA B C 1 n 5 2 beta =2/(A1+1) 3 Date Price SMA(n) 4 02-May-16 19 \u0026hellip; 7 06-May-16 30 =AVERAGE(B3:B7) 8 07-May-16 56 The following example shows AVERAGE and recursive formula is used to calculate exponential moving average. Note that initial EMA is SMA. And the recursive formula is $$EMA_{t}(n) = \\beta P_{t}(n) + (1-\\beta) EMA_{t-1}(n)$$ where $\\beta=2/(n+1)$.\nA B C 1 n 5 2 beta =2/(A1+1) 3 Date Price EMA(n) 4 02-May-16 19 \u0026hellip; 7 06-May-16 30 =AVERAGE(B3:B7) 8 07-May-16 56 =$B$2*B9+(1-$B$2)*C8 Advanced Statistic Functions Function Meaning COVARIANCE.P(range1 ,range2) Calculate population covariance using data in range 1 and range 2 COVARIANCE.S(range1, range2) Calculate sample covariance using data in range 1 and range 2 INTERCEPT(yrange,xrange) Returns the intercept of simple linear regression of y on x SLOPE(yrange, xrange) Returns the slope of simple linear regression of y on x STEYX(yrange, xrange) Returns the standard error of simple linear regression of y on x RAND() Returns a random number greater than or equal to 0 and less than 1, evenly distributed RANDBETWEEN(integer1, integer2) Returns a random number between integer1 and integer 2 where integer1 is less than integer2 NORM.INV(probability, mean, standard deviation) Returns the inverse of the normal cumulative distribution at the given probability under the specified mean and standard deviation. How to generate normal distribution? We will use a method called inversion. Use RAND to generate uniform distribution and then use NORM.INV is to generate a normal variable.\nLookup Lookup functions allow you to get data from another table. Two basic lookup functions are VLOOKUP or HLOOKUP. They help to locate particular cells in table. Using MATCH and INDEX together allows us to have a flexible vlookup and hlookup, when we have 2 different types of data. For example, we could use =INDEX(range1, MATCH(key, range2)).\nFunction Meaning VLOOKUP(key, range, column, FALSE) Looks for key in the leftmost column of a table (given by the range), and then returns a value in the same row from a column you specify. HLOOKUP(key, range, column, FALSE) Looks for key in the top row of a table (given by the range) and returns the value in the same column from a row you specify. MATCH(key, range) This helps you search for a particular value within a dataset. The output returned is the relative position of the value in the dataset, for example, D8. The key is the value that you want to find, and the range is the range of data that you are searching for. INDEX(range, index) Returns a value or reference of the cell at the intersection of a particular row and column, in a given range. The output will be the content of that particular cell at that index. The following example shows how vlookup can be used to merge two tables.\nA B C D 1 Stock Price Stock Volume 2 Apple 10 IBM 10 3 IBM 20 Google 20 4 Google 30 Apple 30 5 6 Stock Price Volume 7 Apple =VLOOKUP(A7,$A$1:$B$4,2,FALSE) =VLOOKUP(A7,$C$1:$D$4,2,FALSE) 8 IBM 9 Google The following example shows how index and match can be used to merge two tables.\nA B C D 1 Stock Price Stock Volume 2 Apple 10 IBM 10 3 IBM 20 Google 20 4 Google 30 Apple 30 5 6 Stock Price Volume 7 Apple =INDEX(B2:B4,MATCH(A7, A2:A4,0)) =INDEX(D2:D4, MATCH(A7,C2:C4,0)) 8 IBM 9 Google Cell Referencing Function The following cell referencing functions are very useful to make the code clean and tidy. Offset moves the cell reference to another cell or range of cells. Indirect convert text to cell reference and Address convert cell reference to text.\nFunction Meaning OFFSET(cell, row, column,height and width) Returns a reference to a range that is a given number of rows and columns from a given reference. Cell refers to the reference cell that you are taking reference from. For row, positive values will mean cells downwards from the reference cell, and negative values will mean cells above the reference cell. For column, positive values will mean cells to the right of the reference cell, while negative values will mean cells to the left of the reference cell. INDIRECT(address string) Returns the reference specified by a text string. One example would be INDIRECT(\u0026quot;A1\u0026quot;), which returns the contents of the cell A1. ADDRESS(row, column) Creates a cell reference as text, given specified row and column numbers. For example, ADDRESS(2, 7) will return $G$2 as output. Combination of INDIRECT and ADDRESS is useful if you do not want to type out the address string, or you have very large datasets. We can use INDIRECT(ADDRESS(1,2)).\nThe following example shows offset can be used to make spreadsheet customization. We consider K-day momentum where K allow the user to input. While OFFSET is rather simple, we need to take care the case when momentum cannot be calculate in the first K days.\nA B C 1 K 5 2 Date Price K-Momentum 3 02-May-16 10 =IF(COUNT($A$3:A3)\u0026gt;=$B$1+1,B3-OFFSET(B3,-$B$1), \u0026quot;\u0026quot;) 4 03-May-16 9 5 04-May-16 8 The following sample shows more advanced use of OFFSET. We consider n-day simple moving average where n allows the user to input. We only start the calculation when on the n-th day.\nA B C 1 n 5 2 Date Price SMA(n) 4 02-May-16 10 =IF(COUNT($A$3:A3)\u0026gt;=$B$1,average(Offset(B3,0,0,-$B1$)), \u0026quot;\u0026quot;) 5 03-May-16 9 6 04-May-16 8 The following sample shows more advanced use of OFFSET. We consider n-day simple moving average where n allows the user to input. We only start the calculation of EMA when on the n-th day. The first EMA is SMA. Then the rest is by the updating recursive formula.\nA B C 1 n 5 2 beta =2/(A1+1) 3 Date Price EMA(n) 4 02-May-16 19 =IF(COUNT($A$4:A4)=$B$1,average(Offset(B4,0,0,-$B1$)),IF(COUNT($A$4:A4)\u0026gt;$B$1,=$B$2*B4+(1-$B$2)*C3, \u0026quot;\u0026quot;) 5 03-May-16 Hyperlink The following function refers the external link. Hyperlink connects to external file or internet address.\nFunction Meaning HYPERLINK(location, text) Creates a shortcut or jump that opens a document stored on your hard drive, a network server, or on the internet. For location, you could use places on your computer such as Desktop or C:, or use internet address such as http://www.google.com. The text will be shown as a hyperlink, for example, you could put Click to open Google search'. Text Function The following shows some basic text functions. Len is to find the length. Trim and Clean is to clean up the text. Concatenate is to combine text.\nFunction Meaning LEN(text) Short form for length. Returns the number of characters in a text string. For example, LEN(apple) returns 5. TRIM(text) Removes all spaces from a text string except for single spaces between words. CLEAN(text) Removes all nonprintable characters from text. CONCATENATE(text1, text2, \u0026hellip;) Joins all text strings into one text string. For example, CONCATENATE(\u0026quot;I am\u0026quot;, \u0026quot;a boy\u0026quot;, ...) returns I ama boy. Note that space is not automatically added between text. There are some advanced text functions: Left, Right and Mid extract part of text. Find and Search are to look for string and Substitute is to replace text.\nFunction Meaning LEFT(text, number) Returns the specified number of characters from the left of the text string. For example, LEFT(\u0026quot;testing\u0026quot;, 2) will return you te. RIGHT (text, number) Returns the specified number of characters from the right of the text string. For example, RIGHT(\u0026quot;testing\u0026quot;, 2) will return you ng. MID (text, start position, number) Returns the specified number of characters from the start position of the text string. For example, MID(\u0026quot;testing\u0026quot;, 3,2) will return you st FIND(text, target) Returns the starting position of one text string within the target text string. For example, FIND(\u0026quot;apple\u0026quot;, \u0026quot;I like apple\u0026quot;) returns 8. Note that FIND is case-sensitive, meaning that upper-case letters are not the same as lower-case letters. For example, FIND(\u0026quot;APPLE\u0026quot;, \u0026quot;I like apple\u0026quot;) returns an error. SEARCH(text, target) Same as FIND but not case-sensitive. For example For example, SEARCH(\u0026quot;APPLE\u0026quot;, \u0026quot;I like apple\u0026quot;) returns 8 SUBSTITUTE(target, new text, old text) Replaces existing text with new text in a text string. For example, SUBSTITUTE(\u0026quot;I like apple\u0026quot;, \u0026quot;apple\u0026quot;, \u0026quot;banana\u0026quot;) returns I like banana. ","date":1556899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556899200,"objectID":"08375ffe0cd9b57d8be130caedeb780d","permalink":"/programming/excel/basic-excel/","publishdate":"2019-05-04T00:00:00+08:00","relpermalink":"/programming/excel/basic-excel/","section":"programming","summary":"Learning Objectives:\nWhy Excel? Basic Excel Worksheet Functions What is Excel? Why Excel? Excel is a spreadsheet program. It is widely used in the industry because they are simple, and also allow you to view data visually.","tags":null,"title":"Basic Excel","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nBasic TikZ technique to draw:\nStraight Line Node Curve Shape Fill Setup Loading Package To load the TikZ package, we just need to use the function \\usepackage{tikz}\n\\documentclass{article}\r\\usepackage{tikz}\r\\begin{document}\r...\r\\end{document}\rTikZ Environment First, we need to tell which part of code should be included in the drawing by using begin{tikzpicture} and \\end{tikzpiture}.\n\\begin{tikzpicture}\r...\r\\end{tikzpiture}\rStraight line We first discuss simple straight line and then we discuss its decoration.\nDraw a line To draw a straight line, use \\draw, and specify the coordinates. To end drawing, we must end with a semicolon.\n\\draw(0,0)--(3,3);\rTo draw connected lines, we specify all the coordinates. Below draws a square:\n\\draw(0,0)--(4,4)--(4,0)--(0,0);\rLine Pattern To draw a dashed line, we use the option [dashed]:\n\\draw[dashed] (0,0)--(4,4);\rTo draw a dotted line, we use the option [dotted]:\n\\draw[dotted] (4,0)--(0,4);\rLine Thickness We can specify relative thickness:\n\\draw[ultra thin] (0,6)--(4,6);\r\\draw[very thin] (0,5)--(4,5);\r\\draw[thin] (0,4)--(4,4);\r\\draw[semithick] (0,3)--(4,3);\r\\draw[thick] (0,2)--(4,2);\r\\draw[very thick] (0,1)--(4,1);\r\\draw[ultra thick] (0,0)--(4,0);\rWe can also specify thickness directly:\n\\draw[line width=11] (0,1)--(4,1);\r\\draw[line width=5mm] (0,0)--(4,0);\rLine Color \\draw[red] (0,2)--(4,2);\r\\draw[blue] (0,1)--(4,1);\r\\draw[green] (0,0)--(4,0);\rLine Cap Now we add arrow to the tip.\n\\draw[-\u0026gt;] (0,5)--(4,5);\r\\draw[\u0026lt;-\u0026gt;] (0,4)--(4,4);\r\\draw[|-\u0026gt;] (0,3)--(4,3);\r\\draw[\u0026lt;-|] (0,2)--(4,2);\r\\draw[|-|] (0,1)--(4,1);\r\\draw[|\u0026lt;-\u0026gt;|] (0,0)--(4,0);\rBraces \\usetikzlibrary{decorations.pathreplacing}\r\\draw [decorate,\rdecoration={brace,amplitude=4pt, mirror},xshift=0pt,yshift=-3pt]\r(1.4,0) -- (2.4,0) node [black,midway,yshift=-.5cm]\r{abc};\rNode Node is to add description to the graph.\nDraw a node To write description, use \\node and put the coordinate after at.\n\\node at (0,0) {$\\alpha$};\r\\node at (1,1) {$\\beta$};\rShift location To shift the relative location of the nodes, we use \\node[location] where location can be below/left/right/above/below left.\n\\node[above] at (1,1) {$\\gamma$};\r\\node[below] at (1,1) {$\\gamma$};\r\\node[left] at (1,1) {$\\gamma$};\r\\node[right] at (1,1) {$\\gamma$};\rTo shift the relative location of the nodes, we use \\node[xshift=1cm, yshift=3cm]:\n\\node[xshift=3mm] at (1,1) {$\\gamma$};\r\\node[yshift=3mm] at (1,1) {$\\gamma$};\rCurves There are many ways to draw a curve:\nBending a straight line In and out Right angle bend Arc Smoothing coordinate Beizer Curve Bending straight line One way to do is to bend a straight line\n\\draw (0,0) to [bend right] (3,3);\r\\draw (1,1) to [bend left] (4,4)\rIn and out degree To more accurate control the bending, one way to do is to specify outgoing and incoming coordinates to bend a straight line\n\\draw (0,0) to [out =90, in =180] (4,4);\rRight angle bend Very often, we need a 90 degree bend to draw digram:\n\\draw (0,0) -| (3,3);\r\\draw (1,1) |- (4,4);\rArc Forth method is by drawing an arc.\n\\draw (1,0) arc (0:145:2cm);\rSmooth coordinate Fifth method is by smoothing over multiple coordinates:\n\\draw plot [smooth] coordinates {(0,0) (1,3) (3,2) (4,4)};\rBeizer curve Sixth method is by Beizer curve. It is very common in programming language.\n\\draw (0,0) .. controls (1,3) and (3,5) .. (4,4);\rBasic Shapes Circle To draw a circle, we specify the center and the radius.\n\\draw (0,0) circle [radius =0.6cm];\rIf we fill the circle with color, then we have dots:\n\\draw[fill] (0,0) circle [radius =0.06];\rEllipse \\draw (0,0) ellipse (2 and 1);\rRectange \\draw (0,0) rectangle (4,4);\rGrid \\draw[step=1,gray,very thin] (0,0) grid (4,4);\rFill To emphasize the area, we often use color and pattern. Color is good for electronic version and pattern is good for printed version.\nFill Color \\draw[fill=red] (0,0) rectangle (2,2);\r\\draw[fill=blue] (2,2) rectangle (4,4);\rTo change opacity, use the option fill opacity.\n\\draw[fill=red, fill opacity=0.2] (0,0) rectangle (2,2);\r\\draw[fill=blue, fill opacity=0.2] (2,2) rectangle (4,4);\rFill pattern To fill pattern, we need to use a library. To do so we need \\usetikzlibrary{patterns}\n\\usetikzlibrary{patterns}\r\\draw[pattern=horizontal lines] (0,0) rectangle (1,1);\r\\draw[pattern=vertical lines] (1,1) rectangle (2,2);\r\\draw[pattern=north east lines] (2,2) rectangle (3,3);\r\\draw[pattern=north west lines] (3,3) rectangle (4,4);\r\\draw[pattern=grid] (4,4) rectangle (5,5);\r\\draw[pattern=crosshatch] (5,5) rectangle (6,6);\r\\draw[pattern=dots] (6,6) rectangle (7,7);\r","date":1556899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556899200,"objectID":"529884721786dc45992414f5a7615721","permalink":"/programming/tikz/basictikz/","publishdate":"2019-05-04T00:00:00+08:00","relpermalink":"/programming/tikz/basictikz/","section":"programming","summary":"Learning Objectives:\nBasic TikZ technique to draw:\nStraight Line Node Curve Shape Fill Setup Loading Package To load the TikZ package, we just need to use the function \\usepackage{tikz}\n\\documentclass{article}\r\\usepackage{tikz}\r\\begin{document}\r.","tags":null,"title":"Basic TikZ","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nWhat is VBA? Why VBA? Hello World What is function? What is subroutine? How to define variable? VBA Objects Record Macro What is VBA? Why VBA? VBA stands for Visual Basic Application. It shares the same syntax as Basic language. Every operation you can perform in Excel using keyboard and mouse can be represented by VBA code. Hence, it allows a lot of flexibility and functionality when using Excel.\nVBA improves your logical thinking skills, and prepares you for other programming languages, since it is quite basic and the thinking processes can be applied to other languages (such as R in the next chapter). It is ideal for repetitive tasks (e.g. code a function that will run the same process each time, instead of typing it out manually)\nVBA Basics Visual Basic Editor First, we need to open Visual Basic Editor (VBE). There are two ways to open VBE: (1) Press ALT+F11 to open the Visual Basic Editor and (2) File \u0026gt; Options \u0026gt; Customize Ribbon \u0026gt; Developer(check the box) Developer Tab \u0026gt; Visual Basic\nIn the toolbar, select Insert \\textgreater Module. Make sure you insert the module into the workbook that you are working on.\nModule is the place where you store the code. You can have as many modules as you want. You can put your code into different modules according to the functions they perform.\nHello World We will use MsgBox function in VBA to create a popup window in Excel to say hello world.\nSub HelloWorld()\rMsgBox (\u0026quot;Hello World! I like VBA!\u0026quot;)\rEnd Sub\rVariable Dim is used to define variables. The syntax looks like this:\nDim a As Integer\rDim b As Double\rVariable Range Integer From –32,768 to 32,767 Long From –2,147,483,648 to 2,147,486,647 Single From –3402823E38 to –1.401298E–45 or 1.401298E–45 to 3.402823E38 Double From –1.79769313486232E308 to –4.94065645841247E–324 or 1.79769313486232E308 to 4.94065645841247E–324 Boolean Either 1 or 0 String 1 to 65,400 characters Array An array is a group of variables Variant Anything The following example display the value of variable.\nSub DisplayVar()\rDim a as Integer\ra = 10\rMsgbox(\u0026quot;My variable has the value of \u0026quot; \u0026amp; a \u0026amp;\u0026quot;.\u0026quot;)\rEnd Sub\rOne useful function of MsgBox is to check if certain sections of your code are running properly.\nSubroutine and Function In terms of the code that you can program inside, a Function and a Sub are similar. The main difference is that a Sub performs a task, but returns no output, while a Function takes in input and returns output.\nOur Hello World is an example of Sub. The structure of sub is that it starts with Sub together with the name of the Sub, and it ends with End Sub. The code to run is in between.\nSub Name()\r---Task 1---\r---Task 2---\rEnd Sub\rInside a subroutine, we can call other subroutine. The following subroutine calls HelloWorld subroutine twice.\nSub CallAnotherSub()\rCall HelloWorld\rCall HelloWorld\rEnd Sub\rThe syntax for a function is similar. The structure of function is that it starts with Function together with the name of the Sub, and it ends with End Function. The code to run is in between.\nHowever, two key differences: (1) we have to enter the variable to be processed and its variable type, and (2) we have to tell what is the output of the function.\nFunction Name( Variable As Variable Type)\r---Content here---\rName = .....\rEnd Function\rLet us create a simple function that calculate length hypotenuse of a right-angle triangle. To calculate the length hypotenuse, we need to have lengths of the sides. Hence, since sides are number, we use double. Since the formula is square root of sum of squared length of the sides, we will use ^ as power and Sqr as square root function.\nFunction Hypotenuse(a As Double, b As Double)\rHypotenuse = Sqr(a ^ 2 + b ^ 2)\rEnd Function\rGo to spreadsheet then type =Hypotenus(3,4) into formula of any cell. You should get 5.\nWe can also call function inside a subroutine. The following subroutine calls the hypotenus function.\nSub MsgFunction()\rMsgbox(\u0026quot;Secret is \u0026quot; \u0026amp; ABC(3,4))\rEnd Sub\rRecall the spreadsheet example of calculation of EMA. S\nA B C 1 n 5 2 beta =2/(A1+1) 3 Date Price EMA(n) 4 02-May-16 10 \u0026hellip; 8 06-May-16 8 =AVERAGE(B4:B8) 9 07-May-16 =$B$2*B9+(1-$B$2)*C8 Function EMA(EMAYes As Double, price As Double, n As Integer)\rbeta = 2 / (n + 1)\rEMA = beta * price + (1 - beta) * EMAYes\rEnd Function\rWe can simplify our spreadsheet using the VBA code as shown below.\nA B C 1 n 5 2 beta =2/(A1+1) 3 Date Price EMA(n) 4 02-May-16 10 \u0026hellip; 8 06-May-16 8 =AVERAGE(B4:B8) 9 07-May-16 =EMA(C7,B8,$B$1) Objects Objects are special type of variables. In particular, they represent elements of Excel. Common used objects include\ncell, range, workbook, worksheet, active objects, application and chart. To use object, we can use either method or property. Method is an action: activate, select, delete, value, formula, text, clear, copy, paste.\nProperty is description: name, visible Using a metaphor: If object is noun, method is verb and property is adjective\nCollections is an object that contain a group of the same object. For example, Worksheets contains all worksheet objects, and Workbooks contains all workbook objects. To call a particular worksheet, we would call the name of the particular sheet in Worksheets.\nCells Cells refers to one cell in a range but it is using coordinate instead of R1C1 as cell reference. The syntax is Cells(row, column).\nFor example, the following sets the second row in the range C2:C5 to value of 3. In the other words, C3 is set to 3.\nSub RangeAndCell()\rRange(\u0026quot;C2:C5\u0026quot;).Cells(2, 1).Value = 3\rEnd Sub\rIf the worksheet name is not explicitly stated, it is assumed that the code works on the active sheet.\nSub WorkingOnCell()\rCells(1,1).value = 5\rEnd Sub\rOffset refers to another cell, taking reference from the current active cell.\nSub CellOffSet()\rCells(1,1) = 5\rCells(1,1).Offset(0,1).Formula = \u0026quot;=A1+1\u0026quot;\rCells(1,1).Offset(1,0).Formula = \u0026quot;=A1+2\u0026quot;\rEnd Sub\rThen cell A1 is 5, cell B1 is 6 and cell A2 is 7\nRange Range is a collection of cells.\nSub SheetAndRange()\rWorksheets(\u0026quot;sheet1\u0026quot;).Range(\u0026quot;A1\u0026quot;).Value = 3\rEnd Sub\rThis causes the worksheet named sheet1 to have the value 3 in cell A1. If the worksheet name is not explicitly stated, it is assumed that the code works on the active sheet.\nThe following code shows the formula, value, text property of range.\nSub WorkingOnRange()\rRange(\u0026quot;A1\u0026quot;).Formula = \u0026quot;=RAND()\u0026quot;\rRange(\u0026quot;B1:E3\u0026quot;).Value = 6\rRange(\u0026quot;A1\u0026quot;).Text=\u0026quot;3+4\u0026quot;\rEnd Sub\rThe following code shows how to do copy, paste and paste special (value).\nSub CopyAndPaste()\rRange(\u0026quot;A1:B5\u0026quot;).Formula = \u0026quot;=RAND()\u0026quot;\rRange(\u0026quot;C1\u0026quot;).Formula = \u0026quot;=A1+B1\u0026quot;\rRange(\u0026quot;C1\u0026quot;).Copy Range(\u0026quot;C2:C5\u0026quot;).PasteSpecial\rEnd Sub\rThe following code shows how to obtain input from the spreadsheet.\nSub GetFromSheet ()\rDim a as Integer\rRange(\u0026quot;A1\u0026quot;).Formula =\u0026quot;=RANDBETWEEN(1,6)\u0026quot;\ra = Range(\u0026quot;A1\u0026quot;).Value\rMsgbox(a)\rEnd Sub\rWorksheets Worksheets are what we use in Excel, we can create multiple sheets and give them unique names etc. We can also add new sheets or delete sheets in our VBA code.\nSub AddSheet()\rWorkSheets.Add\rWorkSheets(ActiveSheet.Name).Name = \u0026quot;MySheet\u0026quot;\rEnd Sub\rSub DelSheet()\rApplication.DisplayAlerts = False\rWorkSheets(\u0026quot;MySheet\u0026quot;).Delete\rApplication.DisplayAlerts = True\rEnd Sub\rWe can also activate, rename or hide/unhide worksheets:\nWorksheets(\u0026quot;sheet1\u0026quot;).Activate\rWorksheets(\u0026quot;sheet1\u0026quot;).Delete\rWorksheets(\u0026quot;sheet2\u0026quot;).Select\rWorksheets(\u0026quot;sheet1\u0026quot;).Name=\u0026quot;Me\u0026quot;\rWorksheets(\u0026quot;sheet3\u0026quot;).Visible=False\rWorksheets.Add\rWorkbook Workbook object is essentially one excel file.\nSub WorkBookActiveName()\rWorkbooks(\u0026quot;book1\u0026quot;).Activate\rMsgBox (Workbooks(\u0026quot;book1\u0026quot;).ActiveSheet.Name)\rEnd Sub\rApplication The following four lines show how to select using application objects. The first line chooses cell A1 in the active 2. The second line chooses the second column (of the active worksheet). The third line chooses the first row (of the active worksheet). The forth line chooses the worksheet with name sheet1.\nApplication.ActiveSheet.Cells(1,1).Select\rApplication.Columns(2).Select\rApplication.Rows(1).Select\rApplication.Sheets(\u0026quot;sheet1\u0026quot;).Select\rThe following shows some actions in spreadsheet. The first line asks the program to redo all calculation for the spreadsheet. The second line perform redo.\nApplication.Calculate\rApplication.Undo\rWorksheet functions are application objects. They can be used directly. For example, the following three lines of code corresponds to calling COUNT, SUM and AVERAGE functions from the spreadsheet.\nApplication.WorksheetFunction.Count\rApplication.WorksheetFunction.Sum\rApplication.WorksheetFunction.Average\rNote that Application. can be omitted. The following function SumAvg that calculates sum of two averages of two input ranges.\nFunction SumAvg(X as Range, Y as Range)\rDim xavg As Double\rDim yavg As Double\rxavg = WorksheetFunction.Average(X)\ryavg = WorksheetFunction.Average(Y)\rSumAvg = xavg + yavg\rEnd Function\rActive Objects ActiveCell refers to the currently selected cell in your Excel workbook. From there, you can add or delete data from the cell. For example,\nSub WorkingActiveCell()\rActiveCell.Delete\rActiveCell.Value = 11\rActiveCell.text = \u0026quot;Helloworld\u0026quot;\rEnd Sub\rThe final value in the ActiveCell will be Helloworld. This is because you first deleted whatever was in the cell, then put the value 11 into the cell. After which, you overrode the previous value and put in the word Helloworld into the active cell.\nThe following shows how to display property of active objects. The first line display a message box that tells the address of the active cell, the second one tells the name of active worksheet, and the second line tells the name of the active workbook (the current file name).\nMsgBox (ActiveCell.Address)\rMsgBox (ActiveSheet.Name)\rMsgBox (ActiveWorkbook.Name)\rWith Using a With statement allows you to code more efficiently, especially if you have to keep referring to the same object. The following example shows different properties are set for the cells(1,1).\nSub WithExample()\rWith Cells(1, 1)\r.Value = 4\r.Interior.Color = RGB(255, 255, 0)\r.Font.Color = RGB(0, 255, 0)\rEnd With\rEnd Sub\rThe code within the With and End With part is applied to the specified cell, which in this case is Cells(1,1).\nCharting For charting in Excel, there are two methods:\nchart sheet and embedded chart. Chart Sheet Chart sheet is a worksheet that only has chart. It is an object in a workbook.\nTo create a new chart sheet, we use the command Charts.Add. Note that this is similar to adding new worksheet command Worksheets.Add.\nThen we need to define data source using .SetSourceData Source:=.\nFinally, we need to tell what kind of chart is plotting .ChartType =. For example, line chart is xlLine\nSub NewLineChartSheet()\rDim ChartSheet As Chart\rDim Data As Range\rSet ChartSheet = Charts.Add\rSet Data = Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;A1:B3\u0026quot;)\rWith ChartSheet\r.SetSourceData Source:=Data\r.ChartType = xlLine\rEnd With\rEnd Sub\rIt is useful to define a chart with name so that we can refer later.\nSub NewNamedChartSheet()\rDim ChartSheet As Chart\rDim Data As Range\rSet ChartSheet = Charts.Add\rSet Data = Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;A1:B30\u0026quot;)\rWith ChartSheet\r.SetSourceData Source:=Data\r.ChartType = xlLine\r.Name = \u0026quot;mychart\u0026quot;\rEnd With\rEnd Sub\rThe following code changes a property of an existing chartsheet. The following code changes the chart by including additional data.\nSub ChangeChartSheet()\rDim ChartSheet As Chart\rDim Data As Range\rSet ChartSheet = Charts(\u0026quot;mychart\u0026quot;)\rSet Data = Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;A1:B50\u0026quot;)\rWith ChartSheet\r.SetSourceData Source:=Data\rEnd With\rEnd Sub\rEmbedded Chart For the chart to be included in a worksheet, we use ChartObjects.Add instead.\nWe need to tell which worksheet to place the diagram and the distance from the top and left of spreadsheet as well as width and height\nSub EmbeddedChart()\rDim mychart As Object\rDim Data As Range\rSet mychart = Sheets(\u0026quot;Sheet1\u0026quot;).ChartObjects.Add(Left:=300, Width:=300, Top:=10, Height:=300)\rSet Data = Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;A1:B3\u0026quot;)\rWith mychart.Chart\r.ChartType = xlLine\r.SetSourceData Source:=Data\rEnd With\rEnd Sub\rWe can give name to the object but not the chart.\nSub EmbeddedNameChart()\rDim mychart As Object\rDim Data As Range\rSet mychart = Sheets(\u0026quot;Sheet1\u0026quot;).ChartObjects.Add(Left:=300, Width:=300, Top:=10, Height:=300)\rSheets(\u0026quot;Sheet1\u0026quot;).ChartObjects(1).Name = \u0026quot;mychart\u0026quot;\rSet Data = Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;A1:B3\u0026quot;)\rWith mychart.Chart\r.ChartType = xlLine\r.SetSourceData Source:=Data\rEnd With\rEnd Sub\rThe following code changes a property of an existing embedded chart. The following code changes the chart by including additional data.\nSub ChangeEmbeddedChart()\rDim ChartObj As Object\rSet ChartObj = Sheets(\u0026quot;Sheet1\u0026quot;).ChartObjects(\u0026quot;Hello\u0026quot;)\rWith ChartObj.Chart\r.SetSourceData Source:=Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;A1:D3\u0026quot;)\rEnd With\rEnd Sub\rChart Type Besides line chart, there are many different types of chart. Here are the common types.\nFunction Chart Type xlLine line chart xlColumnClustered Clustered Column (vertical bar chart) xlBarClustered Clustered bar (horizontal bar chart) xlPie Pie xlArea Area chart (line chart but colored area) xlXYScatter Scatter xlRadar Radar xlStockHLC High-Low-Close xlStockOHLC Open-High-Low-Close (Candle Stick) xlStockVHLC Volume-High-Low-Close xlStockVOHLC Volume-Open-High-Low-Close Data Series To allow for multiple graphics to be plotted, we need to use seriescollection.\nFirst, to add a new data, we need to say .SeriesCollection.NewSeries. Then, we can define the name, XValues (x) and Values (y).\nSub NewChartSheetMultiple()\rDim ChartSheet As Chart\rDim Time, Data1, Data2 As Range\rSet ChartSheet = Charts.Add\rSet Time = Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;A1:A5\u0026quot;)\rSet Data1 = Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;B1:B5\u0026quot;)\rSet Data2 = Sheets(\u0026quot;Sheet1\u0026quot;).Range(\u0026quot;C1:C5\u0026quot;)\rWith ChartSheet\r.ChartType = xlLine\r.SeriesCollection.NewSeries\r.SeriesCollection(1).Name = \u0026quot;Stock 1\u0026quot;\r.SeriesCollection(1).XValues = Time\r.SeriesCollection(1).Values = Data1\r.SeriesCollection.NewSeries\r.SeriesCollection(2).Name = \u0026quot;Stock 2\u0026quot;\r.SeriesCollection(2).XValues = Time\r.SeriesCollection(2).Values = Data2\rEnd With\rEnd Sub\rRecord Macro Lastly, to see how to code certain actions in Excel, VBA has this useful function called Record Macro. To access it, in the Developer Tab, press the Record Macro button.\nWhatever you do in Excel from then on will be recorded in a macro, which you can later access. To stop recording, click the button again, which should now say Stop Recording. Click on the Visual Basic button (access to VBE) to see your recorded actions in code. This is useful if you know what you want to code, and how to do it in Excel, but you do not know how to code it in VBA.\nMacro-enable File Note that when you save your Excel file, always save it in xlsm format (macro enabled worksheet format), otherwise you will not be able to run your macros when you open the file next time!\n","date":1556899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556899200,"objectID":"42ea2e8c138277dca3d9c44f81dd07bf","permalink":"/programming/vba/basic-vba/","publishdate":"2019-05-04T00:00:00+08:00","relpermalink":"/programming/vba/basic-vba/","section":"programming","summary":"Learning Objectives:\nWhat is VBA? Why VBA? Hello World What is function? What is subroutine? How to define variable? VBA Objects Record Macro What is VBA? Why VBA? VBA stands for Visual Basic Application.","tags":null,"title":"Basic VBA","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nIntermediate techniques of TikZ:\nTree Grouping Plotting Calculate Coordinates For loop Tree General Tree \\begin{tikzpicture}\r\\node(0){a}\rchild{node{b}}\rchild{node{c}\rchild{node{d}}\rchild{node{e}}\r};\r\\end{tikzpicture}\rGame Tree Since nodes in game trees are often defined by dots, we need to specify them.\n\\begin{tikzpicture}\r\\tikzstyle{hollow node}=[circle,draw,inner sep=1.5]\r\\tikzstyle{solid node}=[circle,draw,inner sep=1.5,fill=black]\r\\node[hollow node]{}\rchild{node[solid node]{}}\rchild{node[solid node]{}}\rchild{node[solid node]{}}\r;\r\\end{tikzpicture}\rGrouping We can apply decoration to multiple lines.\nScope Using scope is to allow decorations to be applied to multiple lines.\n\\begin{tikzpicture}\r\\begin{scope} [red, thick]\r\\draw (0,0)--(3,3);\r\\draw (0,3)--(3,0);\r\\end{scope}\r\\end{tikzpicture}\rStyle Using style is to allow decorations to be applied with flexibility:\n\\begin{tikzpicture}[marked/.style = {red, very thick}]\r\\draw[marked] (0,0)--(3,3);\r\\draw[marked] (0,3)--(3,0);\r\\end{tikzpicture}\rtikzset Using style is to allow decorations to be applied to multiple figures.\n\\tikzset[marked/.style = {red, very thick}]\r\\tikzset[trivial/.style = {blue, thin}]\r\\begin{tikzpicture}\r\\draw[marked] (0,0)--(3,3);\r\\draw[trivial] (0,3)--(3,0);\r\\end{tikzpicture}\rPlotting Mathematical Expression \\begin{tikzpicture}\r\\draw[blue,\u0026lt;-\u0026gt;] (4,0) -| (0,4); \\draw[red, domain=0:2] plot (\\x,\\x*\\x);\r\\end{tikzpicture}\rData plot For data plot, we need to load the package \\usepackage{pgfplots}.\n\\usepackage{tikz}\r\\usepackage{pgfplots}\r\\begin{tikzpicture}\r\\begin{axis}[xlabel=x,ylabel=y]\r\\addplot coordinates {(1,1) (2,0) (3,3) (4,2)};\r\\end{axis}\rScale Zoom out We can use scale=0.5 to make the zoom out.\n\\begin{tikzpicture}[scale=0.5]\r\\draw (0,0)--(1,1);\r\\draw (0,1)--(1,0);\r\\end{tikzpicture}\rZoom in We can use scale=2 to make the zoom in.\n\\begin{tikzpicture}[scale=2]\r\\draw (0,0)--(1,1);\r\\draw (0,1)--(1,0);\r\\end{tikzpicture}\rFind coordinates Grid One of the main difficulties in using TikZ to draw diagram is to find the appropriate coordinates. One way to see where is should put the coordinate is by using grid\n\\begin{tikzpicture}\r\\draw[step=1,gray,very thin] (0,0) grid (4,4);\r\\end{tikzpicture}\rRelative to two points To calculate new coordinates based on $(a,b)$ and $(c,d)$, we can use |- and -|. We have $(a,d)$ if we have (a,b|-c,d) and $(c,b)$ if we have (a,b-|c,d)\n\\begin{tikzpicture}\r\\node[circle, fill=red] at (1,1) {};\r\\node[circle, fill=blue] at (3,3){};\r\\node[circle, fill=green] at (1,1|- 3,3){};\r\\node[circle, fill=purple] at (1,1-| 3,3){};\r\\end{tikzpicture}\rAverage of two points To calculate mid point of based on $(a,b)$ and $(c,d)$, we can use ($(a,b)!0.5!(c,d)$).\n\\begin{tikzpicture}\r\\node[circle, fill=red] at (1,1) {};\r\\node[circle, fill=blue] at (3,3){};\r\\node[circle, fill=green] at ($(1,1)!0.5!(3,3)$){};\r\\node[circle, fill=purple] at ($(1,1)!0.25!(3,3)$){};\r\\end{tikzpicture}\rIntersection of two named paths To calculate in intersections, we need to use \\usetikzlibrary{intersections}.\n\\usetikzlibrary{intersections}\r\\begin{tikzpicture}\r\\draw[name path=Demand] (0,3) -- (3,0);\r\\draw[name path=Supply] (0,0) -- (3,3);\r\\path [name intersections={of=Demand and Supply,by=E}];\r\\fill [red] (E) circle (2pt);\r\\end{tikzpicture}\rMultiple intersections of two named paths \\usepackage{tikz}\r\\usetikzlibrary{intersections}\r\\begin{tikzpicture}\r\\draw[name path=circle] (0,0) circle (2);\r\\draw[name path=line] (-3,-3) -- (3,3);\r\\fill [red, name intersections={of = circle and line}] (intersection-1) circle (4pt);\r\\fill [blue, name intersections={of =circle and line}] (intersection-2) circle (4pt);\r\\end{tikzpicture}\rExample: Demand and Supply We illustrate how to draw demand and supply curve using the techniques presented above:\n\\usepackage{tikz}\r\\usetikzlibrary{calc,intersections}\r\\begin{tikzpicture}[scale=0.8]\r\\draw [thick](0,6) node [left] {P} |- (6,0) node [below] {Q};\r\\draw[thick,blue!90, name path =Supply](1,1)--(5,5) node[right]{Supply};\r\\draw[thick,blue!90, name path=Demand](1,5)--(5,1) node[right]{Demand};\r\\path [name intersections={of=Demand and Supply,by=E}];\r\\draw[dashed] (E -| 0,0) node[left]{$P^*$}--(E)--(E |- 0,0) node[below]{$Q^*$};\r\\draw[black,fill] (E) circle [radius=0.15];\r\\end{tikzpicture}\rProgramming For Loop The syntax to write a for loop is \\foreach and variable would be \\x.\n\\draw (0,0)--(6,0);\r\\foreach \\x in {0,...,6}{\r\\draw (\\x,-1)--(\\x,1);\r}\r","date":1556899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556899200,"objectID":"42af797fd92f51321dfce0e6434a85af","permalink":"/programming/tikz/intermediate-tikz/","publishdate":"2019-05-04T00:00:00+08:00","relpermalink":"/programming/tikz/intermediate-tikz/","section":"programming","summary":"Learning Objectives:\nIntermediate techniques of TikZ:\nTree Grouping Plotting Calculate Coordinates For loop Tree General Tree \\begin{tikzpicture}\r\\node(0){a}\rchild{node{b}}\rchild{node{c}\rchild{node{d}}\rchild{node{e}}\r};\r\\end{tikzpicture}\rGame Tree Since nodes in game trees are often defined by dots, we need to specify them.","tags":null,"title":"Intermediate TikZ","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nWhat is LaTeX? Why LaTeX? Installation of LaTeX Hello world Basic setup of TikZ Demand and Supply Diagram What is LaTeX? Why LaTeX? LaTeX is a markup language to write documents. In a common word processor, we have what you see is what you get (WYSIWYG). Howver, in LaTeX, What you see is what you mean (WYSIWYM). This manes that\nNo need to bother with formatting, LaTeX will do it for you Easy to include math/graphics/tables Therefore, it becomes a standard for academic publishing.\nInstallation of LaTeX Which software to install depends on your operation system:\nIf you use windows system, you need to install MikTeX. If you use mac system, you need to install MacTeX. Windows For Windows, go to MikTeX. You will then see the following at the top of the page.\nClicking the download button will then bring you to this page.\nDownload MiKTeX, then install and open TexWork. You are then ready to use LaTeX on your Windows computer.\nMac For Mac users, head to MacTeX. Click on the download MacTex button, as shown below.\nLaTeX Hello World Since we are producing a document, we start to tell the program so by using the command \\documentclass{article}. Then we need to tell which section should be included in the output file by using \\begin{document} and \\end{document}.\nFinally, type the words “Hello World!” between the \\begin{document} and \\end{document}. Whatever text, pictures, or tables is included in between the 2 commands will appear on the document itself, and you can see this on the right-hand side.\n\\documentclass{article}\r\\begin{document}\rHello World!\r\\end{document}\rIf you compile the file, you should get the following pdf output:\n","date":1556899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556899200,"objectID":"43132cc381ac1ce67db642c7e347e337","permalink":"/programming/latex/introduction/","publishdate":"2019-05-04T00:00:00+08:00","relpermalink":"/programming/latex/introduction/","section":"programming","summary":"Learning Objectives:\nWhat is LaTeX? Why LaTeX? Installation of LaTeX Hello world Basic setup of TikZ Demand and Supply Diagram What is LaTeX? Why LaTeX? LaTeX is a markup language to write documents.","tags":null,"title":"Introduction to LaTeX","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nWhat is TikZ? Basic setup of TikZ Demand and Supply Diagram What is TikZ? TikZ is the package in LaTeX that allows drawing of nice diagram. See the following exmaple:\nDemand and Supply How to generate this graphic? By the following code:\n\\begin{tikzpicture}[scale=0.6]\r\\draw [thick,\u0026lt;-\u0026gt;] (0,10) node[above]{$P$}--(0,0)--(10,0) node[right]{$Q$};\r\\node [below left] at (0,0) {$0$};\r\\node [below] at (5,0) {$Q^*$};\r\\node [left] at (0,5) {$P^*$};\r\\draw (1,1)--(9,9) node[right]{$S$};\r\\draw (1,9)--(9,1) node[right]{$D$};\r\\draw[dashed] (0,5)--(5,5)--(5,0);\r\\end{tikzpicture}\rLoading tikZ Package To load the TikZ package, we just need to use the function \\usepackage{tikz}\n\\documentclass{article}\r\\usepacakage{tikz}\r\\begin{document}\rHello World!\r\\end{document}\rThen start the drawing environment that begins with \\begin{tikzpicture} and ends with \\end{tikzpicture}.\n\\documentclass{article}\r\\usepacakage{tikz}\r\\begin{document}\r\\begin{tikzpicture}\r...TikZ codes to put here...\r\\end{tikzpicture}\r\\end{document}\rTo draw a straight line, use \\draw, and specify the coordinates. Remember ending the each line of code by semicolon.\n\\documentclass{article}\r\\usepacakage{tikz}\r\\begin{document}\r\\begin{tikzpicture}\r\\draw(0,0)--(6,6);\r\\end{tikzpicture}\r\\end{document}\rTo add description, we use \\node and specifiy the coodinates after at.\n\\documentclass{article}\r\\usepacakage{tikz}\r\\begin{document}\r\\begin{tikzpicture}\r\\draw(0,0)--(6,6);\r\\node at (2,5) {Hello, this is $\\alpha$};\r\\end{tikzpicture}\r\\end{document}\rThen we can draw the demand and supply diagram above:\n\\documentclass{article}\r\\usepacakage{tikz}\r\\begin{document}\r\\begin{tikzpicture}\r\\draw [thick,\u0026lt;-\u0026gt;] (0,10) --(0,0)--(10,0);\r\\node [above] at (0,10) {$P$};\r\\node [right] at (10,0) {$Q$};\r\\node [below left] at (0,0) {$0$};\r\\draw (1,1)--(9,9);\r\\node [right] at (9,9) {$S$}\r\\draw (1,9)--(9,1);\r\\node [right] at (9,9) {$D$};\r\\draw [dashed] (0,5)--(5,5)--(5,0);\r\\node [below] at (5,0) {$Q^*$};\r\\node [left] at (0,5) {$P^*$};\r\\end{tikzpicture}\r\\end{document}\rAbove we have used some decoration of the lines.\nLine pattern: For dashed line, use \\draw[dashed]. Arrows: For arrows at the tips, use \\draw[\u0026lt;-\u0026gt;]. Thickness: For thicker line, use \\draw[thick]. To shift the location of the nodes, we use \\node[location] where location can be below/left/right/above/below left.\n","date":1556899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1556899200,"objectID":"2fafa843491214cb6811381d4467d62e","permalink":"/programming/tikz/introduction/","publishdate":"2019-05-04T00:00:00+08:00","relpermalink":"/programming/tikz/introduction/","section":"programming","summary":"Learning Objectives:\nWhat is TikZ? Basic setup of TikZ Demand and Supply Diagram What is TikZ? TikZ is the package in LaTeX that allows drawing of nice diagram. See the following exmaple:","tags":null,"title":"Introduction to TikZ","type":"docs"},{"authors":null,"categories":null,"content":"2013 # Date Speaker Affiliation Title 1 Oct 10 Chiu Yu Ko Economics, NUS Patent Competition with Licensing 2 Oct 25 Xuyuan Liu Economics, NUS Delegation Contract in Crowdsourcing Contest 3 Nov 1 Liu Bin Economics, NUS Optimal Contest Design using Rank Information of effort 4 Nov 8 Yang Nan Marketing, NUS Online Sellers\u0026rsquo; Information Agglomeration 5 Nov 22 Julian Wright Economics, NUS Adverse Inter mediation 6 Nov 29 Shen Bo Economics, NUS Exclusive Dealing 7 Dec 6 Lin Mei Information Systems, SMU Platform Regulation on Sellers\u0026rsquo; Heterogeneity 8 Dec 13 Alex White Economics and Management, Tsinghua Insulating Equilibrium ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"6d6e050e32c3254465dd085b33f527c7","permalink":"/others/seminar/2013/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/seminar/2013/","section":"others","summary":"2013 # Date Speaker Affiliation Title 1 Oct 10 Chiu Yu Ko Economics, NUS Patent Competition with Licensing 2 Oct 25 Xuyuan Liu Economics, NUS Delegation Contract in Crowdsourcing Contest 3 Nov 1 Liu Bin Economics, NUS Optimal Contest Design using Rank Information of effort 4 Nov 8 Yang Nan Marketing, NUS Online Sellers\u0026rsquo; Information Agglomeration 5 Nov 22 Julian Wright Economics, NUS Adverse Inter mediation 6 Nov 29 Shen Bo Economics, NUS Exclusive Dealing 7 Dec 6 Lin Mei Information Systems, SMU Platform Regulation on Sellers\u0026rsquo; Heterogeneity 8 Dec 13 Alex White Economics and Management, Tsinghua Insulating Equilibrium ","tags":null,"title":"2013","type":"docs"},{"authors":null,"categories":null,"content":"2014 # Date Speaker Affiliation Title 9 Jan 20 Tuan-Hwee Sng Economics, NUS Unified Europe and Divided China 10 Mar 3 Richard T.B. Ma Computing, NUS Net Neturality? 11 Mar 31 Ngoc Han Huynh Khanh Economics, NUS Global Public Good and Hegemonic Structure 12 Apr 2 Jie Gong Business School, NUS Reputation, Compliance and Outsourcing 13 May 8 Ding Rong Economics, NUS Patent Competition with Licensing 14 Jun 3 Fu Qiang Business School, NUS Team Contest with Multiple Pairwise Battles and Applications 15 Aug 1 Indranil Chakraborty Economics, NUS Screening and Inefficiency in Auctions with Risk Averse Bidders 16 Dec 10 Che Jiahua Economics, CUHK Dynamic non-rivalry and Limits to Private Ownership 17 Dec 18 Eric Yan Economics, Academic Sincia Beyond Productivity: An Institutional Perspective on the Population Expansion in Chinese History 18 Dec 23 Eric Yan Economics, Academic Sincia How to Prevent Catastrophe: Economic Perspectives on Technological Development at the Environmental Tipping Point ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"e69e5ddaba8517d4abd221bc2a80ccb0","permalink":"/others/seminar/2014/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/seminar/2014/","section":"others","summary":"2014 # Date Speaker Affiliation Title 9 Jan 20 Tuan-Hwee Sng Economics, NUS Unified Europe and Divided China 10 Mar 3 Richard T.B. Ma Computing, NUS Net Neturality? 11 Mar 31 Ngoc Han Huynh Khanh Economics, NUS Global Public Good and Hegemonic Structure 12 Apr 2 Jie Gong Business School, NUS Reputation, Compliance and Outsourcing 13 May 8 Ding Rong Economics, NUS Patent Competition with Licensing 14 Jun 3 Fu Qiang Business School, NUS Team Contest with Multiple Pairwise Battles and Applications 15 Aug 1 Indranil Chakraborty Economics, NUS Screening and Inefficiency in Auctions with Risk Averse Bidders 16 Dec 10 Che Jiahua Economics, CUHK Dynamic non-rivalry and Limits to Private Ownership 17 Dec 18 Eric Yan Economics, Academic Sincia Beyond Productivity: An Institutional Perspective on the Population Expansion in Chinese History 18 Dec 23 Eric Yan Economics, Academic Sincia How to Prevent Catastrophe: Economic Perspectives on Technological Development at the Environmental Tipping Point ","tags":null,"title":"2014","type":"docs"},{"authors":null,"categories":null,"content":"2015 # Date Speaker Affiliation Title 19 Jan 16 Ruben Juarez Economics, U of Hawaii Cost-Sharing Allocation Mechanism: Incentive Compatibility vs Efficiency: Part 1 20 Jan 30 Ruben Juarez Economics, U of Hawaii Cost-Sharing Allocation Mechanism: Incentive Compatibility vs Efficiency: Part 2 21 Feb 6 Au Pak Hung Economics, NTU Pay to Quit and Team Incentives 22 Apr 24 Gao Yuetao Marketing, NUS On the Use of Overt Anti-Counterfeiting Technologies 23 May 11 Andrei Hagiu Business School, Harvard Enabling versus Employing 24 May 26 Julian Wright Economics, NUS Search platforms: Showrooming and price coherence 25 Jul 31 Eric Yan Economics, Academic Sincia Political Economy and Sustainable Development of a Resource-based Economy 26 Aug 21 Yat Fung Wong Economics, SUFE Referral Alliance and Consumer Search 27 Sep 4 Luisa Herbst Public Economics, Max Planck Institute Who pays to win again? 28 Sep 25 Xuyao Zhang Economics, NUS Reverse Licensing 29 Oct 9 Ko Chiu Yu Economics, NUS Dictate a Dictator, Succeed a Successor 30 Oct 16 Liu Bin Economics, NUS The Optimal Allocation of Prizes in Contests with Costly Entry 31 Nov 6 Jens Hougaard Food and Resource Economics, U. of Copenhagen Sharing the cost of risky projects 32 Nov 13 Robert Hammond Economics, North Carolina State U The Secure Boston Mechanism: Theory and Experiments 33 Nov 20 Inancio Bo WZB Berlin Social Science Center Fair Implementation of Diversity in School Choice 34 Dec 4 Simon Loertscher Economics, University of Melbourne Double-Clock Auctions and Two-Sided VCG with Endogenous Reserve Prices ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"f348a720f5e10cd97bdd41bf382781cd","permalink":"/others/seminar/2015/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/seminar/2015/","section":"others","summary":"2015 # Date Speaker Affiliation Title 19 Jan 16 Ruben Juarez Economics, U of Hawaii Cost-Sharing Allocation Mechanism: Incentive Compatibility vs Efficiency: Part 1 20 Jan 30 Ruben Juarez Economics, U of Hawaii Cost-Sharing Allocation Mechanism: Incentive Compatibility vs Efficiency: Part 2 21 Feb 6 Au Pak Hung Economics, NTU Pay to Quit and Team Incentives 22 Apr 24 Gao Yuetao Marketing, NUS On the Use of Overt Anti-Counterfeiting Technologies 23 May 11 Andrei Hagiu Business School, Harvard Enabling versus Employing 24 May 26 Julian Wright Economics, NUS Search platforms: Showrooming and price coherence 25 Jul 31 Eric Yan Economics, Academic Sincia Political Economy and Sustainable Development of a Resource-based Economy 26 Aug 21 Yat Fung Wong Economics, SUFE Referral Alliance and Consumer Search 27 Sep 4 Luisa Herbst Public Economics, Max Planck Institute Who pays to win again?","tags":null,"title":"2015","type":"docs"},{"authors":null,"categories":null,"content":"2016 # Date Speaker Affiliation Title 35 Feb 12 Stephen Poletti Economics, University of Auckland Welfare Implications of Consumers Switching to Real Time Pricing Plans with Imperfect Competition 36 Mar 4 Andrei Hagiu Harvard Business School Market Expansion in Duopoly 37 Apr 22 Paul Pezanis-Christou University of Adelaide Structural analysis of first-price auction data: Insights form the laboratory 38 May 27 Fuhai Hong Economics, NTU Identity in Public Good Games 39 Sep 2 Teck Yong Tan Economics, Columbia Firm Culture and Innovation: The Extrinsic Motivation of Freedom at Work 40 Sep 23 Fu Qiang Business School, NUS The Paradox of Mediocracy 41 Oct 14 Omer F. Baris Public Policy, Nazarbayev University Price Dispersion and Optimal Price Categories with Limited Memory Consumers 42 Oct 28 Brandon Yoder LKY Public Policy, NUS Modeling power shifts under incomplete information: relaxing standard bargaining assumptions 43 Nov 4 Hongru Tan Economics, Sichuan University Is Spence distortion a real issue in two-sided markets? 44 Nov 11 Julian Wright Economics, NUS Competition through commissions when firms can free ride on advice 45 Nov 18 Xuyao Zhang Economics, NUS When Corruption Improves Welfare? 46 Nov 18 Feng Xin Economics, NUS How to Split the Pie: Optimal Rewards in Dynamic Multi-Battle Competitions ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"f092057ec2f571e42c654b006c0a7715","permalink":"/others/seminar/2016/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/seminar/2016/","section":"others","summary":"2016 # Date Speaker Affiliation Title 35 Feb 12 Stephen Poletti Economics, University of Auckland Welfare Implications of Consumers Switching to Real Time Pricing Plans with Imperfect Competition 36 Mar 4 Andrei Hagiu Harvard Business School Market Expansion in Duopoly 37 Apr 22 Paul Pezanis-Christou University of Adelaide Structural analysis of first-price auction data: Insights form the laboratory 38 May 27 Fuhai Hong Economics, NTU Identity in Public Good Games 39 Sep 2 Teck Yong Tan Economics, Columbia Firm Culture and Innovation: The Extrinsic Motivation of Freedom at Work 40 Sep 23 Fu Qiang Business School, NUS The Paradox of Mediocracy 41 Oct 14 Omer F.","tags":null,"title":"2016","type":"docs"},{"authors":null,"categories":null,"content":"2017 # Date Speaker Affiliation Title 47 Jan 12 Arupratan Daripa Birkbeck College, University of London Eliciting ambiguous beliefs 48 Jan 20 Ye Ziqiu Economics, NUS Author Taste, Open Access and Journal Quality 49 Feb 10 Mei Lin Information System, SMU Managing Seller Heterogeneity in a Competitive Marketplace 50 Mar 3 Jens Hougaard Food and Resoures Economics, University of Copenhagen A welfare-economic interpretation of FRAND 51 Mar 17 Rabah Amir Economics, U of Iowa On oligopoly with positive network effects 52 Aug 21 Federico Etro Economics, University of Venice Ca\u0026rsquo; Foscari Monopolistic Competition, As You Like It 53 Sep 11 Lim Wei Shi Marketing, NUS E-platform’s efforts to combat counterfeits of luxury brand: Is the commitment credible 54 Sep 25 Ko Chiu Yu Economics, NUS Reformation, Counter-Reformation, and Discipline: From Good Works to Good People ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"b19424dfa5142abc147d94fe1600ef4f","permalink":"/others/seminar/2017/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/seminar/2017/","section":"others","summary":"2017 # Date Speaker Affiliation Title 47 Jan 12 Arupratan Daripa Birkbeck College, University of London Eliciting ambiguous beliefs 48 Jan 20 Ye Ziqiu Economics, NUS Author Taste, Open Access and Journal Quality 49 Feb 10 Mei Lin Information System, SMU Managing Seller Heterogeneity in a Competitive Marketplace 50 Mar 3 Jens Hougaard Food and Resoures Economics, University of Copenhagen A welfare-economic interpretation of FRAND 51 Mar 17 Rabah Amir Economics, U of Iowa On oligopoly with positive network effects 52 Aug 21 Federico Etro Economics, University of Venice Ca\u0026rsquo; Foscari Monopolistic Competition, As You Like It 53 Sep 11 Lim Wei Shi Marketing, NUS E-platform’s efforts to combat counterfeits of luxury brand: Is the commitment credible 54 Sep 25 Ko Chiu Yu Economics, NUS Reformation, Counter-Reformation, and Discipline: From Good Works to Good People ","tags":null,"title":"2017","type":"docs"},{"authors":null,"categories":null,"content":"2018 # Date Speaker Affiliation Title 55 Feb 5 Ziqiu Ye Economics, National University of Singapore Status Good Sellers’ Dilemma of Selling through online Marketplace Facing Counterfeit Threats 56 Feb 26 Fu Qiang Strategy and Policy, National University of Singapore Feedback and Favoritism in Sequential Elimination Contests 57 Mar 19 Youngsub Chun Economics, Seoul National University The Shapley value in the queueing problem 58 Apr 9 Ko Chiu Yu Economics, National University of Singapore Decentralized Mechanisms for River Sharing 59 May 3 Zhewei Wang Economics, Shangdong University Complementarity Induction in Multi-dimensional Contests 60 Oct 23 Gunhaeng Lee Economics, National University of Singapore Tailored Recommendations on a Matching Platform ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"f0bb8b7ed7401e1a4efab3a724239c03","permalink":"/others/seminar/2018/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/seminar/2018/","section":"others","summary":"2018 # Date Speaker Affiliation Title 55 Feb 5 Ziqiu Ye Economics, National University of Singapore Status Good Sellers’ Dilemma of Selling through online Marketplace Facing Counterfeit Threats 56 Feb 26 Fu Qiang Strategy and Policy, National University of Singapore Feedback and Favoritism in Sequential Elimination Contests 57 Mar 19 Youngsub Chun Economics, Seoul National University The Shapley value in the queueing problem 58 Apr 9 Ko Chiu Yu Economics, National University of Singapore Decentralized Mechanisms for River Sharing 59 May 3 Zhewei Wang Economics, Shangdong University Complementarity Induction in Multi-dimensional Contests 60 Oct 23 Gunhaeng Lee Economics, National University of Singapore Tailored Recommendations on a Matching Platform ","tags":null,"title":"2018","type":"docs"},{"authors":null,"categories":null,"content":"December: Schedule and Prepare Interviews December JOE: some relevant openings here but not as many as in the prior 2 months. Places start calling or e-mailing to set up interviews at the AEAs (before Christmas). Be polite (and sound happy they called!) and ask for the following informa- tion: Institution 2. Person who called/e-mailed and their contact information. The name and contact information for the contact person at the AEA meetings. Day and time of the interview and hotel it will take place in. Disclosure code (this is the code you will get and look up online during the meetings to find out the exact room the interview takes place in). Other people who will be at the interview Scheduling of interviews: Act quickly! Good spots fill up quickly. o Put less important interviews on Thursday night or early Friday morn- ing as warm up. Put the most important ones at the times you are in the best shape! AT LEAST 15 minutes between interviews, especially for switching ho- tels. Look at a map when you are scheduling (Game is over if you are late for interview) Try to have a string of interviews in the same hotel. Try to leave a little bit of room for lunch if you can. If you do not have enough (less than 10) interviews, talk to your advi- sors. Interview Preparation: In late December, set up mock interviews with faculty members. Do 6-8 and mix and match faculty so that you have 2 faculty members in different fields. Prepare 2-, 5-, and 15-minute versions about your JMP! Embed them into each other. Be flexible and be prepared to be derailed. Dont sounding like you are memorizing! No one like to talk to machine. 2-minute version: simple enough for people outside your field to understanding; give people a big picture; make your idea interesting to people outside your field 5-minute version: Go into greater details of what you are doing; you should tell how your work different from existing literature 15-minute version: Let the expert in your field to know what you are doing and let people outside you field to also feel that they know you are doing something seems interesting and useful Questions: Have you submitted the paper? Where you are going to submit it? How you come up with this idea? Prepare to talk to other papers What’s next in terms of research? Teaching questions: What classes can you teach? Which textbook you are going to use? What topics you are going to cover? Do research on the school you are going to interview. Why you would like to come to our place? Try to understand the research of the people who are in the inter- view Get your suits ready: 2 suits, 4 shirts, 1 handbag and 2 good shoes. Have a good hair cut Early January: AEA Meetings! If you followed the advice, you should have: Booked a hotel that is very close to but not in the headquarters Arrive Wednesday night. (or before) Have 1-2 suits and comfortable shoes. In your handbag, you should have Snacks (energy bars) Some bottle of water. Bring change for paying cab drivers, so that you are not running around with a $100 bill unable to get change. Some copies of CV (especially for walk-in interviews for industry jobs) During interview (usually 30-45 minutes) Usually in a hotel room Talk about your JMP for 15-20 minutes Asked questions related to research and teaching for 5 to 10 minutes You are introduced with the institutions and place Last 2-5 minutes, you will be asked to ask questions. Do have some good questions (dont ask question that you can an- swer from the website) You might ask research support, quality of students Tell them if your spouse/partner is also looking for academic jobs NEVER talk about salary Mid-January through March: FLYOUT If you passed interviews, you will get to visit the place. Scheduling flyout: Try not to put the most important the first one. You should call the other nearby schools you have interviewed so that costs can be shared. You usually pay for transport and get reimbursed later but hotel is usually covered by the school. Keep all original receipts. Make copies and mail the originals. Never check your baggage! Bring a carry-on with your suits. A typical fly-out: Arrive the afternoon/night before. Morning: Someone may pick you up for an informal breakfast. When you arrive, you will be given a schedule with a list of people to meet. Most of time, you talk about your research. Some of the times, you listen their research or even something unrelated. Lunch: Usually at the faculty dining hall with a large number of faculty, and not many within your field. Afternoon: Job talk: usually 1.5 hrs, make sure that most people understand the first 30 minutes Meet more people The last one to meet is either the department chair or the Dean. – Dinner: Typically with the search committee and department head. A chance to show that you are good person to be colleague. Be relaxed, polite and engage in conversation during these dinners. – Some questions to ask during flyout: What are the tenure requirements? What has the tenure success rate been in the last few years? Do you find the department to be collegial? Where would you recommend living? Is there any housing subsidy/allowance? Does the department do a good job of supporting new faculty? In terms of research support, mentorship, shielding from service duties, minimizing teaching preps, etc.? Living environments: Are there good schools nearby? Good restau- rants? February-April: Flyout and Offers Congratulation! You get an offer after 6-month search process!\nMost of offers are verbal. Written formal offers need to get to the administration so they take a lot of time. Offer always come with deadline. Usual case is two weeks. Ask other schools that you have done a flyout to see if they would also like to make you an offer before the deadline. Try to extend deadline for a few days if necessary but should avoid asking for too many days. Bargaining is usually ONLY possible if you have another offer. Make sure you dont bargain too hard. Make sure you are aware of allowance (education, housing, and medi- cal). Check if you are offered a standard package or not. JOE: Post-docs and other teaching positions are posted\nAdditional Reading: Cawley (2012) guide (Must read! Can also read earlier version). Available at [AEA]( http://www.aeaweb.org/joe/articles/2011/job market guide.pdf) William Thomson (2012): Being a graduate student in economics published in A Guide for the Young Economist, MIT Press. Available in working paper version Supplemetary information: Links to Job Positing AEA JOE: link Econ Job Market: link ERN Job: [link]( http://www.ssrn.com/update/ern/ernjob/ern job.html) Chronicle of Higher Education (For teaching jobs): link Royal Economic Society (For Europe Jobs): link Academy of Management (For management jobs): link Harvard Abridge List (Useful): link Supplemetary information: other Job Market Advice Bluwiki: link Econ Job Rumors: link Cawley Review of Job Market Outcome: link David Levines Cheap Advice: link Harvard Job Market Information: link Stanford Ph.D placement Guide: [link]( http://economics.stanford.edu/files/Ph.D%20Placement%20Guide%202011- 120.pdf) Chicago Students Econ Job Market Advice: link Berekely Job Market Packet: link University of Pitt Job Market Information: [link]( http://www.pitt.edu/coen/graduate/job market guide 2011.pdf) Luigi Pistaferri Job Market Advice: link David Laibsons Job Market Note: link Navin Kartiks Job Market Tips: [link]( http://econ.ucsd.edu/vramey/placement/nk tips.doc) ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"2301c9b11c2695f1474e09b6171be091","permalink":"/others/jobmarkettips/december/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/december/","section":"others","summary":"December: Schedule and Prepare Interviews December JOE: some relevant openings here but not as many as in the prior 2 months. Places start calling or e-mailing to set up interviews at the AEAs (before Christmas).","tags":null,"title":"December","type":"docs"},{"authors":null,"categories":null,"content":"Mid-January through March: FLYOUT If you passed interviews, you will get to visit the place. Scheduling flyout: Try not to put the most important the first one. You should call the other nearby schools you have interviewed so that costs can be shared. You usually pay for transport and get reimbursed later but hotel is usually covered by the school. Keep all original receipts. Make copies and mail the originals. Never check your baggage! Bring a carry-on with your suits. A typical fly-out: Arrive the afternoon/night before. Morning: Someone may pick you up for an informal breakfast. When you arrive, you will be given a schedule with a list of people to meet. Most of time, you talk about your research. Some of the times, you listen their research or even something unrelated. Lunch: Usually at the faculty dining hall with a large number of faculty, and not many within your field. Afternoon: Job talk: usually 1.5 hrs, make sure that most people understand the first 30 minutes Meet more people The last one to meet is either the department chair or the Dean. – Dinner: Typically with the search committee and department head. A chance to show that you are good person to be colleague. Be relaxed, polite and engage in conversation during these dinners. – Some questions to ask during flyout: What are the tenure requirements? What has the tenure success rate been in the last few years? Do you find the department to be collegial? Where would you recommend living? Is there any housing subsidy/allowance? Does the department do a good job of supporting new faculty? In terms of research support, mentorship, shielding from service duties, minimizing teaching preps, etc.? Living environments: Are there good schools nearby? Good restau- rants? February-April: Flyout and Offers Congratulation! You get an offer after 6-month search process!\nMost of offers are verbal. Written formal offers need to get to the administration so they take a lot of time. Offer always come with deadline. Usual case is two weeks. Ask other schools that you have done a flyout to see if they would also like to make you an offer before the deadline. Try to extend deadline for a few days if necessary but should avoid asking for too many days. Bargaining is usually ONLY possible if you have another offer. Make sure you dont bargain too hard. Make sure you are aware of allowance (education, housing, and medi- cal). Check if you are offered a standard package or not. JOE: Post-docs and other teaching positions are posted\n","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"73e628011eccc513d1a588077f7f0b67","permalink":"/others/jobmarkettips/febapril/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/febapril/","section":"others","summary":"Mid-January through March: FLYOUT If you passed interviews, you will get to visit the place. Scheduling flyout: Try not to put the most important the first one. You should call the other nearby schools you have interviewed so that costs can be shared.","tags":null,"title":"Feb to April","type":"docs"},{"authors":null,"categories":null,"content":"January: AEA Meetings! If you followed the advice, you should have: Booked a hotel that is very close to but not in the headquarters Arrive Wednesday night. (or before) Have 1-2 suits and comfortable shoes. In your handbag, you should have Snacks (energy bars) Some bottle of water. Bring change for paying cab drivers, so that you are not running around with a $100 bill unable to get change. Some copies of CV (especially for walk-in interviews for industry jobs) During interview (usually 30-45 minutes) Usually in a hotel room Talk about your JMP for 15-20 minutes Asked questions related to research and teaching for 5 to 10 minutes You are introduced with the institutions and place Last 2-5 minutes, you will be asked to ask questions. Do have some good questions (dont ask question that you can an- swer from the website) You might ask research support, quality of students Tell them if your spouse/partner is also looking for academic jobs NEVER talk about salary ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"99635ebf355227482771f5e71d8d4f0a","permalink":"/others/jobmarkettips/january/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/january/","section":"others","summary":"January: AEA Meetings! If you followed the advice, you should have: Booked a hotel that is very close to but not in the headquarters Arrive Wednesday night. (or before) Have 1-2 suits and comfortable shoes.","tags":null,"title":"January","type":"docs"},{"authors":null,"categories":null,"content":"This tips is for economic academic job market. This note was prepared based on information adapted from many different sources and experiences of me and others. Now I can no longer tell which part is mine and which part is other. Good luck!\nTimeline Job Market Process usually starts from summer until the April the year after.\nSummer: Get approval from advisor September: Final version of paper October: Register for AEA conference and get ready for application November: Send applications December: Schedule and prepare for interviews January: AEA meeting and flyout February-April: Flyout and offers Summer: Get approval from advisor Get one main paper ready (Job market paper; JMP) Polish the paper and send it to your committee. Only plan to go to the market if your advisor says yes. Start preparation of application materials: Personal website Professional picture (U-Town has photo taking service) CV (1-page) Research statement Teaching statement (with teaching evaluation) September: Final Polishing of Paper Job Openings for Economists (JOE): http://www.aeaweb.org/joe/ contains almost all job information for Ph.D. economists EconJobMarket (EJM): https://econjobmarket.org/ Final polishing of the JMP, especially your abstract and introduction October: Register for AEA and get ready for application Register for the AEA conference Make flight and hotel reservations. Choose a hotel closet to the Head-Quarters (HQ) hotel but NOT in the HQ hotel. (because HQ hotel has too many people!) Aim to arrive at AEAs for Wednesday night or Thursday morning. Make hotel arrangements immediately as rooms get booked really quick JOE: LOTS of openings Look specifically at openings in Within your field Any Fields: check with your network to see any insider information General Economics/Teaching Check for late October/early November deadlines. Most are mid or late November or December. Create an spread document to organize openings and their dead- lines. (share with your classmates!) Compile a list of schools you plan to apply Do NOT apply jobs not in your field or to places you would never go. This wastes your and others time and bad for your fellow class- mates. To aim too high or too low as other schools may know you are not making serious applications – Run the list with your advisors. Get ready for your application material: Check information of the schools you want to apply (You will need need it to mention it in your cover letter.) Upload your website (with JMP, photo, CV, research/teaching state- ments) Complete your CV Polish your research and teaching statements. November: Send Application Packages JOE: LOTS of openings here. Some will repeat from October JOE.\nMany will have deadlines of November 15th, 30th, December 1st or 15th During this month, only do applications\nDo all or almost all applications before the end of third week (Thanksgiving in US)\nPay attention to the deadline for the AEA 2 job signals you get to send. Details on AEA signaling\nMost applications are done online at econjobmarket.org or via the institu- tions website.\nA typical application packet for mailing includes:\nCover letter. Different letters for research, teaching and non-academic jobs. Customize for a few places you are most interested in. JMP. Other research papers only if well-polished and approved by your advi- sor 3–4 letters of recommendation. Perhaps a teaching letter as well. Your CV (modify the ordering of your research fields depending on the listed opening). Teaching evaluations (if academic). Teaching statement (if academic, particularly liberal arts schools). Research statement (summary of your papers, and your ongoing re- search) An unofficial or official graduate transcript (sometimes). Chinese CV (for chinese schools) Keep your advisors/secretary posted on where to send e-mail, upload or mail reference letters. Let them know your deadlines.\nDecember: Schedule and Prepare Interviews December JOE: some relevant openings here but not as many as in the prior 2 months. Places start calling or e-mailing to set up interviews at the AEAs (before Christmas). Be polite (and sound happy they called!) and ask for the following informa- tion: Institution 2. Person who called/e-mailed and their contact information. The name and contact information for the contact person at the AEA meetings. Day and time of the interview and hotel it will take place in. Disclosure code (this is the code you will get and look up online during the meetings to find out the exact room the interview takes place in). Other people who will be at the interview Scheduling of interviews: Act quickly! Good spots fill up quickly. o Put less important interviews on Thursday night or early Friday morn- ing as warm up. Put the most important ones at the times you are in the best shape! AT LEAST 15 minutes between interviews, especially for switching ho- tels. Look at a map when you are scheduling (Game is over if you are late for interview) Try to have a string of interviews in the same hotel. Try to leave a little bit of room for lunch if you can. If you do not have enough (less than 10) interviews, talk to your advi- sors. Interview Preparation: In late December, set up mock interviews with faculty members. Do 6-8 and mix and match faculty so that you have 2 faculty members in different fields. Prepare 2-, 5-, and 15-minute versions about your JMP! Embed them into each other. Be flexible and be prepared to be derailed. Dont sounding like you are memorizing! No one like to talk to machine. 2-minute version: simple enough for people outside your field to understanding; give people a big picture; make your idea interesting to people outside your field 5-minute version: Go into greater details of what you are doing; you should tell how your work different from existing literature 15-minute version: Let the expert in your field to know what you are doing and let people outside you field to also feel that they know you are doing something seems interesting and useful Questions: Have you submitted the paper? Where you are going to submit it? How you come up with this idea? Prepare to talk to other papers What’s next in terms of research? Teaching questions: What classes can you teach? Which textbook you are going to use? What topics you are going to cover? Do research on the school you are going to interview. Why you would like to come to our place? Try to understand the research of the people who are in the inter- view Get your suits ready: 2 suits, 4 shirts, 1 handbag and 2 good shoes. Have a good hair cut Early January: AEA Meetings! If you followed the advice, you should have: Booked a hotel that is very close to but not in the headquarters Arrive Wednesday night. (or before) Have 1-2 suits and comfortable shoes. In your handbag, you should have Snacks (energy bars) Some bottle of water. Bring change for paying cab drivers, so that you are not running around with a $100 bill unable to get change. Some copies of CV (especially for walk-in interviews for industry jobs) During interview (usually 30-45 minutes) Usually in a hotel room Talk about your JMP for 15-20 minutes Asked questions related to research and teaching for 5 to 10 minutes You are introduced with the institutions and place Last 2-5 minutes, you will be asked to ask questions. Do have some good questions (dont ask question that you can an- swer from the website) You might ask research support, quality of students Tell them if your spouse/partner is also looking for academic jobs NEVER talk about salary Mid-January through March: FLYOUT If you passed interviews, you will get to visit the place. Scheduling flyout: Try not to put the most important the first one. You should call the other nearby schools you have interviewed so that costs can be shared. You usually pay for transport and get reimbursed later but hotel is usually covered by the school. Keep all original receipts. Make copies and mail the originals. Never check your baggage! Bring a carry-on with your suits. A typical fly-out: Arrive the afternoon/night before. Morning: Someone may pick you up for an informal breakfast. When you arrive, you will be given a schedule with a list of people to meet. Most of time, you talk about your research. Some of the times, you listen their research or even something unrelated. Lunch: Usually at the faculty dining hall with a large number of faculty, and not many within your field. Afternoon: Job talk: usually 1.5 hrs, make sure that most people understand the first 30 minutes Meet more people The last one to meet is either the department chair or the Dean. – Dinner: Typically with the search committee and department head. A chance to show that you are good person to be colleague. Be relaxed, polite and engage in conversation during these dinners. – Some questions to ask during flyout: What are the tenure requirements? What has the tenure success rate been in the last few years? Do you find the department to be collegial? Where would you recommend living? Is there any housing subsidy/allowance? Does the department do a good job of supporting new faculty? In terms of research support, mentorship, shielding from service duties, minimizing teaching preps, etc.? Living environments: Are there good schools nearby? Good restau- rants? February-April: Flyout and Offers Congratulation! You get an offer after 6-month search process!\nMost of offers are verbal. Written formal offers need to get to the administration so they take a lot of time. Offer always come with deadline. Usual case is two weeks. Ask other schools that you have done a flyout to see if they would also like to make you an offer before the deadline. Try to extend deadline for a few days if necessary but should avoid asking for too many days. Bargaining is usually ONLY possible if you have another offer. Make sure you dont bargain too hard. Make sure you are aware of allowance (education, housing, and medi- cal). Check if you are offered a standard package or not. JOE: Post-docs and other teaching positions are posted\nAdditional Reading: Cawley (2012) guide (Must read! Can also read earlier version). Available at [AEA]( http://www.aeaweb.org/joe/articles/2011/job market guide.pdf) William Thomson (2012): Being a graduate student in economics published in A Guide for the Young Economist, MIT Press. Available in working paper version Supplemetary information: Links to Job Positing AEA JOE: link Econ Job Market: link ERN Job: [link]( http://www.ssrn.com/update/ern/ernjob/ern job.html) Chronicle of Higher Education (For teaching jobs): link Royal Economic Society (For Europe Jobs): link Academy of Management (For management jobs): link Harvard Abridge List (Useful): link Supplemetary information: other Job Market Advice Bluwiki: link Econ Job Rumors: link Cawley Review of Job Market Outcome: link David Levines Cheap Advice: link Harvard Job Market Information: link Stanford Ph.D placement Guide: [link]( http://economics.stanford.edu/files/Ph.D%20Placement%20Guide%202011- 120.pdf) Chicago Students Econ Job Market Advice: link Berekely Job Market Packet: link University of Pitt Job Market Information: [link]( http://www.pitt.edu/coen/graduate/job market guide 2011.pdf) Luigi Pistaferri Job Market Advice: link David Laibsons Job Market Note: link Navin Kartiks Job Market Tips: [link]( http://econ.ucsd.edu/vramey/placement/nk tips.doc) ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"dfce5231da14173ca44a2a80422250ce","permalink":"/others/jobmarkettips/tips/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/tips/","section":"others","summary":"This tips is for economic academic job market. This note was prepared based on information adapted from many different sources and experiences of me and others. Now I can no longer tell which part is mine and which part is other.","tags":null,"title":"Job Market Tips","type":"docs"},{"authors":null,"categories":null,"content":"Data Source:\nThe NUS ranking is based on this post. Ambition ranking is from Engemann, K. M., \u0026amp; Wall, H. J. (2009). A journal ranking for the ambitious economist. Federal Reserve Bank of St. Louis Review, 91(3), 127-139. CL-index is from Combes, P. P., \u0026amp; Linnemer, L. (2010). Inferring missing citations: A quantitative multi-criteria ranking of all journals in economics. Ritzberger is from Ritzberger, K. (2008). A ranking of journals in economics and related fields. German Economic Review, 9(4), 402-430. IDEAs is from IDEAS/RePEc Simple Impact Factors for Journals accessed on Dec 2017. Journal Name NUS Ranking(2016) Ambition Ranking(2009) CL-Index(2010) Ritzberger(2008) IDEAS(2017) SHUFE (2017) SWUFE (2013) Quarterly Journal of Economics 1 1 1 A+ 1 1 A Econometrica 2 3 4 A+ 4 1 A Journal of Political Economy 3 2 3 A+ 3 1 A Review of Economic Studies 4 5 5 A+ 7 1 A American Economic Review 5 4 2 A+ 10 1 A Journal of Economic Growth (1999) 6 7 31 A 5 3 A Journal of Monetary Economics 7 12 7 A+ 14 2 A Journal of Labor Economics 8 6 18 A 16 2 A Rand Journal of Economics 9 13 13 A 19 2 A Journal of Economic Theory 10 16 9 A+ 39 2 A Review of Economics and Statistics 11 8 8 A 21 2 A Review of Economic Dynamics 12 18 35 B+ 38 3 B Journal of Finance 13 20 10 A+ 8 - A International Economic Review 14 11 19 A 42 2 A American Economic Review Papers \u0026amp; Proceedings 15 10 - - - 3 - Experimental Economics (2003) 16 - 85 - 37 3 B Journal of International Economics 17 14 15 A 24 2 A Economic Journal 18 9 12 A 20 2 A Journal of Public Economics 19 17 14 A 30 2 A Journal of Human Resources 20 28 25 B+ 29 3 B Review of Financial Studies 21 24 21 A 11 - A Games and Economic Behavior 22 21 20 A+ 79 2 A Journal of Econometrics 23 22 11 A+ 17 2 A Journal of Financial Economics 24 25 6 A 6 - A Journal of Industrial Economics 25 26 42 B 66 3 B Journal of Development Economics 26 30 24 B 35 2 B Journal of Risk and Uncertainty 27 37 47 B+ 46 3 B Journal of Business \u0026amp; Economic Statistics 28 19 22 A 26 3 B Journal of Law \u0026amp; Economics 29 15 27 B 41 3 B Econometric Theory 30 42 38 A 88 3 B Journal of Applied Econometrics 31 27 36 B+ 22 3 B Journal of Economics \u0026amp; Management Strategy 32 - 53 C+ 81 3 B Journal of Urban Economics 33 32 29 B 58 3 B Economic Theory 34 41 37 A 128 3 B Journal of Law, Economics \u0026amp; Organization 35 29 39 B 52 4 B Journal of Money, Credit and Banking 36 43 26 B+ 47 3 B Scandinavian Journal of Economics 37 33 48 B 75 4 B Journal of Economic History 38 47 44 C+ 556 2 B European Economic Review 39 23 17 B+ 44 3 B International Journal of Industrial Org 40 50 43 B 78 3 B Journal of Economic Behavior \u0026amp; Organization 41 35 33 B+ 94 3 B Journal of Health Economics 42 48 23 C+ 59 3 B Economica 43 36 58 B 91 4 B Oxford Economic Papers-New Series 44 34 55 B 80 4 B Labour Economics 45 - 70 C+ 65 4 B Economic Inquiry 46 40 67 B 114 4 B Journal of Economic Dynamics \u0026amp; Control 47 49 32 A 73 3 B Journal of Environmental Economics and Management 48 57 30 B 34 3 B Journal of Economic Geography 49 45 92 B+ 83 - B National Tax Journal 50 58 77 B 154 4 B Regional Science and Urban Economics 51 53 69 C+ 120 4 B Journal of Mathematical Economics 52 55 51 A 173 3 C Explorations in Economic History 53 - 78 B 263 3 B Journal of Population Economics 54 - 81 B 72 3 B Journal of Comparative Economics 55 - 71 B 151 3 B Macroeconomic Dynamics (1998) 56 39 64 B+ 142 3 B Social Choice and Welfare 57 - 80 B+ 249 3 B Economics Letters 58 54 46 B 172 4 B Public Choice 59 59 59 C+ 192 4 B Journal of Accounting \u0026amp; Economics 60 - 28 C+ 43 - A Canadian Journal of Economics 61 44 62 B 124 3 B American Journal of Agricultural Economics 62 - 41 C+ 195 3 B Health Economics 63 - 40 C 178 4 B Journal of Banking \u0026amp; Finance 64 64 61 C+ 74 - B World Development 65 - 34 C+ 129 4 B Ecological Economics 66 - 50 C 144 - B Journal of the European Economic Association (2005) - 31 16 - 33 2 B Oxford Bulletin of Economics \u0026amp; Statistics - 38 76 B 53 4 B Journal of Business - 46 52 B 27 - - Journal of International Money \u0026amp; Finance - 51 73 C 55 - - Journal of Financial \u0026amp; Quantitative Analysis - 52 49 B 63 - B Journal of Policy Analysis \u0026amp; Management - 56 - - 378 - B Journal of Regional Science - 60 - - 166 4 B Journal of Macroeconomics - 61 - C 199 4 B Papers in Regional Science - 62 - - 188 - B Southern Economic Journal - 63 94 C 168 4 B Economic History Review - 65 99 C+ 709 3 B Annals of Regional Science - 66 - - 277 - - Contemporary Economic Policy - 67 - C 275 4 B Applied Economics - 68 102 C 247 4 C Journal of Forecasting - 69 - C 206 - - Marketing Science - - - B+ 105 - - Accounting Review - - - B+ - - - Review of Accounting Studies - - - B+ 1751 - - Journal of Accounting Research - - - B+ 107 - - Journal of Financial Intermediation - - 89 B+ 32 - - Journal of Financial Markets - - - B+ 60 - - Journal of Consumer Research - - - B+ 111 - - Journal of Marketing Research - - - B+ - - - Journal of Time Series Analysis - - - B+ 319 - - World Bank Economic Review - - 115 B+ 28 4 B Journal of Marketing - - - B - - - Accounting, Organizations \u0026amp; Society - - - B 182 - - Financial Management - - - B 96 - - Management Science - - - B 92 - - International Journal of Forecasting - - - B 186 - B Journal of Corporate Finance - - - B 134 - - Industrial Relations - - - B - 4 - Contemporary Accounting Research - - - B - - - Journal of the American Statistical Association - - 56 B 212 - - IMF Staff Papers - - - B 54 - B Economics \u0026amp; Philosophy - - - C+ 463 4 B Academic Management Review - - - C+ - - - Administrative Science Quarterly - - - C+ - - - Mathematical Finance - - 57 C+ 49 - B Computational Statistics \u0026amp; Data Analysis - - - C+ 529 - - Industrial \u0026amp; Labor Relations Review - - 96 C+ - 4 - Auditing: A Journal of Practise \u0026amp; Theory - - - C+ - - - Resource \u0026amp; Energy Economics - - 100 C+ 98 4 B Strategic Management Journal - - - C+ 626 - - Finance \u0026amp; Stochastics - - - C+ 104 - - Economic Development \u0026amp; Cultural Change - - 75 C+ 133 4 B Financial Analysts Journal - - - C+ - - - World Bank Research Observer - - - C+ 45 - B International Tax \u0026amp; Public Finance - - 93 C+ 95 4 B Energy Journal - - 84 C+ 113 4 B Population \u0026amp; Development Review - - - C+ 220 - - Research-Technology Management - - - C+ - - - Journal of Statistical Planning \u0026amp; Inference - - - C+ - - - Academy of Management Journal - - - C+ - - - Review of Income \u0026amp; Wealth - - 87 C+ 147 4 B Information Economics \u0026amp; Policy - - - C+ 238 - - Journal of the Japanese \u0026amp; International Economies - - - C+ 119 - C Land Economics - - 65 C+ 108 4 B International Journal of Game Theory - - 74 C+ 189 4 B Oxford Review of Economic Policy - - - C+ 76 4 B The World Economy - - 95 C+ 161 4 B Scottish Journal of Political Economy - - - C+ 221 4 C Review of Industrial Organization - - - C+ 205 4 B Journal of Institutional \u0026amp; Theoretical Economics - - - C+ 365 4 C Journal of Productivity Analysis - - 86 C 121 4 B Journal of Regulatory Economics - - 88 C 126 3 B British Journal of Industrial Relations - - - C 430 - - Monthly Labor Review - - - C - - - Journal of Evolutionary Economics - - - C 148 - B Journal of Portfolio Management - - - C - - - Insurance: Mathematics \u0026amp; Economics - - 72 C 393 - B Journal of Management Studies - - - C 130 - - Economics of Education Review - - 82 C 201 4 B Feminist Economics - - - C 349 - B Economic Policy - - - C 12 4 B Journal of the Academy of Marketing Science - - - C - - - International Review of Law \u0026amp; Economics - - - C 311 - C Journal of Public Policy \u0026amp; Marketing - - - C - - - Journal of Economic Surveys - - - C 36 - B Industrial \u0026amp; Corporate Change - - 66 C 86 - B International Journal of Research in Marketing - - - C - - - Economics of Transition - - 113 C 116 4 B Environmental \u0026amp; Resource Economics - - 79 C 97 4 B Journal of Risk \u0026amp; Insurance - - 101 C 218 - A Business Ethics Quarterly - - - C 337 - - Journal of International Business Studies - - - C 50 - - Manchester School - - - C 241 - C Real Estate Economics - - 120 C 149 - B Business History Review - - - C 1411 - - Journal of Management - - - C - - - Journal of Real Estate Finance \u0026amp; Economics - - 91 C 190 3 B Communications in Statistics - Part A: Theory \u0026amp; Methods - - - C - - - Fiscal Studies - - - C 180 - B Economic Modelling - - - C 266 4 B Journal of Statistical Computation \u0026amp; Simulation - - - C - - - Journal of Business Venturing - - - C 61 - - Regional Studies - - - C 157 - - Journal of Labor Research - - - C 402 - - China Economic Review - - 105 C 179 4 B Journal of Economics - - - C 367 4 B California Management Review - - - C - - - Studies in Nonlinear Dynamics \u0026amp; Econometrics - - - C 181 - C Journal of Economic Psychology - - 98 C 196 - B Theory \u0026amp; Decision - - - C 344 4 B Journal of Agricultural Economics - - - C 146 4 B European Review of Agricultural Economics - - - C 239 - B Small Business Economics - - - C 101 - B Cambridge Journal of Economics - - - C 167 4 B Journal of Housing Economics - - - C 174 - B Japan and the World Economy - - - C 259 - C Kyklos - - - C 163 - B Journal of Policy Modeling - - - C 197 - B Open Economies Review - - - C 214 - C Food Policy - - 109 C 288 - B Journal of Agricultural \u0026amp; Resource Economics - - - C 185 - - Journal of Economic Issues - - - C 625 - C Quantitative Economics - - - - 102 2 - Theoretical Economics - - - - 117 2 A American Economic Journal: Applied Economics - - - - 25 2 A American Economic Journal: Economic Policy - - - - 56 2 B American Economic Journal: Macroeconomics - - - - 18 2 A American Economic Journal: Microeconomics - - - - 125 2 B Brookings Papers on Economic Activity - - 97 - 13 3 B Journal of Economic Education - - - - 459 3 C Journal of Economic Literature - - 54 - 2 3 A Journal of Economic Perspectives - - 45 - 9 3 A History of Political Economy - - - - 636 3 C Econometrics Journal - - 112 - 57 4 B Econometric Reviews - - 90 - 77 4 B Economic Record - - - - 295 4 C Empirical Economics - - - - 169 4 B Europe-Asia Studies - - - - - 4 B Frontiers of Economics in China - - - - 691 4 - International Monetary Fund Economic Review - - - - 54 4 B Journal of Transport Economics \u0026amp; Policy - - 119 - 141 4 B Mathematical Social Sciences - - - - 343 4 - Review of Economic Design - - - - 261 4 B The B.E. Journal of Economic Analysis \u0026amp;Policy - - - - 187 4 B The B.E. Journal of Macroeconomics - - - - 106 4 B The B.E. Journal of Theoretical Economics (Research Articles) - - - - 287 4 B American Political Science Review - - 60 - 646 - - Journal of Common Market Studies - - 63 - 503 - - Economy \u0026amp; Society - - 68 - - - B Water Resources Research - - 83 - - - - Agricultural Economics - - 103 - 135 - B Review of Finance - - 104 - 118 - B International Organization - - 106 - 234 - - Energy Economics - - 107 - 85 - B Review of International Economics - - 108 - 132 - B Journal of Public Economic Theory - - 110 - 203 - C Economic Geography - - 111 - 255 - B European Journal of Political Economy - - 114 - 103 - B Journal of Legal Studies - - 116 - 139 - - American Law \u0026amp; Economics Review - - 117 - 194 - B Journal of Empirical Finance - - 118 - 69 - B ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"dc58d7d2a4936e0ab463951aad30abbe","permalink":"/others/journal/journalranking/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/journal/journalranking/","section":"others","summary":"Data Source:\nThe NUS ranking is based on this post. Ambition ranking is from Engemann, K. M., \u0026amp; Wall, H. J. (2009). A journal ranking for the ambitious economist. Federal Reserve Bank of St.","tags":null,"title":"Journal Ranking","type":"docs"},{"authors":null,"categories":null,"content":"The following shows the submission fees of various journals in economics and related disciplines. The data is collected in December 2017. The membership is based on the most standard and basic membership for developed countries.\nInteresting observation about submission fee by category:\nTheory \u0026lt; IO \u0026lt; General Interest \u0026lt; Macro \u0026lt; Finance \u0026lt; Accounting\nGeneral Interest On average requires USD100 except QJE (Quarterly Journal of Economics)\nTier Journal Non-member Member Membership 1 American Economic Review USD200 USD100 USD40 1 Econometrica Must be member Free USD140 1 Journal of Political Economy USD125 1 Quarterly Journal of Economics Free 1 Review of Economic Studies USD100 2 Economic Journal Must be member Free GBP40 2 International Economic Review USD125 2 Journal of the European Economic Association Must be member EUR75 3 Economics Letters USD65 3 Canadian Journal of Economics Must be member CAD75 CAD50 3 Economic Inquiry USD180 USD120 USD55 3 Economica Free 3 European Economic Review EUR100 4 Oxford Economic Papers - New Series Free 4 Scandinavian Journal of Economics USD100 Theory Almost free.\nTier Journal Non-member Member Membership 1 American Economic Journal: Microeconomics USD200 USD100 USD40 1 Games and Economic Behavior Free 1 Journal of Economic Theory Free 1 Theoretical Economics Must be member Free USD140 2 Economic Theory Free 2 Journal of Economic Behavior and Organization USD100 3 Journal of Mathematical Economics Free 3 Public Choice Free 3 Social Choice and Welfare Free 4 International Journal of Game Theory Free 4 Journal of Risk and Uncertainty Free 4 Theory and Decision Free 5 Journal of Institutional and Theoretical Economics Free Industrial Organization Mostly free\nTier Journal Non-member 1 Rand Journal of Economics* USD100 2 Journal of Economics and Management Strategy USD50 2 International Journal of Industrial Organization Free 2 Journal of Industrial Economics Free 3 Review of Industrial Organization Free Refund if desk-rejected. Macro On average requires USD 200\nTier Journal Non-member Member Membership 1 American Economic Journal: Macroeconomics USD200 USD100 USD40 1 Journal of Economic Growth USD100 1 Journal of Monetary Economics USD250 2 Journal of Banking and Finance* USD250 2 Journal of Economic Dynamics and Control USD125 2 Journal of Money, Credit and Banking USD200 3 Brookings Papers on Economic Activity Free 3 Macroeconomic Dynamics Free 3 National Tax Journal Free 3 World Development Free 4 IMF Staff Papers Free 3 Review of Economic Dynamics Free 4 International Tax and Public Finance Free 3 The World Economy GBP40 4 Review of Income and Wealth Free 4 World Bank Economic Review Free 4 World Bank Research Observer Free USD150 for resubmission. Finance On average requires 300 USD\nTier Journal Non-member Member Membership 1 Journal of Finance USD300 USD250 1 Journal of Financial Economics* USD750 1 Review of Financial Studies USD300 USD240 2 Journal of Financial and Quantitative Analysis USD350 2 Review of Finance EUR300 EUR230 EUR55/USD70/GBP60 3 Journal of Corporate Finance USD250 3 Journal of Financial Intermediation USD300 3 Journal of Financial Markets USD170 3 Financial Management USD350 USD250 USD100 4 Finance and Stochastics Free 4 Financial Analysts Journal Free 4 Mathematical Finance Free For each round of submission Accounting On average requires USD 400\nTier Journal Non-member Member Membership 1 Accounting Review USD500 USD250 USD230 1 Journal of Accounting and Economics USD500 1 Journal of Accounting Research USD500 2 Contemporary Accounting Research USD400 USD225 USD205 2 Review of Accounting Studies USD300 3 Accounting, Organizations and Society Free 3 Auditing: A Journal of Practise and Theory USD200 USD150 USD230 ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"99c29659b5c3e1cf13b94a9288444b93","permalink":"/others/journal/journalfee/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/journal/journalfee/","section":"others","summary":"The following shows the submission fees of various journals in economics and related disciplines. The data is collected in December 2017. The membership is based on the most standard and basic membership for developed countries.","tags":null,"title":"Journal Submission Fees","type":"docs"},{"authors":null,"categories":null,"content":"November: Send Application Packages JOE: LOTS of openings here. Some will repeat from October JOE.\nMany will have deadlines of November 15th, 30th, December 1st or 15th During this month, only do applications\nDo all or almost all applications before the end of third week (Thanksgiving in US)\nPay attention to the deadline for the AEA 2 job signals you get to send. Details on AEA signaling\nMost applications are done online at econjobmarket.org or via the institu- tions website.\nA typical application packet for mailing includes:\nCover letter. Different letters for research, teaching and non-academic jobs. Customize for a few places you are most interested in. JMP. Other research papers only if well-polished and approved by your advi- sor 3–4 letters of recommendation. Perhaps a teaching letter as well. Your CV (modify the ordering of your research fields depending on the listed opening). Teaching evaluations (if academic). Teaching statement (if academic, particularly liberal arts schools). Research statement (summary of your papers, and your ongoing re- search) An unofficial or official graduate transcript (sometimes). Chinese CV (for chinese schools) Keep your advisors/secretary posted on where to send e-mail, upload or mail reference letters. Let them know your deadlines.\n","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"3aa1284e7ca0d8317294e92d35c6b9e3","permalink":"/others/jobmarkettips/november/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/november/","section":"others","summary":"November: Send Application Packages JOE: LOTS of openings here. Some will repeat from October JOE.\nMany will have deadlines of November 15th, 30th, December 1st or 15th During this month, only do applications","tags":null,"title":"November","type":"docs"},{"authors":null,"categories":null,"content":"October: Register for AEA and get ready for application Register for the AEA conference Make flight and hotel reservations. Choose a hotel closet to the Head-Quarters (HQ) hotel but NOT in the HQ hotel. (because HQ hotel has too many people!) Aim to arrive at AEAs for Wednesday night or Thursday morning. Make hotel arrangements immediately as rooms get booked really quick JOE: LOTS of openings Look specifically at openings in Within your field Any Fields: check with your network to see any insider information General Economics/Teaching Check for late October/early November deadlines. Most are mid or late November or December. Create an spread document to organize openings and their dead- lines. (share with your classmates!) Compile a list of schools you plan to apply Do NOT apply jobs not in your field or to places you would never go. This wastes your and others time and bad for your fellow class- mates. To aim too high or too low as other schools may know you are not making serious applications – Run the list with your advisors. Get ready for your application material: Check information of the schools you want to apply (You will need need it to mention it in your cover letter.) Upload your website (with JMP, photo, CV, research/teaching state- ments) Complete your CV Polish your research and teaching statements. ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"12aa7a2773cf64dda9175dc768648369","permalink":"/others/jobmarkettips/october/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/october/","section":"others","summary":"October: Register for AEA and get ready for application Register for the AEA conference Make flight and hotel reservations. Choose a hotel closet to the Head-Quarters (HQ) hotel but NOT in the HQ hotel.","tags":null,"title":"October","type":"docs"},{"authors":null,"categories":null,"content":"I am the main advisor of dissertation for two Ph.D. students, and honor thesis for 17 undergraduate students. Besides, between 2015 and 2018, I have been helping Ph.D. students prepare their academic job market.\nPHD STUDENTS I am the main advisor for two Ph.D. students, and serve in dissertation committees for four Ph.D. students. I also hosted three visiting Ph.D. students.\nMain Advisor Lu Zhiqi (2019 Expected) Zhang Xuyao (2017, Deputy Director, Asia Competitiveness Institute, Lee Kuen Yew School of Public Policy, National University of Singapore) Committee Member Liu Xuyuan (2014, Research Fellow, Risk Management Institute, National University of Singapore) Ding Rong (2015, Assistant Professor, University of International Business and Economics) Liu Bin (2015, Assistant Professor, Chinese University of Hong Kong Shenzhen) Wang Zhe (2017, Post-doc Fellow, Lee Kuen Yew School of Public Policy, National University of Singapore) Short-term Visting Students Yujia Cao (Lingnan (University) College, Sun Yat Sen University, 2016-2017) Xu Luyuan (Guangxi University, 2016-2017) Chen Yaqi (Beijing Jiaotong University, 2015-2016) ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"e703ec37d9edceba32cf2455c5f393bd","permalink":"/others/advising/phd/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/advising/phd/","section":"others","summary":"I am the main advisor of dissertation for two Ph.D. students, and honor thesis for 17 undergraduate students. Besides, between 2015 and 2018, I have been helping Ph.D. students prepare their academic job market.","tags":null,"title":"Supervision","type":"docs"},{"authors":null,"categories":null,"content":"Additional Reading: Cawley (2012) guide (Must read! Can also read earlier version). Available at [AEA]( http://www.aeaweb.org/joe/articles/2011/job market guide.pdf) William Thomson (2012): Being a graduate student in economics published in A Guide for the Young Economist, MIT Press. Available in working paper version Supplemetary information: Links to Job Positing AEA JOE: link Econ Job Market: link ERN Job: [link]( http://www.ssrn.com/update/ern/ernjob/ern job.html) Chronicle of Higher Education (For teaching jobs): link Royal Economic Society (For Europe Jobs): link Academy of Management (For management jobs): link Harvard Abridge List (Useful): link Supplemetary information: other Job Market Advice Bluwiki: link Econ Job Rumors: link Cawley Review of Job Market Outcome: link David Levines Cheap Advice: link Harvard Job Market Information: link Stanford Ph.D placement Guide: [link]( http://economics.stanford.edu/files/Ph.D%20Placement%20Guide%202011- 120.pdf) Chicago Students Econ Job Market Advice: link Berekely Job Market Packet: link University of Pitt Job Market Information: [link]( http://www.pitt.edu/coen/graduate/job market guide 2011.pdf) Luigi Pistaferri Job Market Advice: link David Laibsons Job Market Note: link Navin Kartiks Job Market Tips: [link]( http://econ.ucsd.edu/vramey/placement/nk tips.doc) ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"d93238a7668d22fac1643f9ad00daf3a","permalink":"/others/jobmarkettips/reading/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/reading/","section":"others","summary":"Additional Reading: Cawley (2012) guide (Must read! Can also read earlier version). Available at [AEA]( http://www.aeaweb.org/joe/articles/2011/job market guide.pdf) William Thomson (2012): Being a graduate student in economics published in A Guide for the Young Economist, MIT Press.","tags":null,"title":"Reading","type":"docs"},{"authors":null,"categories":null,"content":"September: Final Polishing of Paper Job Openings for Economists (JOE): http://www.aeaweb.org/joe/ contains almost all job information for Ph.D. economists EconJobMarket (EJM): https://econjobmarket.org/ Final polishing of the JMP, especially your abstract and introduction ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"4d73407fd6e783336faa05e04719a378","permalink":"/others/jobmarkettips/september/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/september/","section":"others","summary":"September: Final Polishing of Paper Job Openings for Economists (JOE): http://www.aeaweb.org/joe/ contains almost all job information for Ph.D. economists EconJobMarket (EJM): https://econjobmarket.org/ Final polishing of the JMP, especially your abstract and introduction ","tags":null,"title":"September","type":"docs"},{"authors":null,"categories":null,"content":"Summer: Get approval from advisor Get one main paper ready (Job market paper; JMP) Polish the paper and send it to your committee. Only plan to go to the market if your advisor says yes. Start preparation of application materials: Personal website Professional picture (U-Town has photo taking service) CV (1-page) Research statement Teaching statement (with teaching evaluation) ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"dd76e97ac5c4b3edbdd7f48849abddfa","permalink":"/others/jobmarkettips/summer/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/jobmarkettips/summer/","section":"others","summary":"Summer: Get approval from advisor Get one main paper ready (Job market paper; JMP) Polish the paper and send it to your committee. Only plan to go to the market if your advisor says yes.","tags":null,"title":"Summer","type":"docs"},{"authors":null,"categories":null,"content":"UNDERGRADUATE I have supervised 20 honor students, 5 independent studies and 2 UROP since 2012.\nHONOR THESIS Bhaniramka Akshat (2019 Spring, Economics) The Impact Of Change In Conservatism From S-1 To 10-K Report On Stock Market Returns Mimani Tanvi (2019 Spring, Economics) Effect Of Domestic And Foreign Macro Variables On The ASEAN Stock Market: An Empirical Study. Lim Wei Yang Bryan (2018 Fall, Economics) Relation Of Regulatory Capital On The Origination Of Informationally Opaque Syndicated Loans. Chew Pheeraphol (2018 Spring, Economics) Quantifying Trading Behavior Of Cryptocurrencies Using Online Search Interest - How Do They React To Speculation And Do They All Behave Similarly? Mudit Kedia (2018 Spring, Economics) The Impact Of Prospectus Conservatism On Share Price And Operating Performance: Evidence From Hong Kong. Shiang Chen Ting (2018 Spring, Economics) Effect Of News Sentiment On Stock Returns: A Textual Analysis. Lim Si Min Sally (2018 Spring, Economics and Accounting) Do Investors Value Tax Avoidance In Singapore-Listed Firms? Soh Giap Hong Daniel (2017 Fall, Economics) An Empirical Investigation of the IPO Underpricing Phenomenon: Evidence from the Singapore IPO Market Chia Keat Loong (2016 Fall, Economics and Finance) Profitability of Trading Strategies Based on Google Trends Evelyn Chew Yu Hui (2016 Spring, Economics) Profiting from the Singapore Stock Market Lim Cai Jie (2015 Fall, Economics and Finance) The Term Structure of Stock Return Continuation Zhao Yin (2015 Fall, Economics, NUS-ANU JDP) The Dynamics of Global Housing Attainability Nguyen Hoang Diem An (2015 Spring, Economics) Are Family Firms Better? Looking from the Firm Profitability and Market Perception Perspective Chew Yi Peng Lisa (2015 Spring, Economics and Business) What Value Do Shareholders Place on Firm-held Cash? An Empirical Study of the Singapore Stock Market Oon Wei Ying (2014 Fall, Economics NUS-ANU JDP) An Economics Analysis of Multi-Level Marketing Ngiaw Kee Ann (2014 Fall, Economics) Explaining Price Anomalies in Simultaneous Ascending Auctions for Coffee Edmund Chua Zheng Hong (2014 Spring, Economics and Business) To Race or To Wait? An Analysis of the Trade-offs Between Uncertainty and First Mover Advantage in a Strategic Setting Anushiya Arunan (2014 Spring, Economics and Environment Engineering) A Multi-Disciplinary Perspective on Reducing the Carbon Footprint of Wastewater Treatment Plants Zhe Michelle Dong (2014 Spring, Economics, NUS-ANU JDP) Too Big to Fail? An Empirical Study on the Default Risk of Leveraged Financial Firms Jonathan Ne Win (2013 Spring, Economics) What\u0026rsquo;s in a Dividend? Re–examination of Dividend Theory with U.S. Technology Companies INDEPENDENT STUDY Zeng Yonghui, Jesslyn (2019 Spring, Economics) Textual Analysis On The Stock Exchange Of Hong Kong Initial Public Offering Transactions: Determining The Relationship Between Sentiment Words Through Natural Language Processing. Chan Yong (2019 Spring, Economics) Determining The Fair Value Of Bitcoin: A Look Into Demand And Supply Fundamentals. Shi Huilin (2018 Spring, Economics) Analysis On Hong Kong IPO Pricing From A Sentimental Prospective. Wu Jieli (2016 Spring, Economics) Predicting Stock Returns in China Koh Zhi Xing (2015 Spring, USP) Evidence on Dividend Clienteles: US Technology Stocks UROP Lin Jia He (2015 Spring, Economics-Statistics) Chinese Political System Lim Hysen (2015 Spring, Economics) Election System in Hong Kong ","date":1555776000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1555776000,"objectID":"9eef1ae4a73db017d0e48c0da1d2a4bc","permalink":"/others/advising/undegrad/","publishdate":"2019-04-21T00:00:00+08:00","relpermalink":"/others/advising/undegrad/","section":"others","summary":"UNDERGRADUATE I have supervised 20 honor students, 5 independent studies and 2 UROP since 2012.\nHONOR THESIS Bhaniramka Akshat (2019 Spring, Economics) The Impact Of Change In Conservatism From S-1 To 10-K Report On Stock Market Returns Mimani Tanvi (2019 Spring, Economics) Effect Of Domestic And Foreign Macro Variables On The ASEAN Stock Market: An Empirical Study.","tags":null,"title":"Undergraduate Advising","type":"docs"},{"authors":["Jens Gudmundsson","Jens Hougaard","Chiu Yu Ko"],"categories":null,"content":"","date":1546272000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1546272000,"objectID":"9682e0669c182b50b3324a160fcd003b","permalink":"/publication/river-sharing/","publishdate":"2019-01-01T00:00:00+08:00","relpermalink":"/publication/river-sharing/","section":"publication","summary":"We study the decentralized implementation of efficient outcomes through multilateral bargaining in the river sharing problem. We consider a class of mechanisms where agents first announce consumption levels and then bargain over monetary compensation. We first determine which mechanisms give incentives to always allocate the water efficiently. Among these, we take an axiomatic approach to single out three mechanisms that guarantee a fair division of the welfare gain.","tags":["Game Theory","Fair Sharing","Water Sharing"],"title":"Decentralized mechanisms for river sharing","type":"publication"},{"authors":["Fengjiao Chen","Chiu Yu Ko","Duozhe Li"],"categories":null,"content":"","date":1546272000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1546272000,"objectID":"a46e7be2cdf6231d416d61294095afb5","permalink":"/publication/outside-option-bargaining/","publishdate":"2019-01-01T00:00:00+08:00","relpermalink":"/publication/outside-option-bargaining/","section":"publication","summary":"A worker with a superior outside offer starts a wage renegotiation with his current employer. The worker may exercise the outside option whenever a proposal is rejected. Entire surplus may be extracted by the worker. Opting out can arise in equilibrium under complete information.","tags":["Game Theory","Bargaining Theory"],"title":"On the Role of Outside Options in Wage Renegotiation","type":"publication"},{"authors":null,"categories":null,"content":"Learning Objectives:\nWhat is LaTeX? Hello World Title Page Sectioning/Appendix/List Reference Font/Page Layout/Line Spacing Mathematics Table/Graphics/Figures Page Margin Line spacing Font Size What is LaTeX? LaTeX is a program that writes document using programming. It is What you see is what you mean (WYSIWYM). Hence, you should not need to bother with formatting when you create the content. You write a document by focusing on the content instead of how it looks. The appearance would be taken care by the software.\nThe program will do it for you or you tell how it should be done. It is standard for academic publishing, and it is also very easy to include mathematics, graphics and tables with professional look.\nBasic setup Hello World Since we are producing a document, we start to tell the program so by using the command \\documentclass{article}. We need to tell what document we are producing. For our purpose, we are focusing on simple documents so that article would suffice. Other frequently used options for documentclass are book and beamer for producing books and presentation slides.\nThen we need to tell which section should be included in the output file by using \\begin{document} and \\end{document}.\nFinally, type the words “Hello World!” between the \\begin{document} and \\end{document}. Whatever text, pictures, or tables is included in between the 2 commands will appear on the document itself, and you can see this on the right-hand side.\n\\documentclass{article}\r\\begin{document}\rHello World!\r\\end{document}\rIf you compile the file, you should get the following pdf output:\nFront Matter Usually a document would start with a title. We just need to tell the program by \\title{}.\nSimilarly, we will usually have author after title. We only need to say \\author{}\nMoreover, we often put a time stamp to the document. To do so, we use \\date{}. Often we use \\today to represent the date to set this up.\nFinally, we need to tell the program where to put these information by using \\maketitle.\nAn example is as follows:\n\\documentclass{article}\r\\title{My important paper}\r\\author{VVIP}\r\\date{\\today}\r\\begin{document}\r\\maketitle\rHello World!\r\\end{document}\rSectioning Next, we move on to sections and subsections. This is important if you wish to divide your text into nice, separate sections for readability.\nWhen you include sections by using \\section{}, LaTex automatically numbers each section for you. You might have seen this in academic papers, this is why people use LaTex when writing their papers. Subsections will take on that particular section’s number, and then include a second number behind to indicate that it is a subsection. We use \\subsection{} here. You can also use \\subsubsection{} if you wish.\nYou code will look like this:\n\\documentclass{article}\r\\title{My important paper}\r\\author{VVIP}\r\\date{\\today}\r\\begin{document}\r\\maketitle\rHello World!\r\\section{Introduction}\rThis is my best paper\r\\section{Model}\rWe will have a lot of math.\r\\subsection{Basic Model}\rMath here is simplier.\r\\subsection{Full Model}\rMath here is crazy.\r\\section{Conclusion}\rMy paper is great!\r\\end{document}\rAppendix Appendix is another section that does not following numeric numbering (but alphabetical ordering). We just need to say \\appendix where the appendix starts.\n\\documentclass{article}\r\\title{My important paper}\r\\author{VVIP}\r\\date{\\today}\r\\begin{document}\r\\maketitle\rHello World!\r\\section{Introduction}\rThis is my best paper\r\\section{Model}\rWe will have a lot of math.\r...\r\\section{Conclusion}\rMy paper is great!\r\\appendix\r\\section{Data Description}\rHere is the appendix.\r\\end{document}\rReference Reference is very easy to manage under latex. Use \\cite{key} to cite paper in the bibligrpahy section enclosed by \\begin{thebibliography} and \\end{thebibliography}:\n\\cite{key1} says lalala \\cite{key2} says blahblahblah\r\\begin{thebibliography}{99}\r\\bibitem{key1} Me, My paper, Trash Bin, P1-100.\r\\bibitem{key2} You, My paper 2, Trash Bin, P2-200.\r\\end{thebibliography}\rThe argument to \\begin{thebibliography}{} is used for setting the hanging indentation of the bibliography items. If you use numeric labels, then the argument should be a single digit (9 is commonly used) if there are less than ten items; two digits (commonly 99) if there are from 10 to 99 items and so on.\nTo create items in the bibliography, we use \\bibitem{}, where the name in the brackets is what you use when you cite in the main text. \\bibitem{key} Name, Year, Journal, Page Number.\nThe \\cite{key} command will automatically extract information from the bibliography where\nkey is the name defined in the thebibliography.\nIf there is no such information in the bibliography, the citations will simply show a question mark ?.\nLists There are three types of list:\nItemize is unnumbered list: each item is denoted by a bullet or a dot. Commonly used for unordered items Enumerate is numbered list or ordered list: each item is denoted by number or letter. Commonly used for ordered items Description is descriptive list: each item is denoted by customized description. Unordered List Undered lists are enclosed by \\begin{itemize} and \\end{itemize} and we use \\item to tell it is an item. A typical example is:\n\\begin{itemize}\r\\item I have an apple.\r\\item You have an orange.\r\\end{itemize}\rOrdered List Likewise, the \\begin{enumerate} and \\end{enumerate} also works the same way, and we also use \\item to create items. The only difference is that enumerate uses numbers, and itemize uses bullet points.\n\\begin{enumerate}\r\\item I have an apple.\r\\item You have an orange.\r\\end{enumerate}\rDeescription List Likewise, the \\begin{decription} and \\end{description} also works the same way, and we also use \\item[name] to create items. The only difference is that we have to tell the name for each item.\n\\begin{description}\r\\item[First] I have an apple.\r\\item[Second] You have an apple.\r\\item[Third] We have two. Nested List Nested lists can be easily created by nesting one list over the other. The below show how one numbered list put inside another numbered list. One can also put an unnumbered list insider another unnumbered list. Moreover, one can also cross-over.\nFirst, we nest an unordered list inside another unordered list:\n\\begin{itemize}\r\\item I have an apple.\r\\item You have an orange.\r\\begin{itemize}\r\\item I have an apple.\r\\item You have an orange.\r\\end{itemize}\r\\end{itemize}\rSecond, we nest an ordered list inside another ordered list:\n\\begin{enumerate}\r\\item I have an apple.\r\\item You have an orange.\r\\begin{enumerate}\r\\item I have an apple.\r\\item You have an orange.\r\\end{enumerate}\r\\end{enumerate}\rOr even mix them together:\n\\begin{enumerate}\r\\item I have an apple.\r\\item You have an orange.\r\\begin{itemize}\r\\item I have an apple.\r\\item You have an orange.\r\\end{itemize}\r\\end{enumerate}\rTables There are two types of table: (1) tabular and (2) table. Tabular environment is to display information in table form while table environment is to allow tabular to float.\nTablular Tables are created using the \\begin{tabular}{} and \\end{tabular} format. We can specify what type of table we want, and LaTex will create it for us.\nInput Meaning l left-justified column c centered column r right-justified column An example is\n\\begin{tabular}{l c r}\r1 \u0026amp; 2 \u0026amp; 3 \\\\ \\hline\r40 \u0026amp; 50 \u0026amp; 60 \\\\\r700 \u0026amp; 800 \u0026amp; 900 \\\\\r\\end{tabular}\rIn the example above, we have used “l c r”, so LaTex creates a table with 3 columns, with the corresponding directional justifications.\nTable LaTeX can help you to determine the location of the table automatically. We start with \\begin{table} and end with \\end{table}\nThere are several choices for placement options after \\begin{table}:\nSpecifier Location h Place the float here t Position at the top of the page. b Position at the bottom of the page. Graphics Similar to table, there are two ways to display graphics: inline or floating.\nIncludegraphics To include graphics files (e.g., jpg and png) in the document, we need to make use of the graphicx package, which is done by using \\usepackage{graphicx}. Note that package has to put before \\begin{document}.\nTo include a graphic file, we use the command \\includegraphics{filename}. Note that the file has to be in the same file as the tex file for this code to work.\nFigure To float the graphics, we start with using \\begin{figure}[placement option] and ends with \\end{figure}. You also need to write down the caption. You may use \\centering to center the graphics.\n\\begin{figure}[htp]\r\\centering\r\\includegraphics[width=\\textwidth]{picture.jpg}\r\\caption{I am a figure.}\r\\end{figure}\rMathematics Inline Mathmatics Mathematics is one of the main reasons to use LaTeX over other word processors. To let the program know that you are working on math, enclose your expression with dollar sign $:\n$ 3^2 + 4^2 = 5^2$\rWhy dollar sign? Typesetting with math was expensive in the old days.\nAlternatively, we can enclose our expression by \\( and \\). The latter way of writing improves readability if we have a complicated mathematical expression.\nGreek Letters We can write symbols by using symbol name, for example \\alpha for $\\alpha$, \\beta for $\\beta$ etc.\nDisplayed equation If we want a display equation, simply use double dollar sign $$:\n$$ 3^2 + 4^2 = 5^2$$\rWhy dobule dollar sign? Typesetting with displayed math was even expensive in the old days.\nAlternatively, we can enclose our expression by \\[ and \\]. The latter way of writing improves readability if we have a complicated mathematical expression.\nNumbered equation If you want the equation to be numbered, enclose it with \\begin{equation} and \\end{equation}:\n\\begin{equation}\r3^2 + 4^2 = 5^2\r\\end{equation}\rIf you want it to be referenced, then add an \\label{key} and use \\ref{key} later.\n\\begin{equation}\\label{NiceEq}\r3^2 + 4^2 = 5^2\r\\end{equation}\rI like Eq (\\ref{NiceEq}) very much. Note that the bracket has to be manually added.\nMulti-line equation To use multi-line equation, we enclose the set of equations by \\begin{align} and \\end{align}. For multi-line equations, we need to separate each line by \\\\ and specify where equations should align by \u0026amp;:\n\\begin{align}\rx +y \u0026amp;= 1 \\\\\rx - y \u0026amp;= 2 \\end{align}\rTheorem To write a formal statement, it is convenient to use amsthm package by \\usepacakge{amsthm}:\n\\usepackage{amsthm}\r\\newtheorem{theorem}{Theorem}\r\\begin{theorem}\\label{NiceThm}\rOne plus one is two! $$1+1=2.$$\r\\end{theorem}\rI like Theorem \\ref{NiceThm} very much. Page Layout Page Margin The geometry package allows you to change the margins of the page, if you wish to.\n\\usepackage{geometry}\rTo change the individual sides’ margins, simply use \\geometry{margin=1.1in}. Take note that this should be put before the \\begin{document} since it is for the whole document. For example, we have\n\\usepackage{geometry}\r\\geometry{maring=1.1in}\rTo specify margins on four sides, we use \\geometry{left=2.5in, right=2.5in, top=2.5in, bottom=2.5in}\n\\usepackage{geometry}\r\\geometry{left=2.5in, right=2.5in, top=2.5in, bottom=2.5in}\rVertical spacing Command Meaning \\ linebreak \\newpage starts a new page \\smallskip create small vertical space \\medskip create medium vertical space \\bigskip create big vertical space \\vspace{4in} create vertical space of 4 inches Horizontal spacing Command Meaning \\noindent suppresses paragraph indentatio \\enskip horizontal space of half of the size of letter M \\quad horizontal space of one of the size of letter M \\qquad horizontal space of two of the size of letter M \\hspace{2cm} horizontal space 2cm \\hfill horizontal space to make the line right-aligned Paragraph Layout Line spacing The setspace package allows you to edit the line spacing between each line for overall text, similar to Word’s function. Options include \\singlespacing, \\onehalfspacing, \\doublespacing.\n\\usepackage{setspace}\r\\singlespacing\r\\onehalfspacing\r\\doublespacing\rText Alignment Default of text is justified.\nFor centered text, enclosed \\begin{center} and \\end{center} For right-aligned text, enclosed \\begin{flushright} and \\end{flushright} For left-aligned text, enclosed \\begin{flushleft} and \\end{flushleft} \\begin{center}\rI am centered text.\r\\end{center}\r\\begin{flushright}\rI am right-aligned text.\r\\end{flushright} \\begin{flushleft}\rI am left-aligned text.\r\\end{flushleft}\rFont Layout Global font Size To change font size of the whole document, we define it the premable:\n\\documentclass[12pt]{article}\rAs shown above, we can change the font size used throughout the paper by changing the number here. In this example, font size is 12, and we can change it by just typing another number to replace the 12. If you want other size, you can choose 10 or 11.\n\\documentclass[10pt]{article}\r\\documentclass[11pt]{article}\rLocal font size To change the font size only for some part of the text, we use some relative size commands (from small to big):\n\\Huge\r\\LARGE\r\\Large\r\\large\r\\normalsize\r\\small\r\\footnotesize\r\\scriptsize\r\\tiny\rHere is the example:\n\\begin{document}\rYou know what? I am an honor student of economics of NUS. Our school is the {\\Huge best} in {\\tiny Asia}.\rWhat does that mean? I am {\\large Best} of {\\LARGE best}.\rReally? {\\Huge Yes}.\\footnote{Seriously?}\r\\end{document}\rTechnically, it is the mapping of the relative size command:\nCommand 10pt 11pt 12pt \\tiny 5pt 6pt 6pt \\scriptsize 7pt 8pt 8pt \\footnotesize 8pt 9pt 10pt \\small 9pt 10pt 11pt \\normalsize 10pt 11pt 12pt \\large 12pt 12pt 14pt \\Large 14pt 14pt 17pt \\LARGE 17pt 17pt 20pt \\huge 20pt 20pt 25pt \\Huge 25pt 25pt 25pt Sometimes, we want to exactly match directly. We can use \\fontsize{size}{leading}\\selectfont. For example, \\fontsize{10}{12}\\selectfont means 10pt type with 12pt leading.\nFont color To change color, use package color and then enclosed the passage with brace.\n\\usepackage{color}\r{\\color{red} abc is 123.}\rBasic font transformation For most daily usages, there are six commands (italic, bold, small cap, slant font, typewriter):\n\\textit{italic} \\textbf{boldface}\r\\textsc{small cap}\r\\textsl{slant font}\r\\textsf{Sans Serif}\r\\texttt{typewriter}\rFor more details, see below discussion on font family, font series, and font shape.\nFont emphasis Font emaphsis involves underline, italic and upper case:\nCommand Emphasis \\underline{\u0026hellip;} underline \\emph{\u0026hellip;} Italic \\uppercase{\u0026hellip;} all capital letters Highlighting and strikeout are not included in standard package. To use it, we need to use the packages color and soul:\n\\usepackage{color,soul}\r\\hl{I am highlighted}\r\\sout{haha}\rFont Family Under computer modern font family, roman (or serif typeface) font is used. We can use sans serif and typewriter font family.\nCommand Switch font family \\texttt{\u0026hellip;} {\\ttfamily \u0026hellip;} typewriter \\textsf{\u0026hellip;} {\\sffamily \u0026hellip;} san serif font \\textrm{\u0026hellip;} {\\rmfamily\u0026hellip;} roman font Font Series Font series mean how dark the pen and how width of the pen.\nselectfont Command Switch font series \\fontseries{m} medium \\fontseries{b} \\textbf{\u0026hellip;} {\\bfseries \u0026hellip;} bold \\fontseries{bx} bold extended \\fontseries{sb} semi-bold \\fontseries{c} condensed Font shape Font shape is the form of letter:\nSelectfont Command Switch Shape \\fontshape{it} \\textit{\u0026hellip;} {\\itshape \u0026hellip;} italics \\fontshape{sl} \\textsl{\u0026hellip;} {\\textsl \u0026hellip;} slant \\fontshape{sc} \\textrm{\u0026hellip;} {\\scshape \u0026hellip;} small capital \\fontshape{ui} upright italic \\fontshape{ol} outline ","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"a209f90c9618c3f1d54640db0ad27fac","permalink":"/programming/latex/basiclatex/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/latex/basiclatex/","section":"programming","summary":"Learning Objectives:\nWhat is LaTeX? Hello World Title Page Sectioning/Appendix/List Reference Font/Page Layout/Line Spacing Mathematics Table/Graphics/Figures Page Margin Line spacing Font Size What is LaTeX? LaTeX is a program that writes document using programming.","tags":null,"title":"Basic LaTeX","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nBeamer package to make slides:\nTitle Page Content Slide List Figure First page Presentation slides can be easily created using documentclass bemaer. The first page introduction slides is exactly the same as when we write an article.\n\\documentclass{beamer}\r\\title{Hello}\r\\author{VIP \\and VVIP}\r\\date{\\today}\r\\begin{document}\r\\maketitle\r\\end{document}\rContent For the rest of document, the only difference is to specify from where to where a slide starts and ends. To start, use \\begin{frame} to start slide and \\end{frame} to end slide.\n\\documentclass{beamer}\r\\begin{document}\r\\begin{frame}\r\\frametitle{Happy}\rHello World!\r\\end{frame}\r\\end{document}\rList Very often, bullet points are used in slides. We can use itemize, enumerate, and description lists.\n\\begin{frame}\r\\frametitle{Conclusion}\r\\begin{itemize}\r\\item lalala\r\\item hahaha\r\\end{itemize}\r\\end{frame}\rPicture To include picture, we also use includegraphics{}.\n\\begin{frame}\r\\frametitle{Visual}\r\\includegraphics{haha.jpg}\r\\end{frame}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"7dc3fee214e17b6a96e9bd8a55586f20","permalink":"/programming/latex/beamer/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/latex/beamer/","section":"programming","summary":"Learning Objectives:\nBeamer package to make slides:\nTitle Page Content Slide List Figure First page Presentation slides can be easily created using documentclass bemaer. The first page introduction slides is exactly the same as when we write an article.","tags":null,"title":"Beamer","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nBeamer package to make slides:\nTitle Page Content Slide List Figure First page Presentation slides can be easily created using documentclass bemaer. The first page introduction slides is exactly the same as when we write an article.\n\\documentclass{beamer}\r\\title{Hello}\r\\author{VIP \\and VVIP}\r\\date{\\today}\r\\begin{document}\r\\maketitle\r\\end{document}\rContent For the rest of document, the only difference is to specify from where to where a slide starts and ends. To start, use \\begin{frame} to start slide and \\end{frame} to end slide.\n\\documentclass{beamer}\r\\begin{document}\r\\begin{frame}\r\\frametitle{Happy}\rHello World!\r\\end{frame}\r\\end{document}\rList Very often, bullet points are used in slides. We can use itemize, enumerate, and description lists.\n\\begin{frame}\r\\frametitle{Conclusion}\r\\begin{itemize}\r\\item lalala\r\\item hahaha\r\\end{itemize}\r\\end{frame}\rPicture To include picture, we also use includegraphics{}.\n\\begin{frame}\r\\frametitle{Visual}\r\\includegraphics{haha.jpg}\r\\end{frame}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"e3405a9b2c4cfd848961fca5135ec9a6","permalink":"/programming/tikz/beamer/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/beamer/","section":"programming","summary":"Learning Objectives:\nBeamer package to make slides:\nTitle Page Content Slide List Figure First page Presentation slides can be easily created using documentclass bemaer. The first page introduction slides is exactly the same as when we write an article.","tags":null,"title":"Beamer","type":"docs"},{"authors":null,"categories":null,"content":"\rI have developed the following R package to determine candle stick patterns. You can check out more at GitHub.\nCandleStickPattern\rThis package finds common candle stick patterns using daily data (OHLC data).\nOverview\rThe current version package covers the following patterns:\nDoji family (1-day pattern)\rDoji doji()\rDragonfly Doji dragonfly.doji()\rGravestone Doji gravestone.doji()\rHammer family (2-day pattern)\rHammer/Hangman hammer()\rInverted Hammer/Shooting Star inverted.hammer\rEngulfing family (2-day pattern)\rBullish Engulfing bullish.engulf()\rBearish Engulfing bearish.engulf()\rHarami family (2-day pattern)\rBullish Harami bullish.engulf()\rBearish Harami bearish.harami()\rReversal family (2-day pattern)\rPiercing line piercing.line()\rDark cloud Cover dark.cloud.cover()\rKicking family (2-day pattern)\rKick up kick.up()\rKick down kick.down()\rThree-in-a-row (3-day pattern)\rThree white soldiers three.white.soliders()\rThree Black crows three.black.crows()\rStar (3-day pattern)\rMorning star morning.star()\rEvening star evening.star()\rThree Method (5-day pattern)\rRising three rising.three()\rFalling three falling.three()\rMoreover, it captures trends using exponential moving average (EMA):\nEMA trends\rup trend up.trend()\rdown trend down.trend()\rInstallation\rTo install this package, it is the easist to install devtools package first:\ninstall.packages(\u0026quot;devtools\u0026quot;)\rNow load the package using library()\nlibrary(devtools)\rThen we can use the install_github to get the package directly:\ninstall_github(\u0026quot;kochiuyu/CandleStickPattern\u0026quot;)\rFinally, we load the package using library()\nlibrary(CandleStickPattern)\rUsage\rYou can see the details of how each function works in vignette\nThe following demonstrates the usage of the function doji() using Microsoft (ticker: MSFT). We use quantmod package to download data:\nlibrary(quantmod)\rgetSymbols(\u0026quot;MSFT\u0026quot;, from = \u0026quot;2011-07-08\u0026quot; , to = \u0026quot;2011-07-19\u0026quot;)\rWe first plot the candle chart first:\ncandleChart(MSFT,theme=\u0026#39;white\u0026#39;)\rWe can see that July 11, 12, 13, and 18 are likely to follow doji pattern. Let us see if we can capture using the function doji:\ndoji(MSFT)\r## Warning: timezone of object (UTC) is different than current timezone ().\r## doji\r## 2011-07-08 FALSE\r## 2011-07-11 TRUE\r## 2011-07-12 TRUE\r## 2011-07-13 TRUE\r## 2011-07-14 FALSE\r## 2011-07-15 FALSE\r## 2011-07-18 TRUE\r## 2011-07-19 FALSE\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"a49e289464daee9e8150aa6bbf279fff","permalink":"/programming/r-programming/package/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/package/","section":"programming","summary":"I have developed the following R package to determine candle stick patterns. You can check out more at GitHub.\nCandleStickPattern\rThis package finds common candle stick patterns using daily data (OHLC data).","tags":null,"title":"Candle Stick","type":"docs"},{"authors":null,"categories":null,"content":"\rno\rIntroduction\rLearning Objectives:\nFamiliarize with RStudio interface\nUse interactive console and code editor\nAssignment statement\nHello world\nSave R program and R data files\nAdd comment to your code\nInteractive console\rIn the interactive console located at the bottom left window in RStudio, we can see the \u0026gt; symbol. If you type a command and press return, R will evaluate it and print the result for you.\nTo start, let us try to use it as a calculator.\n6 + 9\r## [1] 15\r7-4\r## [1] 3\r3*9\r## [1] 27\rCode Editor\rCode editor is located at the top left window in RStudio. If it is not shown you can *File \u0026gt; New File \u0026gt; R Script.\nIn the code editor, type the code and click``Run’’ on the top right of the window. Then you can see the code will be copied to the interactive console.\nAssignment\rThe left is assigned to the value on the right. For example, x - 15 implies that the value 15 is assigned to a variable called x. Note: Variables are case-sensitive.\nx \u0026lt;- 15\rx -1\r## [1] 14\rHello World\rTo print an output, simply use the function print()\nprint(\u0026#39;Hello Word!\u0026#39;)\r## [1] \u0026quot;Hello Word!\u0026quot;\rSometimes we would also want to display the value of a variable:\nx \u0026lt;- 4\ry \u0026lt;- 5\rz \u0026lt;- x+y\rprint(z)\r## [1] 9\rHowever, we want to print the description of the variable too. Then we have to use function cat() to combine description and output.\nx \u0026lt;- 4\ry \u0026lt;- 5\rcat(\u0026#39;The sum of x and y is\u0026#39;, x+y)\r## The sum of x and y is 9\rScript and Data Files\rScript files have file association .R while the data can be stored in .RData.\nTo save and open .R file, simply save and open using the RStudio.\nTo save and open RData file, we have the following code:\nsave.image(\u0026quot;XXX.Rdata\u0026quot;)\rload(\u0026quot;XXX.Rdata\u0026quot;)\rReadability\rComment is important to improve readability for other users (and for yourself in a few weeks later!).\n# A single line comment begins\rSpacing is also important. Try not to make your code packed together.\nAnother tips is to use indentation. A short cut is Ctrl + I in RStudio.\n","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"6a02c37558acc3e456a240e6f39faf9d","permalink":"/programming/r-programming/ta-with-r-ch1/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r-ch1/","section":"programming","summary":"no\rIntroduction\rLearning Objectives:\nFamiliarize with RStudio interface\nUse interactive console and code editor\nAssignment statement\nHello world\nSave R program and R data files\nAdd comment to your code","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":"\rno\rWorking with Data\rWe always need to clean data before working. Even data downloaded from the database is not perfect. Sometimes there are missing data. Moreover, when data are from database, we need to combine them before using.\nLearning Objectives:\nFive basic data types (logical, integer, numeric, complex, character)\nTwo extended data types (date, factor)\nFive basic data structure (vector, matrix, array, data.frame, list)\nBasic data management\nAdvanced data management with dplyr and reshape\nDownload world bank data with wbstats\nImport and export external data through csv (comma-delimited) files\nData Type\rThere are five basic data types:\nlogical\rinteger\rnumeric\rcomplex\rcharacter.\rLogical\rLogical data type can either be TRUE and FALSE. It corresponds to integer 0 and 1.\nx \u0026lt;- TRUE\rx\r## [1] TRUE\ry \u0026lt;- FALSE\ry\r## [1] FALSE\rclass(x)\r## [1] \u0026quot;logical\u0026quot;\rNote that We use the function class() to see the data type.\nInteger\rInteger data type covers all whole numbers. It is represented by number and letter L: 1L, 2L, 3L.\nx \u0026lt;- 1L\rx\r## [1] 1\rclass(x)\r## [1] \u0026quot;integer\u0026quot;\rNumeric\rNumeric data type covers all real numbers.\nx \u0026lt;- 2.6\rx\r## [1] 2.6\rclass(x)\r## [1] \u0026quot;numeric\u0026quot;\rComplex\rComplex data type covers all complex number.\nx \u0026lt;- 2 +5i\rx\r## [1] 2+5i\rclass(x)\r## [1] \u0026quot;complex\u0026quot;\rCharacter\rCharacter data type covers all text strings.\nx \u0026lt;- \u0026quot;Hello World\u0026quot;\rx\r## [1] \u0026quot;Hello World\u0026quot;\rclass(x)\r## [1] \u0026quot;character\u0026quot;\rData type conversion\rOne common operation on data is to convert from one data type to another.\nOne frequently used conversion is between character and numeric. It is because numeric data may contain comma.\nTo convert string to number, we use as.numeric():\nas.numeric(\u0026quot;12000\u0026quot;)\r## [1] 12000\r# When converting ``12,000\u0026#39;\u0026#39;, need to replace comma\ras.numeric(gsub(\u0026quot;,\u0026quot;, \u0026quot;\u0026quot;, \u0026quot;12,000\u0026quot;))\r## [1] 12000\rHere, the function gsub is to find the comma and replace with null string where gsub stands for general substitution\nTo convert number to character, we may use as.character():\nas.character(1200)\r## [1] \u0026quot;1200\u0026quot;\rDate\rDate data type covers standard calendar date. It is converted from character data type. One complication is that we need to specify the format since there are a lot of possible way to express it.\nFor day, we use %d for day number (01-31).\nFor month, we use %m for month number (00-12), %b for abbreviated month (e.g. Jan), and %B for unabbreviated month (e.g. January)\nFor year, we use %y for two-digit year (e.g., 14) and %Y for four-digit year (e.g., 2014)\nas.Date(\u0026quot;21Jan2004\u0026quot;, \u0026quot;%d%b%Y\u0026quot;)\r## [1] \u0026quot;2004-01-21\u0026quot;\ras.Date(\u0026quot;21/01/04\u0026quot;, \u0026quot;%d/%m/%y\u0026quot;)\r## [1] \u0026quot;2004-01-21\u0026quot;\ras.Date(\u0026quot;21-01-04\u0026quot;, \u0026quot;%d-%m-%y\u0026quot;)\r## [1] \u0026quot;2004-01-21\u0026quot;\rData Structure\rIn R, you can use different types of data structures, depending on your needs:\nVector,\rMatrix,\rArray,\rDataframe, and\rList.\rThe type of data structure used generally differs by how information is stored and displayed, and also accessed or edited.\nVector\rVector is the most common and basic data structure in R.\nVector is simply data of the same data type ordered in a list.\nThe simplest vector is an integer vector. For a vector of integers from 1 to 5, we just need to use 1:5.\nx \u0026lt;- 1:5\rx\r## [1] 1 2 3 4 5\rSometimes, we want to repeat the same number several times. We use the function rep(). The following code repeat 0 five times.\nx \u0026lt;- rep(0, 5)\rx\r## [1] 0 0 0 0 0\rThis is usually a good way to initialize a vector. Slightly more general way to create a vector of integer is to use seq().\nFor integers from 4 to 10 with each step being 2, we have ``seq(4,10,by=2)’’. If the step is negative, then it is decreasing.\nx \u0026lt;- seq(4,10,by=2)\rx\r## [1] 4 6 8 10\rx \u0026lt;- seq(21,6,by=-3)\rx\r## [1] 21 18 15 12 9 6\rTo create a generic vector, we use the function c(). We input elements inside are separated by commas.\nWe first create a generic integer vector.\nx \u0026lt;- c(1L, -1L, 3L, 2L)\rx\r## [1] 1 -1 3 2\rThen we create a generic numeric vector.\nx \u0026lt;- c(1, -1, 3.5, 2)\rx\r## [1] 1.0 -1.0 3.5 2.0\rFinally, we create a generic character vector.\nx \u0026lt;- c(\u0026quot;Apple\u0026quot;, \u0026quot;Banana\u0026quot;)\rx\r## [1] \u0026quot;Apple\u0026quot; \u0026quot;Banana\u0026quot;\rWe can also create a vector of logical.\nx \u0026lt;- c(TRUE,FALSE)\rx\r## [1] TRUE FALSE\rIt is easy to add new element to a vector.\nx \u0026lt;- c(1, -1, 3.5, 2)\rx \u0026lt;-c(x, 5) # add new element\rx\r## [1] 1.0 -1.0 3.5 2.0 5.0\rSince R is a vectorized program, applying mathematical operators to the vector will take effect on all elements inside the vector.\nx \u0026lt;- c(1, -1, 3.5, 2)\rx + 2 #every element plus 2\r## [1] 3.0 1.0 5.5 4.0\rx - 2 #every element minus 2\r## [1] -1.0 -3.0 1.5 0.0\rExtracting elements is using the operator []. To get the third element, we have x[3]. To get first three elements, we use x[1:3]. To get the first, third and forth elements, we use x[c(1,3,4)].\nx \u0026lt;- c(1, -1, 3.5, 2)\rx[3] #Pick out the 3rd element\r## [1] 3.5\rx[1:3] #Pick out the first three elements\r## [1] 1.0 -1.0 3.5\rx[c(1,3,4)] #Pick out 1st, 3rd and 4th elements\r## [1] 1.0 3.5 2.0\rSize of a vector can be found by using length()\nx \u0026lt;- 1:10\rlength(x)\r## [1] 10\rFactor\rA factor vector isan integer vector converted from character vectors or numeric vector. It was created to save memory space because long strings converted to numbers, and only mapping is needed.\nA factor vector is created from character vector using factor().\nx \u0026lt;- c(\u0026quot;Apple\u0026quot;, \u0026quot;Banana\u0026quot;,\u0026quot;Apple\u0026quot;)\rx \u0026lt;- factor(x)\rx\r## [1] Apple Banana Apple ## Levels: Apple Banana\rWhile memory is usually not an issue these days, factor vector is sometimes converted from numeric vector to construct as categorical variable.\nThe following divides data into three groups with the same length.\nx \u0026lt;- c(1,3,7,10)\rx \u0026lt;- cut(x,3)\rx\r## [1] (0.991,4] (0.991,4] (4,7] (7,10] ## Levels: (0.991,4] (4,7] (7,10]\rSometimes we want to have label to avoid make it easier.\nx \u0026lt;- c(1,3,7,10)\rx \u0026lt;- cut(x,2,labels=c(\u0026quot;L\u0026quot;,\u0026quot;H\u0026quot;))\rx\r## [1] L L H H\r## Levels: L H\rSometimes we may use quartile to cut instead. However, in this case, we need to use the option include.lowest=TRUE to avoid data missing.\nx \u0026lt;- c(1,3,7,10)\rx \u0026lt;- cut(x, quantile(x, c(0, 1/2, 1)),\rinclude.lowest = TRUE)\rx\r## [1] [1,5] [1,5] (5,10] (5,10]\r## Levels: [1,5] (5,10]\rWe can add label to each group.\nx \u0026lt;- c(1,3,7,10)\rx \u0026lt;- cut(x, quantile(x, c(0, 1/2, 1)),\rinclude.lowest = TRUE,\rlabels=c(\u0026quot;L\u0026quot;,\u0026quot;H\u0026quot;))\rx\r## [1] L L H H\r## Levels: L H\rMatrix\rMartrix is a two-dimensional array.\nTo define a matrix from a vector, the syntax is matrix(vector, nrow, ncol, byrow). byrow is the way we fill the array. It is either TRUE or FALSE.\nThe following code fills the matrix by column.\nx\u0026lt;- matrix(1:20, nrow=5, ncol=4, byrow=FALSE)\rx\r## [,1] [,2] [,3] [,4]\r## [1,] 1 6 11 16\r## [2,] 2 7 12 17\r## [3,] 3 8 13 18\r## [4,] 4 9 14 19\r## [5,] 5 10 15 20\rThe following code fills the matrix by row.\nx\u0026lt;- matrix(1:20, nrow=5, ncol=4, byrow=TRUE)\rx\r## [,1] [,2] [,3] [,4]\r## [1,] 1 2 3 4\r## [2,] 5 6 7 8\r## [3,] 9 10 11 12\r## [4,] 13 14 15 16\r## [5,] 17 18 19 20\rExtracting elements from matrix is similar to extraction in vector.\nx[2,] #the second row\r## [1] 5 6 7 8\rx[,1] #the first column\r## [1] 1 5 9 13 17\rx[1,2] #first row, second column\r## [1] 2\rOne useful operation on matrix is to swap columns and row by t(), which means transpose.\ny \u0026lt;- t(x)\ry\r## [,1] [,2] [,3] [,4] [,5]\r## [1,] 1 5 9 13 17\r## [2,] 2 6 10 14 18\r## [3,] 3 7 11 15 19\r## [4,] 4 8 12 16 20\rSize of matrix is rather complicated since it has two dimensions. There are three basics operations:\nlength(): total number of elements\rncol(): total number of columns\rnrow(): total number of rows\rz \u0026lt;- matrix(1:6,ncol=2,byrow=T)\rlength(z)\r## [1] 6\rncol(z)\r## [1] 2\rnrow(z)\r## [1] 3\rArray\rArray behaves like matrix but it is multi-dimensional (more than 2). To define arrary from vector, the syntax is array(vector/input, c(nrow, ncol, nmatrix))\nx\u0026lt;- array(1:12, c(2,3,2))\rx\r## , , 1\r## ## [,1] [,2] [,3]\r## [1,] 1 3 5\r## [2,] 2 4 6\r## ## , , 2\r## ## [,1] [,2] [,3]\r## [1,] 7 9 11\r## [2,] 8 10 12\rDataframe\rDataframe is most useful form of data type in R. It behaves like matrix but can contain strings (letters/words). To visualize a dataframe, one may consider a standard Excel spreadsheet. Each column is a vector. Each spreadsheet is a dataframe – it is a collection of columns of cells.\ndf \u0026lt;- data.frame(c(1,2),\rc(\u0026quot;Good\u0026quot;, \u0026quot;Bad\u0026quot;))\rdf\r## c.1..2. c..Good....Bad..\r## 1 1 Good\r## 2 2 Bad\rNote that first rows are the columns names. R will automatically name the column based on the elements inside that vector. However, it looks ugly. We should give names to rows and columns to improve readability of the data.\ncolnames(df) \u0026lt;-c(\u0026quot;GPA\u0026quot;,\u0026quot;outcomes\u0026quot;)\rrownames(df) \u0026lt;-c(\u0026quot;John\u0026quot;, \u0026quot;Mary\u0026quot;)\rdf\r## GPA outcomes\r## John 1 Good\r## Mary 2 Bad\rTo skip having to rename the columns, we can simply specify the column name when creating the dataframe.\ndf \u0026lt;- data.frame(GPA = c(1,2), outcomes = c(\u0026quot;Good\u0026quot;, \u0026quot;Bad\u0026quot;)) df\r## GPA outcomes\r## 1 1 Good\r## 2 2 Bad\rOne can first define vectors and then define dataframe based on the vectors.\nx \u0026lt;- c(2,4)\ry \u0026lt;- c(1,3)\rdf \u0026lt;- data.frame(x,y) df\r## x y\r## 1 2 1\r## 2 4 3\rA more compact code can be done by defining the vectors and the dataframe at the same time.\ndf \u0026lt;- data.frame(x=c(2,4),y=c(1,3))\rdf\r## x y\r## 1 2 1\r## 2 4 3\rCall particular elements in dataframe share the same syntax as in matrix or array.\ndf$x #vector x\r## [1] 2 4\rdf[1] #1st column\r## x\r## 1 2\r## 2 4\rdf[1,] #1st row\r## x y\r## 1 2 1\rdf[,1] #1st column\r## [1] 2 4\rdf[2,1] #2nd row, 1st column\r## [1] 4\rTo remove particular vector from dataframe, simplify assume NULL to it.\ndf$x \u0026lt;- NULL\rdf\r## y\r## 1 1\r## 2 3\rNew columns can be created directly.\ndf \u0026lt;- data.frame(x=c(2,4),y=c(1,3))\rdf$z \u0026lt;- df$x + df$y\rdf\r## x y z\r## 1 2 1 3\r## 2 4 3 7\rExercise\rCreate two new numeric vectors x and y.\rCreate a dataframe from two newly created vectors.\rCreate a new column in the dataframe that \\(w = x - 2 \\times y\\).\rList\rList is the most comprehensive data type. It can contain anything: vector, array, matrix and even dataframe.\nx \u0026lt;- c(2, 3, 5) df \u0026lt;- data.frame(y=c(2,3,4),z=c(1,3,5)) name \u0026lt;- c(\u0026quot;NUS\u0026quot;, \u0026quot;NTU\u0026quot;, \u0026quot;SMU\u0026quot;) x \u0026lt;- list(x,df,name)\rTo access the first element in the list x. Use x[[1]]. Similarly for [[2]].\nx[[1]]\r## [1] 2 3 5\rx[[2]]\r## y z\r## 1 2 1\r## 2 3 3\r## 3 4 5\rFunctions\rFunctions take in inputs, execute commands, and return output. They are extremely useful because if we have to make a particular calculation multiple times, we can just program a function and reuse it in the future. For example, sum is a function that takes in inputs of numbers, and returns the value of all the numbers added together.\nDefining a function\rThe most basic function is a function that has does not return any value.\nHello\u0026lt;- function (...) {\rcat(\u0026quot;Hello World\u0026quot;)\r}\rHello()\r## Hello World\rNow, we define a function called myadd that adds 2 input numbers together and returns the total value.\nmyadd \u0026lt;- function (x, y) {\rreturn(x+y)\r}\rmyadd(3, 4)\r## [1] 7\rFrom the example, we can see that a function consists of 2 parts, the 1st being the inputs, and the 2nd being the body of the function. When you define a function, you need to specify how many inputs the function requires. How you name them is up to you, but it is likely you will need to use the names of the inputs in the body of the function. The body of the function is where you write the code for what you want the function to do with the inputs. Do not forget to include a return statement, otherwise there will be no output shown in the console for the function.\nWe can also set default value of a function:\nmyadd \u0026lt;- function (x, y=1) {\rreturn(x+y)\r}\rmyadd(3)\r## [1] 4\rmyadd(3, 4)\r## [1] 7\rNow also that since R is a vectorized program, function can take vector as imputs:\nmyadd \u0026lt;- function (x, y) {\rreturn(x+y)\r}\rmyadd(1:3, 3:5)\r## [1] 4 6 8\rExercise\rWrite the following function:\ntake three numerical numbers\rcalculate the product of three numerical inputs\rdisplay the value\rreturn the value as function output\rAssignment of function outputs\rYou can also store the output of a function into another variable, by assigning the output to that variable.\nFor example, result stores the value of add(3,4), which is 7. When you call result, you will then get the value 7.\nresult \u0026lt;- myadd(3, 4)\rresult ## [1] 7\rHelp on function\rType a function’s name at the console, you can see the code behind. If you Type “? function’s name”, you will see its help file as in Figure ??.\n? sum\rSource code of a function\rIf you type the function name without bracket, then it will show the code of the function.\nmyadd \u0026lt;- function (x, y) {\rreturn(x+y)\r}\rmyadd\r## function (x, y) {\r## return(x+y)\r## }\rFinancial Data\rFinancial data are usually time series. Data are often indexed by date and even time. Date are usually converted from character data type using functionas.Date() whiel date-time data are converted using function as.POSIXct().\nWithout time, the program will put in hours.\nas.POSIXct(\u0026quot;03-12-2014\u0026quot;,format=\u0026quot;%d-%m-%Y\u0026quot;)\r## [1] \u0026quot;2014-12-03 +08\u0026quot;\rThe package xts is useful to handle financial data.\ninstall.packages(\u0026quot;xts\u0026quot;)\rlibrary(xts)\rCreate an xts object using the xts() function:\ndates\u0026lt;-as.Date(c(\u0026quot;2016-01-01\u0026quot;,\u0026quot;2016-01-02\u0026quot;,\r\u0026quot;2016-01-03\u0026quot;))\rprices \u0026lt;- c(1.1,2.2,3.3)\rx \u0026lt;- xts(prices, order.by=dates)\rEach observation has time timestamp.\nx[1]\r## [,1]\r## 2016-01-01 1.1\rIt is often more useful to be more specific about timing instead of number of row. Then we just need to supply the time stamp directly. Note that we will a slash to separate starting time and ending time:\nx[\u0026#39;2016-01-02/2016-01-03\u0026#39;]\r## [,1]\r## 2016-01-02 2.2\r## 2016-01-03 3.3\rWith timestamp, we can find the first and last times:\nfirst(x)\r## [,1]\r## 2016-01-01 1.1\rlast(x)\r## [,1]\r## 2016-01-03 3.3\rTo get time stamp, we use time() and to get the value, we use as.numeric():\ntime(x[1])\r## [1] \u0026quot;2016-01-01\u0026quot;\ras.numeric(x[1])\r## [1] 1.1\rThe most common time series operation is lag(). It moves your data ahead.\nlag1_x \u0026lt;- lag(x,1)\rlag1_x\r## [,1]\r## 2016-01-01 NA\r## 2016-01-02 1.1\r## 2016-01-03 2.2\rlag2_x \u0026lt;- lag(x,2)\rlag2_x\r## [,1]\r## 2016-01-01 NA\r## 2016-01-02 NA\r## 2016-01-03 1.1\rThe reason that you need to use lag is that first difference cannot be calculated by x[i]-x[i-1]. Instead we need to use x-lag(x)\nTo transfer timestamp to another vector, we use reclass(). The following code copy the timestamp from x to y:\ny \u0026lt;- c(1,0,-1)\ry \u0026lt;- reclass(y,x)\ry\r## [,1]\r## 2016-01-01 1\r## 2016-01-02 0\r## 2016-01-03 -1\rTwo xts objects with the same timestamps can be combined using cbind()\nz \u0026lt;- cbind(x,y)\rz\r## x y\r## 2016-01-01 1.1 1\r## 2016-01-02 2.2 0\r## 2016-01-03 3.3 -1\rSometimes, some entries in the data are missing and there will be calculation problems for time series calculation (e.g. lag operator Lag()). There are using two ways to deal with the problem:\nna.omit() to take away those data points, and\rna.approx() to to take linear approximation.\rNote that na.approx() is only available (and also only meaningful) for time series data.\nData Management\rWe first cover data format conversion since sometimes the data is not in the right format. Second, we will learn how to load a built-in dataset to illustrate how to take a snapshot of the data, sorting the data, selecting observation, selecting variable, subseting the dataset, and merging dataframes. Then we will learn two useful packages: dplyr and reshape. Finally, we apply it to world bank data.\nLoading built-in dataset\rLoad a standard dataset and store it as a dataframe\ndf \u0026lt;- data.frame(mtcars)\rPeeping Data\rWe may use the head to checking the top rows and tail to check bottom rows.\nx \u0026lt;- 1:5\ry \u0026lt;- seq(5,1,-1)\rz \u0026lt;- c(1,1,2,2,3)\rdf \u0026lt;- data.frame(x,y,z)\rhead(df, 3) #first 3 row\r## x y z\r## 1 1 5 1\r## 2 2 4 1\r## 3 3 3 2\rtail(df, 3) #last 3 row\r## x y z\r## 3 3 3 2\r## 4 4 2 2\r## 5 5 1 3\rSorting Data\rSorting data by giving multiple criteria using order.\nThe following code first sort the data by y (in an ascending order) and then break tie using disp if they have the same z.\nnewdf \u0026lt;- df[order(df$y,df$z),]\rnewdf\r## x y z\r## 5 5 1 3\r## 4 4 2 2\r## 3 3 3 2\r## 2 2 4 1\r## 1 1 5 1\rJoining dataframes\rTo merge two dataframes horizontally by joining through an unique identifier, one may use merge().\ndf1\u0026lt;-data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;), x=c(1,2))\rdf2\u0026lt;-data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;), y=c(3,4))\rdf3 \u0026lt;-merge(df1,df2,by=\u0026quot;ID\u0026quot;)\rdf3\r## ID x y\r## 1 a 1 3\r## 2 b 2 4\rIf two dataframes are just to join horizontally without an unique identifier, then use cbind().\ndf1\u0026lt;-data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;), x=c(1,2))\rdf2\u0026lt;-data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;), y=c(3,4))\rdf3 \u0026lt;-cbind(df1,df2)\rdf3\r## ID x ID y\r## 1 a 1 a 3\r## 2 b 2 b 4\rStacking Dataframe\rIf dataframes are just to join vertically, then use rbind(). Note that rbind requires dataframes have the same columns names.\ndf1\u0026lt;-data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;),\rx=c(1,2), y=c(1,2))\rdf2\u0026lt;-data.frame(ID=c(\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;), x=c(3,4), y=c(1,2))\rdf3\u0026lt;-data.frame(ID=c(\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;),\rx=c(5,6), y=c(1,2))\rdf4 \u0026lt;-rbind(df1,df2,df3)\rdf4\r## ID x y\r## 1 a 1 1\r## 2 b 2 2\r## 3 c 3 1\r## 4 d 4 2\r## 5 e 5 1\r## 6 f 6 2\rSelecting Variables\rThe following code selecting columns 1 to 3.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- df[,c(1:3)]\rhead(newdf,3)\r## ID x y\r## 1 a 1 1\r## 2 b 2 2\r## 3 c 3 1\rThe following code drops columns 1 to 2.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- df[,-c(1:2)]\rhead(newdf,3)\r## y z\r## 1 1 6\r## 2 2 5\r## 3 1 4\rWe can delete columns by name.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rdf$z\u0026lt;- NULL\rhead(df,3)\r## ID x y\r## 1 a 1 1\r## 2 b 2 2\r## 3 c 3 1\rSelecting Observation based on row number\rThe functions head and tail allows as to directly obtain rows from the top and bottom.\nThe following code selects the top 3 observations.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf\u0026lt;-head(df,3)\rnewdf\r## ID x y z\r## 1 a 1 1 6\r## 2 b 2 2 5\r## 3 c 3 1 4\rThe following code drops the last 2 observations.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf\u0026lt;-head(df,-2)\rnewdf\r## ID x y z\r## 1 a 1 1 6\r## 2 b 2 2 5\r## 3 c 3 1 4\r## 4 d 4 2 3\rThe following code selects the bottom 3 observations.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- tail(df,3)\rnewdf\r## ID x y z\r## 4 d 4 2 3\r## 5 e 5 1 2\r## 6 f 6 2 1\rThe following code drops the top 2 observations.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- tail(df,-2)\rnewdf\r## ID x y z\r## 3 c 3 1 4\r## 4 d 4 2 3\r## 5 e 5 1 2\r## 6 f 6 2 1\rThe following code selects observations from row 2 to row 4.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- df[c(2:4),]\rhead(newdf,3)\r## ID x y z\r## 2 b 2 2 5\r## 3 c 3 1 4\r## 4 d 4 2 3\rThe following code excludes observations from row 2 to row 4.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- df[-c(2:4),]\rhead(newdf,3)\r## ID x y z\r## 1 a 1 1 6\r## 5 e 5 1 2\r## 6 f 6 2 1\rSelecting Observation based on condition\rTo select observations based on conditions, we may use ``which’’. The following code selects observations such that \\(y=1\\).\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- df[which(df$y==1), ]\rnewdf\r## ID x y z\r## 1 a 1 1 6\r## 3 c 3 1 4\r## 5 e 5 1 2\rThe following code chooses observation that \\(y=1\\) and \\(x\u0026gt;1\\).\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- df[which(df$y==1 \u0026amp; df$x\u0026gt;1), ]\rnewdf\r## ID x y z\r## 3 c 3 1 4\r## 5 e 5 1 2\rSelecting Observation and Columns\rTo select observations based on conditions restricting to some columns, we use subset. To choose which column to include, we use ``select’’.\nThe following code selects columns of y and z when \\(y=1\\) and \\(x\u0026gt;1\\).\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rnewdf \u0026lt;- subset(df, y== 2 \u0026amp; x\u0026gt;1, select= c(y,z))\rnewdf\r## y z\r## 2 2 5\r## 4 2 3\r## 6 2 1\rCreate New Column\rIf a new column is simple transformation of existing column, then we can just write the expression directly because R is vectorized.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rdf$a \u0026lt;- 2*df$x + 3*df$y -df$z\rdf\r## ID x y z a\r## 1 a 1 1 6 -1\r## 2 b 2 2 5 5\r## 3 c 3 1 4 5\r## 4 d 4 2 3 11\r## 5 e 5 1 2 11\r## 6 f 6 2 1 17\rdf\r## ID x y z a\r## 1 a 1 1 6 -1\r## 2 b 2 2 5 5\r## 3 c 3 1 4 5\r## 4 d 4 2 3 11\r## 5 e 5 1 2 11\r## 6 f 6 2 1 17\rWhen we want to create a new column where each row depends on values of existing column, we can use ifelse().\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rdf$a \u0026lt;- ifelse(df$x\u0026gt;3, 1,0)\rdf\r## ID x y z a\r## 1 a 1 1 6 0\r## 2 b 2 2 5 0\r## 3 c 3 1 4 0\r## 4 d 4 2 3 1\r## 5 e 5 1 2 1\r## 6 f 6 2 1 1\rRemove Duplicated Observation\rTo remove duplicate, the function is unique().\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;), x=c(1,2,3,4,1,2), y=c(1,2,1,2,1,2))\rnewdf \u0026lt;- unique(df)\rnewdf\r## ID x y\r## 1 a 1 1\r## 2 b 2 2\r## 3 a 3 1\r## 4 b 4 2\rCollapse Data by Group\rThere are two ways to collapse data by applying function to group: (1) aggregate and (2) by.\nThe following calculate the mean of data by group.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;), x=c(1,2,3,4,1,2), y=c(1,2,1,2,1,2))\rnewdf \u0026lt;- aggregate(df$x, by=data.frame(df$ID), mean)\rnewdf\r## df.ID x\r## 1 a 1.666667\r## 2 b 2.666667\rThe following is similar by use by()\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;), x=c(1,2,3,4,1,2), y=c(1,2,1,2,1,2))\rnewdf \u0026lt;-by(df$x, df$ID, mean)\rnewdf\r## df$ID: a\r## [1] 1.666667\r## ------------------------------------------------------------ ## df$ID: b\r## [1] 2.666667\rPackages\rEverything which is done in R is done by functions. Commonly used functions are grouped in packages. Installing different packages expand the functionality of R.\nTo install a package, say dplyr, for the first time, type\ninstall.packages(\u0026quot;dplyr\u0026quot;)\rTo load the package, type the package name without quotation\nlibrary(dplyr)\rNote that we only need to install each package once but we need to load the package each time to access the functions inside the package.\ndplyr package\rIt is very convenient data management package. It can filter data, sort data, select data and generate new columns.\nThe filter() function is similar to Excel filter function.\ndf \u0026lt;- data.frame(Price=c(1.2,2.4,3.6,4.8), month=c(1,2,1,2), day=c(1,2,3,4))\rdplyr::filter(df, month ==1 , day ==3)\r## Price month day\r## 1 3.6 1 3\rNote that we have added ``dplyr::’’ is to avoid name conflict of filter\nThe arrange() is like Excel sorting function. The syntax is arrange(dataframe, variables):\ndf \u0026lt;- data.frame(school=c(\u0026quot;NTU\u0026quot;,\u0026quot;SMU\u0026quot;,\u0026quot;NUS\u0026quot;), rank=c(2,1,3), size=c(1,3,2))\rdplyr::arrange(df, rank, size) ## school rank size\r## 1 SMU 1 3\r## 2 NTU 2 1\r## 3 NUS 3 2\rThe default order is ascending. To sort by a descending order, one can simply use desc():\ndf \u0026lt;- data.frame(school=c(\u0026quot;NTU\u0026quot;,\u0026quot;SMU\u0026quot;,\u0026quot;NUS\u0026quot;),\rrank=c(2,1,3),\rsize=c(1,3,2))\rdplyr::arrange(df, desc(rank), size) ## school rank size\r## 1 NUS 3 2\r## 2 NTU 2 1\r## 3 SMU 1 3\rThe select() is to select columns. It behaves as if Excel hide column function or delete column function.\ndf \u0026lt;- data.frame(x=c(\u0026quot;NTU\u0026quot;,\u0026quot;SMU\u0026quot;,\u0026quot;NUS\u0026quot;),\rrank=c(2,1,3),\rsize=c(1,3,2))\rdplyr::select(df, x, rank)\r## x rank\r## 1 NTU 2\r## 2 SMU 1\r## 3 NUS 3\rThe mutate() function add new columns in the dataframe. It works like *``gen function in Stata.\ndf \u0026lt;- data.frame(product=c(\u0026quot;chicken rice\u0026quot;, \u0026quot;laska\u0026quot;),\rrevenue=c(10,5), cost=c(5,4))\rmutate(df, profit = revenue-cost, profit_margin = profit/revenue)\r## product revenue cost profit profit_margin\r## 1 chicken rice 10 5 5 0.5\r## 2 laska 5 4 1 0.2\rTo create columns based on some simple condition, we can use ifelse()\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rmutate(df, a = ifelse(x\u0026gt;3, 1,0))\r## ID x y z a\r## 1 a 1 1 6 0\r## 2 b 2 2 5 0\r## 3 c 3 1 4 0\r## 4 d 4 2 3 1\r## 5 e 5 1 2 1\r## 6 f 6 2 1 1\rTo create columns based on some simple condition, we can use case_when.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;c\u0026quot;,\u0026quot;d\u0026quot;,\u0026quot;e\u0026quot;,\u0026quot;f\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,2,1,2,1,2),\rz=c(6,5,4,3,2,1))\rmutate(df, a = case_when(x==1 | x==2 ~0,\rx==3 | x==4 ~1,\rx==5 | x==6 ~2)\r)\r## ID x y z a\r## 1 a 1 1 6 0\r## 2 b 2 2 5 0\r## 3 c 3 1 4 1\r## 4 d 4 2 3 1\r## 5 e 5 1 2 2\r## 6 f 6 2 1 2\rTo create summary by group, we first use group_by() to group the data, and then use summarize() to apply functions.\ndf \u0026lt;- data.frame(ID=c(\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;,\u0026quot;a\u0026quot;,\u0026quot;b\u0026quot;), x=c(1,2,3,4,5,6), y=c(1,4,2,3,6,2))\rnewdf \u0026lt;- group_by(df, ID)\rsummarize(newdf, xbar=mean(x), yvar=var(y))\r## `summarise()` ungrouping output (override with `.groups` argument)\r## # A tibble: 2 x 3\r## ID xbar yvar\r## \u0026lt;fct\u0026gt; \u0026lt;dbl\u0026gt; \u0026lt;dbl\u0026gt;\r## 1 a 3 7\r## 2 b 4 1\rreshape package\rReshape package is useful to transform data from long format to wide format. The\rtwo main functions for reshape is melt and cast.\nWe first install and load the reshape package.\ninstall.packages(\u0026quot;reshape\u0026quot;)\rlibrary(reshape)\rThe melt() function collapses all columns into rows\ndf1 \u0026lt;- data.frame(id=c(1,1,2,2),\rtime = c(1,2,1,2),\rbid=c(1,2,3,4),\rask=c(5,6,7,8))\rdf2 \u0026lt;- melt(df1, id=c(\u0026quot;id\u0026quot;,\u0026quot;time\u0026quot;))\rdf2\r## id time variable value\r## 1 1 1 bid 1\r## 2 1 2 bid 2\r## 3 2 1 bid 3\r## 4 2 2 bid 4\r## 5 1 1 ask 5\r## 6 1 2 ask 6\r## 7 2 1 ask 7\r## 8 2 2 ask 8\rThe cast() function rebuild new table after it is melt. The casting formula: row variable 1 + row variable 2 ~ column variable 1 + column variable 2.\nThe following code will return original table. It is because the original table has id and time as row variables while bid and ask are column variables.\ndf3 \u0026lt;- cast(df2, id+time~variable)\rdf3\r## id time bid ask\r## 1 1 1 1 5\r## 2 1 2 2 6\r## 3 2 1 3 7\r## 4 2 2 4 8\rThe following code will make id and variable as row variable and time as column variables.\ndf4 \u0026lt;- cast(df2, id+variable~time)\rdf4\r## id variable 1 2\r## 1 1 bid 1 2\r## 2 1 ask 5 6\r## 3 2 bid 3 4\r## 4 2 ask 7 8\rThe following code will make id as row variable, and time and variable as column variables.\ndf5 \u0026lt;- cast(df2, id~variable+time)\rdf5\r## id bid_1 bid_2 ask_1 ask_2\r## 1 1 1 2 5 6\r## 2 2 3 4 7 8\rApplication to World Bank Data\rTo access on World Bank data in R, we first install the wbstats packages:\ninstall.packages(\u0026quot;wbstats\u0026quot;)\rlibrary(wbstats,warn.conflicts = FALSE)\rThe following code download data description from World bank database. Since it is too large, we just download the description first. Then we will download only the variables we need.\nnew_cache \u0026lt;- wbcache()\rSince the database is huge, we need to search for relevant data. We will need to obtain GDP and population data.\ngdp \u0026lt;- wbsearch(\u0026quot;gdp.*capita.*US\\\\$\u0026quot;)\rpop \u0026lt;- wbsearch(\u0026quot;population, total\u0026quot;)\rAfter checking the gdp and pop, we decide to download two data series: “SP.POP.TOTL” and “NY.GDP.PCAP.KD”.\ndownload\u0026lt;- wb(country=c(\u0026quot;US\u0026quot;, \u0026quot;SG\u0026quot;),\rindicator = c(\u0026quot;SP.POP.TOTL\u0026quot;,\r\u0026quot;NY.GDP.PCAP.KD\u0026quot;), startdate = 2000, enddate = 2017)\rWe will use dplyr to clean up the data.\nlibrary(dplyr,warn.conflicts = FALSE)\rSince the data contains a lot of redundant columns, we first clean the data.\nlong \u0026lt;- dplyr::select(download, date, indicator, country,value)\rhead(long,3)\r## date indicator country value\r## 1 2017 Population, total Singapore 5612253\r## 2 2016 Population, total Singapore 5607283\r## 3 2015 Population, total Singapore 5535002\rThe data is in long format. We need to use reshape package to change it to wide format.\nlibrary(reshape,warn.conflicts = FALSE)\rTo start, we first melt it and then cast it to the desired format.\ntemp \u0026lt;- melt(long, id=c(\u0026quot;date\u0026quot;,\u0026quot;indicator\u0026quot;,\u0026quot;country\u0026quot;))\rdata \u0026lt;- cast(temp, country + date~indicator)\rFinally, we make some decoration.\ncolnames(data) \u0026lt;- c(\u0026quot;country\u0026quot;, \u0026quot;year\u0026quot;, \u0026quot;gdp\u0026quot;, \u0026quot;pop\u0026quot;)\rdata$year \u0026lt;- as.numeric(data$year)\rhead(data,3)\r## country year gdp pop\r## 1 Singapore 2000 33850.76 4027887\r## 2 Singapore 2001 32597.62 4138012\r## 3 Singapore 2002 33565.97 4175950\rExternal Datasets\rWe often want to import from CSV, stata data and excel files. Sometimes, we also want to export to CSV and excel files. Finally, we cover how to convert your R code into Word document through knit and export your table using the package stargazer.\nWorking Directory\rTo work with external file, we need to set the folder containing the file as working directory. Otherwise, we need to write the full path of the file.\nTo set working directory, we use setwd().\nsetwd(\u0026quot;C:/user/folder/\u0026quot;)\rImport from CSV\rTo import csv, we can use read.csv().\nThe program will find a file in the working directory. If the file is stored in a sub directory, we will say ``./folder/file.csv’’ instead.\nIf the data has header, then set header = TRUE so that the column name is given by the header row. Otherwise, set header to FALSE.\n# If the file has header, then type\rdf \u0026lt;- read.csv(\u0026quot;file.csv\u0026quot;, header= TRUE)\r# If the file has no header, then type\rdf \u0026lt;- read.csv(\u0026quot;file.csv\u0026quot;, header= FALSE)\rImport from Stata\rTo import from Stata data file, we need the package foreign.\nlibrary(foreign)\rdf \u0026lt;-read.dta(\u0026quot;datafile.dta\u0026quot;)\rImport from Excel\rTo import from xlsx file, we need the package xlsx\nlibrary(xlsx)\rworkbook \u0026lt;- \u0026quot;path/file.xlsx\u0026quot;\rdf \u0026lt;-read.xlsx(workbook, n)\r# n is n-th worksheet to import\rExport to CSV\rTo export dataframe to a csve file, we can use write.csv(). The file will be saved in your current working directory, which can be changed if you wish.\nwrite.csv(df,file=\u0026quot;filename.csv\u0026quot;)\rNote that a csv file that can be directly read by Excel.\nExport to xlsx\rTo export to xlss file, we need to install package XLConnect.\ninstall.packages(\u0026quot;XLConnect\u0026quot;)\rlibrary(XLConnect)\r# Load and Excel workbook (create if not exist)\rwb = loadWorkbook(\u0026quot;test.xlsx\u0026quot;,create=T)\r# Create Worksheet in the workbook\rcreateSheet(wb,\u0026quot;AAPL\u0026quot;); createSheet(wb,\u0026quot;IBM\u0026quot;)\rAAPL\u0026lt;-data.frame(P=c(1,2,4),Q=c(2,3,5))\rIBM \u0026lt;-data.frame(P=c(2,4,6),Q=c(7,8,9)) # Write things into worksheet\rwriteWorksheet(wb, AAPL,sheet = \u0026quot;AAPL\u0026quot;, startRow = 1, startCol = 1)\rwriteWorksheet(wb, IBM,sheet = \u0026quot;IBM\u0026quot;, startRow = 1, startCol = 1)\r# Save to workbook\rsaveWorkbook(wb)\rExport to Word: Knitr\rSometimes, we want to export our working in RStudio as printable or pdf/word format. The easiest way to do it is through the knitr package. Install the package and then go to File \u0026gt; Knit document \u0026gt; MS Word in RStudio.\nExport Table: stargazer\rThe package ``stargazer’’ is useful to export table to latex, text or html (open in word and copy and paste). This saves considerable time to get the formatting right.\ninstall.packages(\u0026quot;stargazer\u0026quot;);\rlibrary(stargazer);\rstargazer(df) #latex\rstargazer(df, type=\u0026quot;text\u0026quot;, out=\u0026quot;test.txt\u0026quot;) stargazer(df, type=\u0026quot;html\u0026quot;, out=\u0026quot;test.html\u0026quot;) ","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"66be2bfa417665bb5a41e12bb176f48b","permalink":"/programming/r-programming/ta-with-r-ch2/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r-ch2/","section":"programming","summary":"no\rWorking with Data\rWe always need to clean data before working. Even data downloaded from the database is not perfect. Sometimes there are missing data. Moreover, when data are from database, we need to combine them before using.","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":"\rno\rPlotting\rR is capable of giving very nice graphical plots. We will go over the most popular package ggplot2 for drawing static graphics and dygraphs for dynamic graphs\nLearning objectives:\nUse ggplot2 to draw basic plots (scatter plot, boxplot, line chart, histogram, frequency polygon, and barchart)\nUse ggtheme to improve appearance\nUse dygraphs to draw interactive graphs\nggplot2 package\rggplot2 is a powerful package to draw graphics. It implements the grammar of graphics (and hence its name).\ninstall.packages(\u0026quot;ggplot2\u0026quot;)\rlibrary(ggplot2)\rTwo plotting functions in the package:\nqplot() and\rggplot().\rWhile qplot() is useful to plot quickly, most of time, one should use ggplot() for systemic plotting\nqplot(x, y, dataframe, geom=\u0026quot;type\u0026quot;)\rggplot(data, aes(x,y))+ geom_type() + options\rx\u0026lt;-1:30\ry\u0026lt;-c(5,4,5,3,4,6,7,4,2,1,5,6,2,2,2,\r5,6,7,8,6,2,8,7,8,8,3,3,7,2,1)\rz\u0026lt;-c(\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;A\u0026#39;,\r\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\r\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;,\u0026#39;A\u0026#39;,\u0026#39;B\u0026#39;)\rdf\u0026lt;-data.frame(x,y,z)\rQplot\rScatter plot is useful to depict relationship between two variables.\nqplot(x, y, data=df, geom=\u0026quot;point\u0026quot;)\rBox plot: use when one variable is continuous, another is categorical (discrete). Then box plot is an alternative to scatter plot.\nqplot(z,x, data=df, geom=\u0026quot;boxplot\u0026quot;)\rLine plot is useful to show time trend and how two variables are related. Compared to scatter plot, line plot is most useful if the horizontal variable does not have any duplicated values.\nqplot(x, y, data=df, geom=\u0026quot;line\u0026quot;)\rHistogram is useful if we want to visualize the distribution of single continuous variable.\nqplot(y, data=df, geom=\u0026quot;histogram\u0026quot;,binwidth = 3)\rDensity plot is similar to histogram but there is no grouping as in histogram but the function is smoothed.\nqplot(y, data=df, geom=\u0026quot;density\u0026quot;)\rBar chart is similar to histogram but it is for discrete data.\nqplot(z, data=df, geom=\u0026quot;bar\u0026quot;)\rggplot\rThe syntax for base plots is as follows:\nggplot(data)+aes(x,y)+geom_point()\rggplot(data)+aes(x,y)+geom_boxplot()\rggplot(data)+aes(x,y)+geom_line()\rggplot(data)+aes(x)+geom_histogram()\rggplot(data)+aes(x)+geom_freqpoly()\rggplot(data)+aes(x)+geom_bar()\rScatter plot\nggplot(df)+aes(x,y)+geom_point()\rBoxplot\nggplot(df)+aes(z,x)+geom_boxplot()\rLineplot\nggplot(df)+aes(x,y)+geom_line()\rHistogram\nggplot(df)+aes(y)+geom_histogram(binwidth=1)\rFrequency polygon\nggplot(df)+aes(y)+geom_freqpoly(binwidth=1)\rBar Chart\nggplot(df)+aes(y)+geom_bar()\rAesthetic\rTo improve the appearance, we can change color, shape (for scatter plot) and size (for scatter plot).\nColor: aes(x,y, color=z)\nggplot(df) +aes(x,y, color=z) + geom_point() shape: aes(x,y, shape=z)\nggplot(df) + aes(x,y, shape=z) + geom_point() Size: aes(x,y, size = 3)\nggplot(df) + aes(x,y, size = 3) + geom_point() Decoration\rTo improve the readability of plot, one may add title, label axes, and provide legend.\nAdd title by using ggtitle()\nggplot(df) + aes(x,y)+ geom_point()+ ggtitle(\u0026quot;title\u0026quot;)\rLabel Axes using xlab() and ylab().\nggplot(df) + aes(x,y)+ geom_point()+\rxlab(\u0026quot;X axis\u0026quot;) + ylab(\u0026quot;Y axis\u0026quot;)\rLegend can be added using theme(legend). The position can be top, right, left and bottom.\nggplot(df) + aes(x,y,color=z)+geom_point()+ theme(legend.position = \u0026quot;bottom\u0026quot;)\rBasic themes\rWe can also change the theme of the plot. There are four basic themes.\n+theme_grey()\r+theme_bw()\r+theme_minimal()\r+theme_classic()\rBasic themes: Grey\nggplot(df)+aes(x,y, color=z)+geom_point()+\rtheme_grey()\rBasic themes: BW\nggplot(df)+aes(x,y, color=z)+geom_point()+\rtheme_bw()\rBasic themes: minimal\nggplot(df)+aes(x,y, color=z)+geom_point()+\rtheme_minimal()\rBasic themes: classic\nggplot(df)+aes(x,y, color=z)+geom_point()+\rtheme_classic()\rggthemes package\rFinally, we want to introduce a better theme for plotting. Here, we need to install and load the ggthemes package.\ninstall.packages(\u0026quot;ggthemes\u0026quot;)\rlibrary(ggthemes)\rThere are three interesting themes:\nStata,\rExcel, and\rEconomist.\rTo get the Stata theme, we use theme_stata() and scale_colour_stata()\nggplot(df) + aes(x,y, color=z)+ geom_point()+ theme_stata() + scale_colour_stata()\rTo use the Excel theme, we use theme_excel() + scale_colour_excel(). It is not recommended to use it in practice.\nggplot(df) + aes(x,y, color=z)+ geom_point()+ theme_excel() + scale_colour_excel()\rTo create the theme like the Economist magazine, we can use theme_economist() and scale_colour_economist().\nggplot(df) + aes(x,y, color=z)+ geom_point() +\rtheme_economist() + scale_colour_economist() Here is the Economist theme with some further decorations.\nggplot(df) +\rgeom_line(aes(x,y, colour = z), size=1.5)+\rtheme_economist() + scale_colour_economist()+\rtheme(legend.position=\u0026quot;bottom\u0026quot;,\raxis.title = element_text(size = 12),\rlegend.text = element_text(size = 9),\rlegend.title=element_text(face = \u0026quot;bold\u0026quot;,\rsize = 9)) +\rggtitle(\u0026quot;Title\u0026quot;)\rApplication: Worldbank\rWe want to illustrate our plotting function using data from the World Bank. We will use the wbstats package to download data, and reshape package to convert the data into long format.\nlibrary(wbstats)\rlibrary(dplyr)\rlibrary(reshape)\rdf\u0026lt;- wb(country=c(\u0026quot;US\u0026quot;, \u0026quot;SG\u0026quot;),\rindicator = c(\u0026quot;SP.POP.TOTL\u0026quot;,\r\u0026quot;NY.GDP.PCAP.KD\u0026quot;), startdate = 2000, enddate = 2017)\rdf \u0026lt;- dplyr::select(df, date, indicator,\rcountry,value)\rtemp \u0026lt;- melt(df, id=c(\u0026quot;date\u0026quot;,\u0026quot;indicator\u0026quot;,\u0026quot;country\u0026quot;))\rcharts.data \u0026lt;- cast(temp, country + date~indicator)\rcolnames(charts.data) \u0026lt;- c(\u0026quot;country\u0026quot;, \u0026quot;year\u0026quot;,\u0026quot;gdp\u0026quot;, \u0026quot;pop\u0026quot;)\rcharts.data$year \u0026lt;- as.numeric(charts.data$year)\rNow we are ready to plot the graph.\np1\u0026lt;-ggplot()+\rgeom_line(aes(x = year,y = gdp,color = country), size=1.5, data = charts.data)+\rtheme_economist() + scale_colour_economist() +\rtheme(legend.position=\u0026quot;bottom\u0026quot;,\raxis.title = element_text(size = 12),\rlegend.text = element_text(size = 9),\rlegend.title=element_text(face = \u0026quot;bold\u0026quot;, size = 9)) +\rggtitle(\u0026quot;GDP per capita (US$)\u0026quot;)\rprint(p1)\rdygraphs package\rThe package dygraphs produces dynamic graphics so that user can interact with the graph.\nTo illustrate our idea, we use stock data download using Quantmod package.\nGet Data Using Quantmod\rThe following code install and download the quantmod package. Then it downloads the daily stock price data of Apple (ticker: AAPL).\nWe use getSymbols() to download data:\ninstall.packages(\u0026quot;quantmod\u0026quot;)\rlibrary(quantmod)\r# getSymbols(): to get data\rgetSymbols(\u0026quot;AAPL\u0026quot;)\rTake a look at the data:\n# OHLCVA data\rhead(AAPL,n=3)\r## AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted\r## 2003-01-02 0.5083427 0.5281666 0.5079888 0.5239188 45357200 0.915166\r## 2003-01-03 0.5239188 0.5285210 0.5164849 0.5274589 36863400 0.921349\r## 2003-01-06 0.5320605 0.5444505 0.5267507 0.5274589 97633200 0.921349\r# Get OHLC data\rprice\u0026lt;-OHLC(AAPL)\rhead(price, n=3)\r## AAPL.Open AAPL.High AAPL.Low AAPL.Close\r## 2003-01-02 0.5083427 0.5281666 0.5079888 0.5239188\r## 2003-01-03 0.5239188 0.5285210 0.5164849 0.5274589\r## 2003-01-06 0.5320605 0.5444505 0.5267507 0.5274589\rThe following code install and download the dygraphs package.\ninstall.packages(\u0026quot;dygraphs\u0026quot;)\rlibrary(dygraphs)\rgetSymbols(\u0026quot;AAPL\u0026quot;)\rgetSymbols(\u0026quot;SPY\u0026quot;)\rWe will plot four different dynamic plots:\nstandard dynamic,\rshading,\revent line, and\rcandle chart.\rStandard dynamic graph\rThe function dygraph() display time series data interactively. Move your mouse on the diagram.\ndygraph(OHLC(AAPL))\rShading\rgraph\u0026lt;-dygraph(Cl(SPY), main = \u0026quot;SPY\u0026quot;) dyShading(graph, from=\u0026quot;2007-08-09\u0026quot;, to=\u0026quot;2011-05-11\u0026quot;, color=\u0026quot;#FFE6E6\u0026quot;)\rEvent line\rgraph\u0026lt;-dygraph(OHLC(AAPL), main = \u0026quot;AAPL\u0026quot;) graph\u0026lt;-dyEvent(graph,\u0026quot;2007-6-29\u0026quot;,\r\u0026quot;iphone\u0026quot;, labelLoc = \u0026quot;bottom\u0026quot;) graph\u0026lt;-dyEvent(graph,\u0026quot;2010-5-6\u0026quot;, \u0026quot;Flash Crash\u0026quot;, labelLoc = \u0026quot;bottom\u0026quot;) graph\u0026lt;-dyEvent(graph,\u0026quot;2014-6-6\u0026quot;, \u0026quot;Split\u0026quot;, labelLoc = \u0026quot;bottom\u0026quot;) dyEvent(graph,\u0026quot;2011-10-5\u0026quot;,\r\u0026quot;Jobs\u0026quot;, labelLoc = \u0026quot;bottom\u0026quot;) Candle Chart\rAAPL \u0026lt;- tail(AAPL, n=30)\rgraph\u0026lt;-dygraph(OHLC(AAPL))\rdyCandlestick(graph)\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"d7bd58d3b85e5a0ee26f47a7fef36bd9","permalink":"/programming/r-programming/ta-with-r-ch3/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r-ch3/","section":"programming","summary":"no\rPlotting\rR is capable of giving very nice graphical plots. We will go over the most popular package ggplot2 for drawing static graphics and dygraphs for dynamic graphs","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":"\rno\rStatistical Analysis\rWe first review some basic function of statistics: central tendency and dispersion before going into regression analysis.\nLearning objectives:\nsummary statics\ngenerate random numbers\nestimate OLS\nestimate time series models (ARIMA using arima, GARCH using rugarch, VAR using vars)\nestimate panel data (plm package)\nSimulation on random walk model and Roll model\nBasic Statistics\rCentral Tendency\nx \u0026lt;- 1:40\rmean(x) ## [1] 20.5\rmedian(x)\r## [1] 20.5\rsummary(x) #Five-number summary\r## Min. 1st Qu. Median Mean 3rd Qu. Max. ## 1.00 10.75 20.50 20.50 30.25 40.00\rDispersion\nrange(x) #Get minimum and maximum\r## [1] 1 40\rIQR(x) #Inter-quartile range\r## [1] 19.5\rvar(x) #variance\r## [1] 136.6667\rsd(x) #Standard deviation\r## [1] 11.69045\rRandom number\rTo generate random integers, we use the function sample().\nWe first generate 8 random integers between 2 and 10 without replacement:\nsample(2:10,8, replace=F) ## [1] 4 5 6 9 10 2 3 8\rThe next one generate 7 integers between 2 and 10 with replacement:\nsample(2:10,7, replace=T) ## [1] 10 6 5 5 2 6 6\rIn general, the sample() function can also be applied to extract random element from a vector.\nnamelist\u0026lt;-c(\u0026quot;Mary\u0026quot;, \u0026quot;Peter\u0026quot;, \u0026quot;John\u0026quot;, \u0026quot;Susan\u0026quot;)\rsample(namelist,2) # sample from this list\r## [1] \u0026quot;Susan\u0026quot; \u0026quot;Mary\u0026quot;\rTo generate random decimal numbers, we use runif to get random uniform distribution. The following generates 2 random decimal numbers between 4.6 and 7.8:\nrunif(2, 4.6, 7.8) ## [1] 7.169279 4.839000\rTo generate normal distribution, we use rnorm(). The following generate 4 random number that follows the normal distribution with mean being 0 and standard deviation being 1.\nx \u0026lt;- rnorm(4, mean=0, sd=1) # standard nromal\rx\r## [1] 1.8976780 -0.2299555 1.2559706 -0.9824391\rRegression\rWe will be using the following data to show the regression. Note that we need to use dataframe.\nx \u0026lt;- c(1,2,3,5,6,7,10,12,13)\ry \u0026lt;- c(1,4,5,6,7,8,9,10,15)\rz \u0026lt;- c(2,3,7,8,9,12,8,7,6)\rdf \u0026lt;-data.frame(x=x,y=y,z=z)\rSimple linear regression\rThe following code shows simple linear regression. The syntax is lm(y~x, dataframe).\nSLR \u0026lt;-lm(y~x,df)\rsummary(SLR)\r## ## Call:\r## lm(formula = y ~ x, data = df)\r## ## Residuals:\r## Min 1Q Median 3Q Max ## -1.9660 -1.2234 0.2618 0.7470 2.1627 ## ## Coefficients:\r## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 1.5104 0.8756 1.725 0.128193 ## x 0.8713 0.1134 7.686 0.000118 ***\r## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\r## ## Residual standard error: 1.389 on 7 degrees of freedom\r## Multiple R-squared: 0.8941, Adjusted R-squared: 0.8789 ## F-statistic: 59.08 on 1 and 7 DF, p-value: 0.0001175\rMuliple linear regression\rThe following code shows multiple regression. The syntax is lm(y~x+z, dataframe).\nMLR \u0026lt;-lm(y~x + z,df)\rsummary(MLR)\r## ## Call:\r## lm(formula = y ~ x + z, data = df)\r## ## Residuals:\r## Min 1Q Median 3Q Max ## -1.8920 -1.2104 0.1329 0.8179 2.3030 ## ## Coefficients:\r## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 1.25034 1.34526 0.929 0.388522 ## x 0.85666 0.13321 6.431 0.000668 ***\r## z 0.05167 0.19124 0.270 0.796060 ## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\r## ## Residual standard error: 1.492 on 6 degrees of freedom\r## Multiple R-squared: 0.8953, Adjusted R-squared: 0.8605 ## F-statistic: 25.67 on 2 and 6 DF, p-value: 0.001146\rInteraction terms\rThe following code shows multiple regression with interaction term. The syntax is lm(y~x+z+x:z, dataframe).\nMLRDummy \u0026lt;- lm(y ~ x + z + x:z, df)\rsummary(MLRDummy)\r## ## Call:\r## lm(formula = y ~ x + z + x:z, data = df)\r## ## Residuals:\r## 1 2 3 4 5 6 7 8 9 ## -0.3080 0.9573 -0.3143 -0.7246 -0.1773 1.1230 -0.5891 -1.6242 1.6572 ## ## Coefficients:\r## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) -1.33212 1.96748 -0.677 0.5284 ## x 1.59845 0.46581 3.432 0.0186 *\r## z 0.64902 0.40027 1.621 0.1658 ## x:z -0.12819 0.07789 -1.646 0.1607 ## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\r## ## Residual standard error: 1.316 on 5 degrees of freedom\r## Multiple R-squared: 0.9321, Adjusted R-squared: 0.8914 ## F-statistic: 22.89 on 3 and 5 DF, p-value: 0.002386\rRobust standard error\rTo have robust variance-covariance matrix, we have to use package sandwich to get the appropriate error term. Then we do the estimate through the package lmtest\nFirst we install and load the packages.\ninstall.packages(c(\u0026quot;sandwich\u0026quot;,\u0026quot;lmtest\u0026quot;))\rlibrary(sandwich)\rlibrary(lmtest)\rThen we need to create the variance and covariance matrix: using the vcovHC().\nTo match the stata robust command result, we use HC1(). Then we perform coeftest based on specified variance-covariance matrix.\nMLR \u0026lt;- lm(y ~ x + z, df)\rcoeftest(MLR, vcov = vcovHC(MLR, \u0026quot;HC1\u0026quot;)) ## ## t test of coefficients:\r## ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 1.250343 1.117886 1.1185 0.306129 ## x 0.856663 0.194468 4.4052 0.004543 **\r## z 0.051674 0.167447 0.3086 0.768062 ## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\rTime Series Analysis\rTime Series data\rFunction ts convert any vector into time series data.\nprice \u0026lt;- c(2,3,7,8,9,12,8,7)\rprice \u0026lt;- ts(price)\rprice\r## Time Series:\r## Start = 1 ## End = 8 ## Frequency = 1 ## [1] 2 3 7 8 9 12 8 7\rWe first define a time series (ts) object for the estimation. Note that ts is similar to xts but without date and time.\ndf \u0026lt;- data.frame(a = c(3,4,5),\rb = c(1,2,4),\rd = c(1,2,3))\rdf \u0026lt;- ts(df)\rdf\r## Time Series:\r## Start = 1 ## End = 3 ## Frequency = 1 ## a b d\r## 1 3 1 1\r## 2 4 2 2\r## 3 5 4 3\rExtensible Time Series Data\rTo handle high frequency data (with minute and second), we need the package xts. The package allows you to define Extendible Time Series (xts) object.\nThe following code installs and loads the xts package.\ninstall.packages(\u0026quot;xts\u0026quot;)\rlibrary(xts) Consider the following data for our extendible time series\ndate \u0026lt;- c(\u0026quot;2007-01-03\u0026quot;,\u0026quot;2007-01-04\u0026quot;,\r\u0026quot;2007-01-05\u0026quot;,\u0026quot;2007-01-06\u0026quot;,\r\u0026quot;2007-01-07\u0026quot;,\u0026quot;2007-01-08\u0026quot;,\r\u0026quot;2007-01-09\u0026quot;,\u0026quot;2007-01-10\u0026quot;)\rtime \u0026lt;- c(\u0026quot;08:00:01\u0026quot;,\u0026quot;09:00:01\u0026quot;,\r\u0026quot;11:00:01\u0026quot;,\u0026quot;13:00:01\u0026quot;,\r\u0026quot;14:00:01\u0026quot;,\u0026quot;15:00:01\u0026quot;,\r\u0026quot;15:10:01\u0026quot;,\u0026quot;15:20:03\u0026quot;)\rprice \u0026lt;- c(2,3,7,8,9,12,8,7)\rNow we are ready to define xts object. The code as.POSIXct() convert strings into date format with minutes and seconds.\ndf \u0026lt;-data.frame(date=date, time=time, price=price)\rdf$datetime \u0026lt;-paste(df$date, df$time)\rdf$datetime \u0026lt;-as.POSIXct(df$datetime,\rformat=\u0026quot;%Y-%m-%d %H:%M:%S\u0026quot;)\rdf \u0026lt;- xts(df,order.by=df$datetime) For conversion with dates only, we use POSIXlt() instead of POSIXct().\ndf \u0026lt;-data.frame(date=date, price=price)\rdf$date \u0026lt;- as.POSIXct(df$date,format=\u0026quot;%Y-%m-%d\u0026quot;)\rdf$price \u0026lt;-as.numeric(df$price)\rprice \u0026lt;-xts(df[,-1],order.by=df$date) ARMA\rAutoregressive moving average model can be estimated using the arima() function.\nThe following code estimates an AR(1) model:\nprice \u0026lt;- c(2,3,7,8,9,12,8,7)\rAR1 \u0026lt;- arima(price,c(1,0,0)) AR1\r## ## Call:\r## arima(x = price, order = c(1, 0, 0))\r## ## Coefficients:\r## ar1 intercept\r## 0.6661 6.1682\r## s.e. 0.2680 2.1059\r## ## sigma^2 estimated as 5.33: log likelihood = -18.34, aic = 42.68\rThe following code estimates an AR(2) model:\nAR2 \u0026lt;- arima(price,c(2,0,0)) AR2\r## ## Call:\r## arima(x = price, order = c(2, 0, 0))\r## ## Coefficients:\r## ar1 ar2 intercept\r## 0.8301 -0.3026 6.5911\r## s.e. 0.3357 0.3638 1.7241\r## ## sigma^2 estimated as 4.831: log likelihood = -18.01, aic = 44.02\rThe following code estimates an MA(1) model:\nMA1 \u0026lt;- arima(price,c(0,0,1)) MA1\r## ## Call:\r## arima(x = price, order = c(0, 0, 1))\r## ## Coefficients:\r## ma1 intercept\r## 0.7945 6.8862\r## s.e. 0.4393 1.3412\r## ## sigma^2 estimated as 4.936: log likelihood = -18.23, aic = 42.46\rThe following code estimates an MA(2) model:\nMA2 \u0026lt;- arima(price,c(0,0,2)) MA2\r## ## Call:\r## arima(x = price, order = c(0, 0, 2))\r## ## Coefficients:\r## ma1 ma2 intercept\r## 0.8292 0.1459 6.8262\r## s.e. 0.3915 0.3245 1.4677\r## ## sigma^2 estimated as 4.945: log likelihood = -18.14, aic = 44.28\rThe following code estimates an ARMA(1,1) model:\nARMA11 \u0026lt;- arima(price,c(1,0,1))\rARMA11\r## ## Call:\r## arima(x = price, order = c(1, 0, 1))\r## ## Coefficients:\r## ar1 ma1 intercept\r## 0.3551 0.4889 6.6417\r## s.e. 0.7701 0.9088 1.8799\r## ## sigma^2 estimated as 4.911: log likelihood = -18.08, aic = 44.16\rSometimes, we just want to keep the coefficient.\ncoef(ARMA11) #Get coefficient\r## ar1 ma1 intercept ## 0.3551015 0.4889285 6.6417184\rThe following code shows the plot of residuals.\nplot.ts(ARMA11$residuals) R has a convenient function to autofit() the parameter of ARIMA model. This requires the forecast package. The following code installs and loads the forecast package:\ninstall.packages(\u0026quot;forecast\u0026quot;) library(forecast)\rNow we are ready to find the best ARIMA model.\nautoarma \u0026lt;-auto.arima (price) autoarma\r## Series: price ## ARIMA(0,1,0) ## ## sigma^2 estimated as 6.429: log likelihood=-16.45\r## AIC=34.89 AICc=35.69 BIC=34.84\rOne important function of time series model is forecasting. The following code gives the two-step ahead forecast:\ntheForecast \u0026lt;-predict(ARMA11,\rn.ahead=2,\rse.fit=TRUE) The following shows the forecast plot.\nplot.ts(theForecast$pred) #visualize the forecast\rGARCH\rTo estimate ARCH and GARCH model, we need to install and load package rugarch.\ninstall.packages(\u0026quot;rugarch\u0026quot;)\rlibrary(rugarch)\rWe will estimate GARCH(1,1) with ARMA(1,1) on generate random number\na \u0026lt;- runif(1000, min=0, max=100) #random number\rSpec \u0026lt;-ugarchspec(\rvariance.model=list(model=\u0026quot;sGARCH\u0026quot;,\rgarchOrder=c(1,1)),\rmean.model=list(armaOrder=c(1,1)),\rdistribution.model=\u0026quot;std\u0026quot;) Garch \u0026lt;- ugarchfit(spec=Spec, data=a)\rGarch\r## ## *---------------------------------*\r## * GARCH Model Fit *\r## *---------------------------------*\r## ## Conditional Variance Dynamics ## -----------------------------------\r## GARCH Model : sGARCH(1,1)\r## Mean Model : ARFIMA(1,0,1)\r## Distribution : std ## ## Optimal Parameters\r## ------------------------------------\r## Estimate Std. Error t value Pr(\u0026gt;|t|)\r## mu 48.87905 0.936035 5.2219e+01 0.000000\r## ar1 0.29967 1.364823 2.1957e-01 0.826209\r## ma1 -0.28485 1.371091 -2.0775e-01 0.835422\r## omega 0.98567 3.255287 3.0279e-01 0.762050\r## alpha1 0.00000 0.004008 3.6000e-05 0.999971\r## beta1 0.99881 0.000064 1.5644e+04 0.000000\r## shape 99.99992 39.755740 2.5154e+00 0.011891\r## ## Robust Standard Errors:\r## Estimate Std. Error t value Pr(\u0026gt;|t|)\r## mu 48.87905 0.920402 5.3106e+01 0.00000\r## ar1 0.29967 1.016028 2.9494e-01 0.76804\r## ma1 -0.28485 1.018161 -2.7977e-01 0.77966\r## omega 0.98567 1.645363 5.9906e-01 0.54913\r## alpha1 0.00000 0.002043 7.2000e-05 0.99994\r## beta1 0.99881 0.000027 3.6899e+04 0.00000\r## shape 99.99992 3.800341 2.6313e+01 0.00000\r## ## LogLikelihood : -4782.165 ## ## Information Criteria\r## ------------------------------------\r## ## Akaike 9.5783\r## Bayes 9.6127\r## Shibata 9.5782\r## Hannan-Quinn 9.5914\r## ## Weighted Ljung-Box Test on Standardized Residuals\r## ------------------------------------\r## statistic p-value\r## Lag[1] 0.0006312 0.980\r## Lag[2*(p+q)+(p+q)-1][5] 0.6316728 1.000\r## Lag[4*(p+q)+(p+q)-1][9] 1.7373604 0.993\r## d.o.f=2\r## H0 : No serial correlation\r## ## Weighted Ljung-Box Test on Standardized Squared Residuals\r## ------------------------------------\r## statistic p-value\r## Lag[1] 3.224 0.07255\r## Lag[2*(p+q)+(p+q)-1][5] 3.697 0.29441\r## Lag[4*(p+q)+(p+q)-1][9] 5.372 0.37683\r## d.o.f=2\r## ## Weighted ARCH LM Tests\r## ------------------------------------\r## Statistic Shape Scale P-Value\r## ARCH Lag[3] 0.3156 0.500 2.000 0.5742\r## ARCH Lag[5] 1.0253 1.440 1.667 0.7254\r## ARCH Lag[7] 2.2713 2.315 1.543 0.6600\r## ## Nyblom stability test\r## ------------------------------------\r## Joint Statistic: 199.444\r## Individual Statistics: ## mu 0.35980\r## ar1 0.87529\r## ma1 0.87357\r## omega 0.04945\r## alpha1 0.04962\r## beta1 0.04946\r## shape 44.27729\r## ## Asymptotic Critical Values (10% 5% 1%)\r## Joint Statistic: 1.69 1.9 2.35\r## Individual Statistic: 0.35 0.47 0.75\r## ## Sign Bias Test\r## ------------------------------------\r## t-value prob sig\r## Sign Bias 0.9204 0.3576 ## Negative Sign Bias 1.8706 0.0617 *\r## Positive Sign Bias 0.3632 0.7165 ## Joint Effect 3.6361 0.3035 ## ## ## Adjusted Pearson Goodness-of-Fit Test:\r## ------------------------------------\r## group statistic p-value(g-1)\r## 1 20 202.1 1.313e-32\r## 2 30 226.2 1.980e-32\r## 3 40 248.6 2.462e-32\r## 4 50 310.7 9.965e-40\r## ## ## Elapsed time : 0.560498\rTo obtain specific result of the GARCH model, we use the following code:\ncoefficient \u0026lt;-coef(Garch)\rvolatility \u0026lt;- sigma(Garch)\rlong.run.variance \u0026lt;- uncvariance(Garch)\rVAR\rThe following data will be used to estimate VAR model.\na\u0026lt;- c(3.1,3.4,5.6,7.5,5,6,6,7.5,4.5,\r6.7,9,10,8.9,7.2,7.5,6.8,9.1)\rb \u0026lt;- c(3.2,3.3,4.6,8.5,6,6.2,5.9,7.3,\r4,7.2,3,12,9,6.5,5,6,7.5)\rd \u0026lt;-c(4,6.2,5.3,3.6,7.5,6,6.2,6.9,\r8.2,4,4.2,5,11,3,2.5,3,6)\rdf \u0026lt;-data.frame(a,b,d)\rTo estimate a VAR model, we need to install and load vars packages.\ninstall.packages(\u0026quot;vars\u0026quot;)\rlibrary(vars) The following code estimates the VAR(2) model.\nabvar\u0026lt;-VAR(df,p=2) #run VAR(2)\rcoef(abvar) #coefficient estiamte of VAR\r## $a\r## Estimate Std. Error t value Pr(\u0026gt;|t|)\r## a.l1 0.59366615 0.3776796 1.5718776 0.1546224\r## b.l1 -0.53728016 0.3153665 -1.7036692 0.1268463\r## d.l1 0.06427631 0.2620526 0.2452802 0.8124144\r## a.l2 0.59478214 0.4406631 1.3497434 0.2140455\r## b.l2 -0.49271501 0.3681374 -1.3383999 0.2175550\r## d.l2 0.13247171 0.2139979 0.6190328 0.5531098\r## const 4.55502873 2.5585550 1.7803130 0.1128965\r## ## $b\r## Estimate Std. Error t value Pr(\u0026gt;|t|)\r## a.l1 1.03577283 0.4390665 2.3590341 0.04602757\r## b.l1 -0.98047999 0.3666252 -2.6743391 0.02817211\r## d.l1 0.43849071 0.3046458 1.4393458 0.18800763\r## a.l2 0.77048414 0.5122871 1.5040084 0.17098968\r## b.l2 -0.74120465 0.4279733 -1.7318948 0.12153171\r## d.l2 -0.08577585 0.2487804 -0.3447853 0.73914487\r## const 3.30736245 2.9744145 1.1119373 0.29846082\r## ## $d\r## Estimate Std. Error t value Pr(\u0026gt;|t|)\r## a.l1 0.09567126 0.4508959 0.2121804 0.8372726\r## b.l1 0.37908977 0.3765028 1.0068710 0.3434765\r## d.l1 0.26703079 0.3128536 0.8535327 0.4181858\r## a.l2 0.23097179 0.5260892 0.4390354 0.6722522\r## b.l2 -0.67987321 0.4395038 -1.5469110 0.1604714\r## d.l2 -0.18657598 0.2554831 -0.7302869 0.4860477\r## const 4.67527066 3.0545515 1.5305915 0.1644018\rsummary(abvar) #summary of VAR\r## ## VAR Estimation Results:\r## ========================= ## Endogenous variables: a, b, d ## Deterministic variables: const ## Sample size: 15 ## Log Likelihood: -71.865 ## Roots of the characteristic polynomial:\r## 0.8034 0.8034 0.6583 0.6583 0.4639 0.4639\r## Call:\r## VAR(y = df, p = 2)\r## ## ## Estimation results for equation a: ## ================================== ## a = a.l1 + b.l1 + d.l1 + a.l2 + b.l2 + d.l2 + const ## ## Estimate Std. Error t value Pr(\u0026gt;|t|)\r## a.l1 0.59367 0.37768 1.572 0.155\r## b.l1 -0.53728 0.31537 -1.704 0.127\r## d.l1 0.06428 0.26205 0.245 0.812\r## a.l2 0.59478 0.44066 1.350 0.214\r## b.l2 -0.49272 0.36814 -1.338 0.218\r## d.l2 0.13247 0.21400 0.619 0.553\r## const 4.55503 2.55856 1.780 0.113\r## ## ## Residual standard error: 1.552 on 8 degrees of freedom\r## Multiple R-Squared: 0.4615, Adjusted R-squared: 0.0576 ## F-statistic: 1.143 on 6 and 8 DF, p-value: 0.4184 ## ## ## Estimation results for equation b: ## ================================== ## b = a.l1 + b.l1 + d.l1 + a.l2 + b.l2 + d.l2 + const ## ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## a.l1 1.03577 0.43907 2.359 0.0460 *\r## b.l1 -0.98048 0.36663 -2.674 0.0282 *\r## d.l1 0.43849 0.30465 1.439 0.1880 ## a.l2 0.77048 0.51229 1.504 0.1710 ## b.l2 -0.74120 0.42797 -1.732 0.1215 ## d.l2 -0.08578 0.24878 -0.345 0.7391 ## const 3.30736 2.97441 1.112 0.2985 ## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\r## ## ## Residual standard error: 1.805 on 8 degrees of freedom\r## Multiple R-Squared: 0.616, Adjusted R-squared: 0.328 ## F-statistic: 2.139 on 6 and 8 DF, p-value: 0.1578 ## ## ## Estimation results for equation d: ## ================================== ## d = a.l1 + b.l1 + d.l1 + a.l2 + b.l2 + d.l2 + const ## ## Estimate Std. Error t value Pr(\u0026gt;|t|)\r## a.l1 0.09567 0.45090 0.212 0.837\r## b.l1 0.37909 0.37650 1.007 0.343\r## d.l1 0.26703 0.31285 0.854 0.418\r## a.l2 0.23097 0.52609 0.439 0.672\r## b.l2 -0.67987 0.43950 -1.547 0.160\r## d.l2 -0.18658 0.25548 -0.730 0.486\r## const 4.67527 3.05455 1.531 0.164\r## ## ## Residual standard error: 1.853 on 8 degrees of freedom\r## Multiple R-Squared: 0.6278, Adjusted R-squared: 0.3487 ## F-statistic: 2.249 on 6 and 8 DF, p-value: 0.143 ## ## ## ## Covariance matrix of residuals:\r## a b d\r## a 2.4097 0.7713 -1.0454\r## b 0.7713 3.2566 0.6701\r## d -1.0454 0.6701 3.4345\r## ## Correlation matrix of residuals:\r## a b d\r## a 1.0000 0.2753 -0.3634\r## b 0.2753 1.0000 0.2004\r## d -0.3634 0.2004 1.0000\rTo generate coefficient plot, we need to install and load coefplot package:\ninstall.packages(\u0026quot;coefplot\u0026quot;)\rlibrary(coefplot)\rThe following code generates the coefficient plot for the VAR model:\ncoefplot(abvar$varresult$a)\rcoefplot(abvar$varresult$b)\rcoefplot(abvar$varresult$d)\rPanel Data\rTo estimate panel data model, we need to install and load package plm.\ninstall.packages(\u0026quot;plm\u0026quot;)\rlibrary(plm)\rWe have the following panel data\ntime \u0026lt;- c(1,2,1,2,1,2,1,2,1,2,1,2)\rfirm \u0026lt;-c(1,1,2,2,3,3,4,4,5,5,6,6)\rx \u0026lt;- c(1, 2, 4, 3, 5, 4, 2, 5,5,6,7,8)\ry \u0026lt;- c(2, 3, 5, 4, 3, 2, 4, 7,7,8,5,7)\rp.df \u0026lt;- data.frame(time, firm, x, y)\rp.df \u0026lt;- pdata.frame(p.df, index = c(\u0026quot;firm\u0026quot;, \u0026quot;time\u0026quot;), drop.index = F, row.names = T)\rClustering\rWe first estimate the model based on pooled OLS.\npooled.plm \u0026lt;- plm(formula=y~x, data=p.df, model=\u0026quot;pooling\u0026quot;) Then we calculate the variance-covariance matrix to be clustered by group.\ncoeftest(pooled.plm, vcov=vcovHC(pooled.plm, type=\u0026quot;sss\u0026quot;, cluster=\u0026quot;group\u0026quot;)) ## ## t test of coefficients:\r## ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 1.81164 0.68521 2.6439 0.024568 * ## x 0.67808 0.17151 3.9536 0.002715 **\r## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\rThen we calculate the variance-covariance matrix to be clustered by time.\ncoeftest(pooled.plm, vcov=vcovHC(pooled.plm, type=\u0026quot;sss\u0026quot;, cluster=\u0026quot;time\u0026quot;)) ## ## t test of coefficients:\r## ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 1.81164 0.71388 2.5377 0.029478 * ## x 0.67808 0.21088 3.2154 0.009246 **\r## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\rTwo-way clustering of both time and group:\ncoeftest(pooled.plm, vcov=vcovDC(pooled.plm, type=\u0026quot;sss\u0026quot;))\r## ## t test of coefficients:\r## ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## (Intercept) 1.81164 0.81130 2.2330 0.04959 *\r## x 0.67808 0.22838 2.9691 0.01407 *\r## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\rFixed Effect Model\rWe first estimate the model based on pooled OLS.\nfe.plm \u0026lt;- plm(formula=y~x, data=p.df, model=\u0026quot;within\u0026quot;)\rThen we calculate the variance-covariance matrix to be clustered by group.\ncoeftest(fe.plm, vcov=vcovHC(fe.plm, type=\u0026quot;sss\u0026quot;,\rcluster=\u0026quot;group\u0026quot;)) ## ## t test of coefficients:\r## ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## x 1.071429 0.089074 12.028 7.008e-05 ***\r## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\rThen we calculate the variance-covariance matrix to be clustered by time.\ncoeftest(fe.plm, vcov=vcovHC(fe.plm, type=\u0026quot;sss\u0026quot;, cluster=\u0026quot;time\u0026quot;)) ## ## t test of coefficients:\r## ## Estimate Std. Error t value Pr(\u0026gt;|t|) ## x 1.0714e+00 4.6089e-10 2324719242 \u0026lt; 2.2e-16 ***\r## ---\r## Signif. codes: 0 \u0026#39;***\u0026#39; 0.001 \u0026#39;**\u0026#39; 0.01 \u0026#39;*\u0026#39; 0.05 \u0026#39;.\u0026#39; 0.1 \u0026#39; \u0026#39; 1\rSimulation\rWe will consider two different simulations:\nrandom walk model, and\rRoll model of security price.\rRandom Walk\rWe first construct a random walk function that simulates random walk model. It takes the number of period (N), initial value (x0), drift (mu), and variance. The function use rnorm() to generate random normal variable, and then use cumsum() to get the random walk. Note that the whole function is based on vector operation, instead of looping over time.\nRW \u0026lt;- function(N, x0, mu, variance) {\rz\u0026lt;-cumsum(rnorm(n=N, mean=0, sd=sqrt(variance)))\rt\u0026lt;-1:N\rx\u0026lt;-x0+t*mu+z\rreturn(x)\r}\r# mu is the drift\rP1\u0026lt;-RW(100,10,0,0.0004)\rP2\u0026lt;-RW(100,10,0,0.0004)\rplot(P1, main=\u0026quot;Random Walk without Drift\u0026quot;, xlab=\u0026quot;t\u0026quot;,ylab=\u0026quot;Price\u0026quot;, ylim=c(9.7,10.3),\rtyp=\u0026#39;l\u0026#39;, col=\u0026quot;red\u0026quot;)\rpar(new=T) #to draw in the same plot\rplot(P2, main=\u0026quot;Random Walk without Drift\u0026quot;, xlab=\u0026quot;t\u0026quot;,ylab=\u0026quot;Price\u0026quot;, ylim=c(9.7,10.3),\rtyp=\u0026#39;l\u0026#39;, col=\u0026quot;blue\u0026quot;)\rpar(new=F)\rRoll Model\rTo simulate the Roll model, we first simulate the price series and simulated trade prices. We calculate the first difference of the price and then we can estimate the first and the second orders of autocovariances. Then we can compare the true trading cost with the estimate one.\nrequire(zoo)\rtrial \u0026lt;-1000 #Number of trial\rcost \u0026lt;-c() #cost each trial\rsd \u0026lt;-c() #sd each trial\rtrue.cost = 2\rtrue.sd = 1\rtime = 1:trial\rfor (i in 1:trial) {\r#Simulated Price Series\repsilon = rnorm(time,sd=true.sd)\rprices = cumsum(epsilon)\rm_t = zoo(prices)\ra_t = m_t + true.cost\rb_t = m_t - true.cost\r#simulated trade prices q_t = sign(rnorm(time))\rp_t = m_t + (true.cost * q_t)\r#1st difference of prices\rdelta_p \u0026lt;- p_t-lag(p_t) #omit n.a. entry\rdelta_p \u0026lt;- na.omit(delta_p) gamma_0 \u0026lt;- var(delta_p)\rgamma_1 \u0026lt;- cov(delta_p[1:length(delta_p)-1], delta_p[2:length(delta_p)])\rsigma_2 \u0026lt;- gamma_0 + 2 * gamma_1\rif(gamma_1 \u0026gt; 0){\rprint(\u0026quot;Error: Positive Autocovariance!\u0026quot;)\r} else {\rcost \u0026lt;- append(cost,sqrt(-1*gamma_1))\rsd \u0026lt;-append(sd,sigma_2)\r}\r}\r# Stimulated Cost Plot\rplot(cost)\rest.cost \u0026lt;- mean(cost)\rplot(sd)\rest.sd \u0026lt;- mean(sd)\r# Final Result\rcat(\u0026quot;True cost and sd are\u0026quot;, true.cost,\u0026quot; and \u0026quot;, true.sd)\r## True cost and sd are 2 and 1\rcat(\u0026quot;Estimated cost and sd are\u0026quot;, est.cost,\u0026quot; and \u0026quot;, est.sd)\r## Estimated cost and sd are 2.001182 and 1.003915\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"483224f17dd45d4218a63b7c8e7a622d","permalink":"/programming/r-programming/ta-with-r-ch4/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r-ch4/","section":"programming","summary":"no\rStatistical Analysis\rWe first review some basic function of statistics: central tendency and dispersion before going into regression analysis.\nLearning objectives:\nsummary statics\ngenerate random numbers\nestimate OLS","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":"\rProgramming\rWe will learn basic programming techniques in R to prepare ourselves to write program:\nConditional statements\rIterative Statements\rLearning Objective:\nLearn how to use relational operators\nLearn how to use logical operators\nLearn how to use conditional statements (if)\nLearn how to use basic iterative statements (do while, for)\nLearn how to use advanced iterative statements (apply, Reduce)\nLogical statements\rA logical variable (or Boolean variable) is either 0 (false) or 1 (true).\nThe basic way to define a logical variable is by relational operators by comparing two expressions. For example, we often ask if a variable x is bigger than a certain number?\nA more sophiciated way is to combine two simple logical statements using logical operators.\nRelational Operators\rIt compares two numerical expressions and return a Boolean variable: either 0 (FALSE) or 1 (TRUE).\rThe following table shows the six commonly used relational operators\nRelational operator\rInterpretation\r\u0026lt;\rless than\r\u0026lt;=\rless than or equal to\r\u0026gt;\rgreater than\r\u0026gt;=\rgreater than or equal to\r==\requal to\r!=\rnot equal to\rPrecedence of relational operators is lower than arithmetic operators. To avoid confusion, it is good practice to use brackets to control ordering. For example, if we write 2 + 2 1 + 3, then the software we do the arithmetic operators first. This implies we have 4 4, which implies a false statement\nLogical Operators\rIn practice, we often use two or more conditions to decide what to do. For example, scholarship is often given if the candidate has done well in both academic and extra-curricular activities.\nTo combine different conditions, there are three logical operators: (1) \u0026amp;\u0026amp;, (2) ||, and (3) !.\nFirst, \u0026amp;\u0026amp; is similar to AND in English, that is, A \u0026amp;\u0026amp; B is true only if both A and B are true. Second, is similar to OR in English, that is, A || B is false only if both A and B are false. Third, ! is similar to NOT in English, that is, !A is true only if A is false.\nA\rB\rA \u0026amp;\u0026amp; B\rA || B\r!A\r!B\rfalse\rfalse\rfalse\rfalse\rtrue\rtrue\rfalse\rtrue\rfalse\rtrue\rtrue\rfalse\rtrue\rfalse\rfalse\rtrue\rfalse\rtrue\rtrue\rtrue\rtrue\rtrue\rfalse\rfalse\rDifferent relational operators, the precedence of logical operators can be high. While and and or operators are lower in precedence than relational operators, not has a very high precedence and almost always evaluated first. - Hence, it is always a good practice to use brackets to control operation ordering.\nConditional\rPerform a different set of statement(s) based on whether the condition is true or false.\nif (condition){\rblocks to execute when condition hold\r} else{\rblocks to execuse when condition fails\r}\rExample of if-else statement\nx \u0026lt;- 1\ry \u0026lt;- 2\rif(x \u0026lt; y){print(\u0026quot;Yes!\u0026quot;)}\r## [1] \u0026quot;Yes!\u0026quot;\rif(x\u0026lt;y){\rprint(\u0026quot;Yes!\u0026quot;)\r} else{\rprint(\u0026quot;No~\u0026quot;)\r}\r## [1] \u0026quot;Yes!\u0026quot;\rExercises\rWrite a function f(x) that returns absolute value of x.\nIf x is positive, then f(x) =x.\nIf x is negative, then f(x) = -x.\nWrite a function f(x) that returns CAP given exam score x.\nIf x=90, then CAP is 5.\nIf x is between 80 and 90, then CAP is 4.\nIf x is between 70 and 80, then CAP is 3.\nIf x is less than 70, then CAP is 2.\nWrite a function f(x,y) that returns grade using test score x and exam score y.\nIf x+y is no less than 90 and y is no less than 40, then grade is A+.\rIf x+y is no less than 80 but less than 90, then CAP is A.\rIf x+y is no less than 70 but less than 80, then CAP is A-.\rIf x+y is less than 70, then CAP is B+.\rApplication: Checking Data Type\rOne important usage of conditional statement is to check whether the data for calculation is correct.\nVery often, we only want to execute the code if the data point exists. We can use\ris.na(). It will return true if it is NA; otherwise false.\nif(!is.na(x)){\rdo.something\r}\rAnother related function is to check if the data type is number. The function is.numeric() returns true if it is numerical variable; otherwise false.\nApplication: Missing data\rNote that R reports error if there is an NA in the statement.\nx \u0026lt;- NA\rx \u0026gt; 0\r## [1] NA\rVery often, we want to set ignore those case with missing data (NA). Then we will use isTRUE\nx \u0026lt;- NA\risTRUE(x \u0026gt; 0)\r## [1] FALSE\rLoop\rWe very often want to execute codes multiple times with the same or similar conditions. There are two basic forms of repetition statement in R:\nWhile loop: repeat as long as condition is true,\rfor loop over integers: repeat for a pre-specific number of times, and\rfor loop over vector.\rWhile loop\rThe syntax of while loop is as follows:\nwhile (condition){\rkeep doing when condition holds\r}\rThe following example shows how to calculate the sum of all integers from 1 to 10.\nn \u0026lt;- 10\ri \u0026lt;- 1\rsum \u0026lt;- 0\rwhile (i \u0026lt;= n){ # i is the control variable sum \u0026lt;- sum + i # accumulate i into sum\ri \u0026lt;- i + 1 # increment i by 1\r}\rFor Loop over integers\rLoops that are based on the value of an integer variable. It increases by the same amount each time, and ends when the variable reaches a specified value\nThe syntax for a for loop is simple.\nm \u0026lt;- 1\rn \u0026lt;-10\rfor (i in m:n){\rrun as long as condition holds\r}\rLoop over vectors\rWe can define a vector and construct a for loop that executes for each element in the vector:\nstudents \u0026lt;- c(\u0026quot;Amy\u0026quot;, \u0026quot;Tom\u0026quot;)\rfor (student in students){\rcat(student,\u0026quot;\\n\u0026quot;)\r}\r## Amy ## Tom\rExample: Technical Indicators\rA n-day simple moving avaerage (n-day SMA) is arithmetic average of prices of past n days:\n\\[ SMA_t(n) = \\frac{P_t+\\ldots+P_{t-n+1}}{n}\\]\nThe following is an SMA function:\nmySMA \u0026lt;- function (price,n){\rsma \u0026lt;- c()\rsma[1:(n-1)] \u0026lt;- NA\rfor (i in n:length(price)){\rsma[i]\u0026lt;-mean(price[(i-n+1):i])\r}\rreturn(sma)\r}\rmySMA(1:10,5)\r## [1] NA NA NA NA 3 4 5 6 7 8\rAn n-day exponential moving avaerage (n-day EMA) is exponential average of prices where weighting of more recent prices carry higher weights. The first EMA is similar to SMA and the updating formula is simple.\n\\[ EMA_t(n) = \\beta P_t +(1-\\beta) EMA_{t-1}(n)\\]\nwhere \\(\\beta =\\frac{2}{n+1}\\), \\(n\\) is number of days and \\(P_t\\) is price of time \\(t\\).\nThis is an EMA function:\nmyEMA \u0026lt;- function (price,n){\rema \u0026lt;- c()\rema[1:(n-1)] \u0026lt;- NA\rema[n]\u0026lt;- mean(price[1:n])\rbeta \u0026lt;- 2/(n+1)\rfor (i in (n+1):length(price)){\rema[i]\u0026lt;-beta * price[i] + (1-beta) * ema[i-1]\r}\rreturn(ema)\r}\rmyEMA(1:10,5)\r## [1] NA NA NA NA 3 4 5 6 7 8\rAn n-day relative strenght index (RSI) is normalized n-day relative strength (RS) that is ratio of days of stock price has gone up to the days of stock price have gone down.\nThis is an RSI function:\nmyRSI \u0026lt;- function (price,n){\rU \u0026lt;- rep(0,length(price))\rD \u0026lt;- rep(0,length(price))\rrs \u0026lt;- rep(NA,length(price))\rrsi \u0026lt;- rep(NA,length(price))\rfor (i in 2:length(price)){\rif (price[i]\u0026gt;price[(i-1)]){\rU[i] \u0026lt;- 1\r} else if (price[i]\u0026lt;price[(i-1)]){\rD[i] \u0026lt;- 1\r}\rif (i\u0026gt;n){\rif (sum(D[(i-n+1):i])==0){\rrsi[i] \u0026lt;- 100\r} else{\rrs[i] \u0026lt;- sum(U[(i-n+1):i])/\rsum(D[(i-n+1):i])\rrsi[i] \u0026lt;- rs[i]/(rs[i]+1)*100\r}\r}\r}\rreturn(rsi)\r}\rmyRSI(sample(4:10,20,replace=TRUE),6)\r## [1] NA NA NA NA NA NA 33.33333 40.00000\r## [9] 20.00000 40.00000 60.00000 40.00000 50.00000 40.00000 60.00000 40.00000\r## [17] 40.00000 60.00000 50.00000 60.00000\rExercise\rUse while loop to calculate the product of all numbers from 50 to 100.\nUse for loop to calculate the product of all numbers from 50 to 100.\nWrite a MACD function that returns both macd and signal line using four inputs:\nprice: price vector\rS: number of periods for fast moving average\rL: number of periods for slow moving average\rK: number of periods for signal moving average\rApply Family\rApply family is a very convenient tools to loop over data structure (vector, array, matrix and list). The most useful for our purposes are:\napply(),\rsapply(), and\rlapply().\rapply\rWe will to apply a function to each row or each column on a matrix. It will apply a function by-column (=2) or by-row (=1).\nx \u0026lt;- matrix(1:9, nrow = 3, ncol=3)\rx\r## [,1] [,2] [,3]\r## [1,] 1 4 7\r## [2,] 2 5 8\r## [3,] 3 6 9\rapply(x,1,mean) # average each row\r## [1] 4 5 6\rapply(x,2,mean) # average each column\r## [1] 2 5 8\rsapply and lapply\rSometimes, we will apply a function repeatedly on each element of a vector (or a list). Then sapply is more convenient then a for loop.\nConsider the following for loop that returns the square of each element\nx \u0026lt;- c(1,3,5)\rfor (i in 1:length(x)) {\rx[i] \u0026lt;- x[i]^2\r}\rx\r## [1] 1 9 25\rWe can do the same using sapply() with much cleaner code.\nx \u0026lt;- c(1,3,5)\rx \u0026lt;- sapply(x, function(x) x^2)\rx\r## [1] 1 9 25\rlapply() is the same as sapply() but we end up with a list instead of vector. We can use unlist to get back the same result as sapply().\nx \u0026lt;- c(1,3,5)\rx \u0026lt;- lapply(x, function(x) x^2)\rx\r## [[1]]\r## [1] 1\r## ## [[2]]\r## [1] 9\r## ## [[3]]\r## [1] 25\rx \u0026lt;- unlist(x)\rReduce\rSometimes, we want to get a final result by applying operation one by one.\nOn vector\rFor example, 2-day moving average is \\[EMA_{t}=\\frac{1}{3}p_{t}+\\frac{2}{3}EMA_{t-1}\\].\nThe following example shows the final 2-day EMA with initial EMA being 5.\nprice \u0026lt;- 1:10\rema \u0026lt;- 5\rfor (i in 1:length(price)) {\rema \u0026lt;- (ema + 2*price[i])/3 }\rema\r## [1] 9.500093\rThe following example use Reduce to simplify the code.\nprice \u0026lt;- 1:10\rinitial \u0026lt;- 5\rema \u0026lt;- Reduce(function(x,y){(x+2*y)/3},price,initial)\rema\r## [1] 9.500093\rOn list\rThe following example shows how we can combine data sets.\nHI \u0026lt;- data.frame(stock=c(1,2), high=c(7,8))\rLO \u0026lt;- data.frame(stock=c(1,2), low=c(1,2))\rOP \u0026lt;- data.frame(stock=c(1,2), open=c(3,6))\rCL \u0026lt;- data.frame(stock=c(1,2), close=c(5,5))\rdf \u0026lt;-merge(HI,LO)\rdf \u0026lt;-merge(df,OP)\rdf \u0026lt;-merge(df,CL)\rdf\r## stock high low open close\r## 1 1 7 1 3 5\r## 2 2 8 2 6 5\rSince merging is one by one on the data.frame, we just need to create a list of data.frame.\nHI \u0026lt;- data.frame(stock=c(1,2), high=c(7,8))\rLO \u0026lt;- data.frame(stock=c(1,2), low=c(1,2))\rOP \u0026lt;- data.frame(stock=c(1,2), open=c(3,6))\rCL \u0026lt;- data.frame(stock=c(1,2), close=c(5,5))\rdf \u0026lt;- Reduce(function(x,y) {merge(x,y)}, list(HI, LO, OP, CL))\rdf\r## stock high low open close\r## 1 1 7 1 3 5\r## 2 2 8 2 6 5\rTricks\rThere are some minor tricks to help you in coding. For long codes, we sometimes want to calculate the time required to complete a task, and we might improve the efficiency of the code if it is too slow.\nTiming code\rTo get the current time, we may use Sys.time(). Put this at the beginning and the end of the code. Then the difference is the run time.\nt1 \u0026lt;- sys.time()\r#…run code here …#\rt2 \u0026lt;- sys.time()\rt2-t1\rSuppress annoying message\rR tends to give a lot of warning and messages when you run a long code. Sometimes you want to suppress them to keep your console window clean.\nsuppressMessage(…)\rsuppressWarnings(…)\rAll files names in a folder\rThe function list.files will find all files in a folder.\n# full.names = TRUE for full path\rfilenames \u0026lt;- list.files(path = \u0026quot;./folder/\u0026quot;, full.names = TRUE)\rUsing Reduce() and lapply() we can read all csv files from the folder, and merge them together\nsetwd(\u0026quot;C:/path\u0026quot;)\rfile.names \u0026lt;-list.files(path = \u0026quot;.\u0026quot;, pattern=\u0026quot;*.csv\u0026quot;,\rfull.names = TRUE)\rfile.list \u0026lt;- lapply(file.names, function(x){\rread.csv(file = x,\rheader = TRUE,\rstringsAsFactors = FALSE)})\rdf\u0026lt;-Reduce(function(x,y) {merge(x, y, all=TRUE)},\rfile.list)\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"34d55587ff2280fba0927befb14d43ef","permalink":"/programming/r-programming/ta-with-r-ch5/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r-ch5/","section":"programming","summary":"Programming\rWe will learn basic programming techniques in R to prepare ourselves to write program:\nConditional statements\rIterative Statements\rLearning Objective:\nLearn how to use relational operators\nLearn how to use logical operators","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":"\rno\rScrapping\rWe will cover two common ways to extract files that is not from database directly:\npdf files, and\rhtml files.\rPDF files\rWe will cover how to scrap data from:\nextract pdf files stored in offline\rdownload pdf file and extract\rmassive download and extact\rOffline pdf file\rWe need to install and load pdftools package to do the extraction.\ninstall.packages(\u0026quot;pdftools\u0026quot;)\rlibrary(pdftools)\rTo read pdf as textfile, use pdf_text().\ntxt \u0026lt;- pdf_text(\u0026quot;path/file.pdf\u0026quot;)\rThen we can extract a particular page.\ntest \u0026lt;- txt[49] #page 49\rThe pdf file contains a table.\nTo extract rows into list, we use the function scan.\nrows\u0026lt;-scan(textConnection(test), what=\u0026quot;character\u0026quot;, sep = \u0026quot;\\n\u0026quot;)\rThen we can delimit rows into cells.\nrow =unlist(strsplit(rows[1],\u0026quot; \\\\s+ \u0026quot;))\rOnline pdf file\rFirst we download a pdf file from the web. We use the function download.file.\nImport the pdf file and then extract P.49 where it has a table. Then we scan to separate text file into rows.\nThen we loop over the rows (starting from row 7) for the following operations:\r1. split each row that is separated by space \\\\s+ using strsplit,\r2. unlist the result to make it a vector, and (3) store the third cells if it is not empty.\nlink \u0026lt;- paste0(\r\u0026quot;http://www.singstat.gov.sg/docs/\u0026quot;,\r\u0026quot;default-source/default-document-library/\u0026quot;,\r\u0026quot;publications/publications_and_papers/\u0026quot;,\r\u0026quot;cop2010/census_2010_release3/\u0026quot;,\r\u0026quot;cop2010sr3.pdf\u0026quot;)\rdownload.file(link, \u0026quot;census2010_3.pdf\u0026quot;, mode = \u0026quot;wb\u0026quot;)\rtxt \u0026lt;- pdf_text(\u0026quot;census2010_3.pdf\u0026quot;)\rtest \u0026lt;- txt[49] #P.49\rrows\u0026lt;-scan(textConnection(test), what=\u0026quot;character\u0026quot;,\rsep = \u0026quot;\\n\u0026quot;) name\u0026lt;-c()\rtotal\u0026lt;-c()\rfor (i in 7:length(rows)){\rrow = unlist(strsplit(rows[i],\u0026quot; \\\\s+ \u0026quot;))\rif (!is.na(row[3])){\rname \u0026lt;- c(name, row[2])\rtotal\u0026lt;- c(total,\ras.numeric((gsub(\u0026quot;,\u0026quot;, \u0026quot;\u0026quot;, row[3]))))\r}\r}\rScrapping through massive download\rWe will use the RCurl package to download a large of csv files. Very often, we need to download a lot of csv files from the website. Luckily csv files are stored on the website with structured url paths.\nFor example, suppose that we want to download the all historical weather data of Singapore airport. We go to the website http://www.weather.gov.sg/climate-historical-daily/. Then we can see from the bottom that the links for download csv file is\rhttp://www.weather.gov.sg/files/dailydata/DAILYDATA_S24_201712.csv.\nHence, we will use getURL to get the file and the use textConnection to read the csv file directly.\ninstall.packages(\u0026quot;RCurl\u0026quot;)\rlibrary(RCurl)\rlink\u0026lt;-paste0(\u0026quot;http://www.weather.gov.sg/files/\u0026quot;,\r\u0026quot;dailydata/DAILYDATA_S24_201712.csv\u0026quot;)\rx \u0026lt;- getURL(URL)\rdf\u0026lt;-read.csv(textConnection(x))\rHowever, very often, we want to download more months. Then we can use loop.\rBy guessing and checking, we know that S24 refers to Changi airport, 2017 is the year and 12 is December. To download the whole year of data, then we have to download all 12-month data, and at each time the link dynamically changes and the data is combined each round:\nsite\u0026lt;-\u0026quot;http://www.weather.gov.sg/files/dailydata/\u0026quot;\rmonths \u0026lt;- c(\u0026quot;01\u0026quot;,\u0026quot;02\u0026quot;,\u0026quot;03\u0026quot;,\u0026quot;04\u0026quot;,\u0026quot;05\u0026quot;,\u0026quot;06\u0026quot;,\r\u0026quot;07\u0026quot;,\u0026quot;08\u0026quot;,\u0026quot;09\u0026quot;,\u0026quot;10\u0026quot;,\u0026quot;11\u0026quot;,\u0026quot;12\u0026quot;)\rdf \u0026lt;-data.frame()\rfor (month in months){\rfilename \u0026lt;-paste0(\u0026quot;DAILYDATA_S24_2017\u0026quot;,month,\u0026quot;.csv\u0026quot;)\rlink\u0026lt;-paste0(site,filename)\rx \u0026lt;- getURL(link)\rtemp\u0026lt;-read.csv(textConnection(x))\rdf \u0026lt;-rbind(df,temp)\r}\rAlternatively, we can download each months as a separate csv file into a single folder and then combine all csv files at the end. This is particularly useful when the csv files are huge.\nThe following codes first download all the csv files into a temp folder and then combine all csv files in that folder. To combine all csv files in the folder, we need to obtain the path of all files using list.file'' where the optionfull.names’’ is set to be TRUE to also get the directory path. Then we need to have a list of csv files by using lapply with the import function fread. Finally, we use ``rbindlist’’ to combine all data in the list.\nsite\u0026lt;-\u0026quot;http://www.weather.gov.sg/files/dailydata/\u0026quot;\rmonths \u0026lt;- c(\u0026quot;01\u0026quot;,\u0026quot;02\u0026quot;,\u0026quot;03\u0026quot;,\u0026quot;04\u0026quot;,\u0026quot;05\u0026quot;,\u0026quot;06\u0026quot;,\r\u0026quot;07\u0026quot;,\u0026quot;08\u0026quot;,\u0026quot;09\u0026quot;,\u0026quot;10\u0026quot;,\u0026quot;11\u0026quot;,\u0026quot;12\u0026quot;)\rdf \u0026lt;-data.frame()\r# Download data\rfor (month in months){\rfilename \u0026lt;-paste0(\u0026quot;DAILYDATA_S24_2017\u0026quot;,month,\u0026quot;.csv\u0026quot;)\rlink\u0026lt;-paste0(site,filename)\rx \u0026lt;- getURL(link)\rtemp\u0026lt;-read.csv(textConnection(x))\rwrite.csv(temp,paste0(\u0026quot;./temp/\u0026quot;,filename), row.names=FALSE)\r}\r# Combine data\rlibrary(data.table)\rfolder\u0026lt;-\u0026quot;./temp/\u0026quot;\rcsv.list \u0026lt;- list.files(pattern = \u0026quot;\\\\.csv$\u0026quot;)\rlst \u0026lt;- lapply(csv.list, fread)\rdf \u0026lt;- rbindlist(lst,fill=TRUE)\rScrapping from Web\rWe will use the rvest package to scrap directly from the web. However, it is sometimes convenient to know what to extract using some minor tools. We will use SelectorGadget from Chrome browser.\nWith the keyword SelectorGadget, use internet search engine to download and install the file. The program is easy to use. The first click will select area and then subsequent click will include or exclude elements.\nTo install and load the rvest package, we use the following code:\ninstall.packages(\u0026quot;rvest\u0026quot;)\rlibrary(rvest)\rWikipedia Table\rWe will do two scrapping exercises:\nscarp from Wikipedia table, and\rscrap from an unfriendly website.\rThe following code extracts the student t’s distribution table from Wikipedia. Using the SelectorGadget, we can see that the table is called .wikitable. Then we will extract that using html_nodes() and then we parse the html data into a dataframe using html_table().\nlink \u0026lt;-paste0(\u0026quot;https://en.wikipedia.org/wiki/\u0026quot;,\r\u0026quot;Student%27s_t-distribution\u0026quot;)\rwebpage \u0026lt;- read_html(link)\rdata \u0026lt;- html_nodes(webpage,\u0026quot;.wikitable\u0026quot;)\rtable\u0026lt;- html_table(data[[1]],header = FALSE)\rOther Websites\rTo scarp from unstructural data, then we need to find what is the selector using the SelectorGadget. Then we can read the data as text.\nlink\u0026lt;-paste0(\u0026quot;http://www.fas.nus.edu.sg/ecs/\u0026quot;,\r\u0026quot;people/staff.html\u0026quot;)\rwebpage \u0026lt;- read_html(link)\rdata \u0026lt;- html_nodes(webpage,\u0026quot;br+ table td\u0026quot;)\rcontent \u0026lt;-html_text(data)\rThen we can transform dataset into dataframe.\ndf = data.frame(matrix(content,ncol=5,byrow=T),\rstringsAsFactors=FALSE)\rcolnames(df)\u0026lt;-df[1,]\rdf[-1,]\r## Title Name\r## 2 Satoru TAKAHASHI\\r\\n 6516 6259\r## 3 6516 6020 ecscnc\r## 4 ecszjl Director (Graduate Program)\r## 5 Title Name\r## 6 Management Assistant Officer Ms Fatimah AHMAD\\r\\n\\t\\t\\t\\t ## 7 Management Assistant Officer Ms CHEE Lee Kuen\r## 8 Management Assistant Officer Ms Diana ISMAIL\r## 9 Manager Ms Nicky KHEH\r## 10 Assistant Manager Ms NEO Seok Min\r## 11 Manager Ms PAK Ming Foon, Ginny\r## 12 Management Assistant Officer Mdm TAN Leng Choo\r## 13 Executive Ms TAN Pei Ying\r## 14 Executive Ms TANG Yuchen\r## 15 Manager Ms WEI Qing\r## 16 Manager Ms WOON Swee Yoke\r## 17 Management Assistant Officer Ms Salinah ZUBER\r## Tel Email\r## 2 ecsst Director (Undergraduate Program)\r## 3 Director (Master Program) ZENG Jinli \\r\\n ## 4 LUO Xiao\\r\\n 6516 6231\r## 5 Tel Email\r## 6 6516 3950 ecsfa\r## 7 6516 3942 ecsclk\r## 8 6516 6013 ecsdi\r## 9 6516 4878 ecsklc\r## 10 6516 3941 ecssec\r## 11 6516 3956 ecspmfg\r## 12 6516 1304 ecstlc\r## 13 6601 3508 pei.ying\r## 14 6601 4922 yuchen07\r## 15 6516 8909 weiq\r## 16 6516 6027 ecswsy\r## 17 6516 3958 ecssz\r## Head of Department\r## 2 CHIA Ngee Choon\\r\\n ## 3 6516 5177\r## 4 ecslx\r## 5 Main Area\r## 6 Undergraduate (levels 1000-2000)\r## 7 Timetabling\r## 8 Graduate (Coursework)\r## 9 Graduate\r## 10 Head\u0026#39;s Personal Assistant\r## 11 Undergraduate\r## 12 Graduate (Research)\r## 13 Department seminars\r## 14 Graduate (Master of Economics)\r## 15 Graduate (Master of Economics)\r## 16 Undergraduate\r## 17 Undergraduate (levels 3000-4000)\rrow.names(df) \u0026lt;- NULL\rhead(df[2:3], n=3)\r## Name Tel\r## 1 Name Tel\r## 2 6516 6259 ecsst\r## 3 ecscnc Director (Master Program)\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"27f9c1c37b68cb5fe3ef505008221444","permalink":"/programming/r-programming/ta-with-r-ch6/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r-ch6/","section":"programming","summary":"no\rScrapping\rWe will cover two common ways to extract files that is not from database directly:\npdf files, and\rhtml files.\rPDF files\rWe will cover how to scrap data from:","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":"\rno\rQuantmod\rQuantmod stands for ``quantitative financial modelling framework’’. It has three main functions:\ndownload data,\rcharting, and\rtechnical indicator.\rThen we can conduct simple test on trading strategies. We will learn how to test more complicated strategies.\nBefore we start, let us use the following code install and load quantmod.\nlibrary(quantmod)\rinstall.packages(\u0026quot;quantmod\u0026quot;)\rlibrary(quantmod)\rLearning Objectives:\nUse quantmod package to download stock prices\ncreate chart of stock prices and add technical indicators\nconstruct simple trading indicator and apply it into trading\nevaluate the performance of a trading rule based on return data\nDownloading data\rUse getSymbols to get data from yahoo or Google (default is yahoo)\ngetSymbols(\u0026quot;AAPL\u0026quot;)\rLet see what is inside the data.\nhead(AAPL)\r## AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted\r## 2003-01-02 0.5083427 0.5281666 0.5079888 0.5239188 45357200 0.915166\r## 2003-01-03 0.5239188 0.5285210 0.5164849 0.5274589 36863400 0.921349\r## 2003-01-06 0.5320605 0.5444505 0.5267507 0.5274589 97633200 0.921349\r## 2003-01-07 0.5235650 0.5309990 0.5122366 0.5256886 85586200 0.918258\r## 2003-01-08 0.5161310 0.5207326 0.5111750 0.5150689 57411200 0.899707\r## 2003-01-09 0.5175469 0.5281666 0.5132987 0.5196706 53813200 0.907746\rTo extract columns, we use Op, Hi, Lo, Cl, Vo and Ad\nOpen \u0026lt;- Op(AAPL) #Open Price\rHigh \u0026lt;- Hi(AAPL) # High price\rLow \u0026lt;- Lo(AAPL) # Low price\rClose\u0026lt;- Cl(AAPL) #Close Price\rVolume \u0026lt;- Vo(AAPL) #Volume\rAdjClose \u0026lt;- Ad(AAPL) # Adjusted close\rIf you wish to only import at a certain date e.g.,. 2000-01-01 to 2015-09-25, we can restrict the set the data to download.\ngetSymbols(\u0026quot;AAPL\u0026quot;, from=\u0026#39;2000-01-01\u0026#39;,to=\u0026#39;2015-09-25\u0026#39;)\r## [1] \u0026quot;AAPL\u0026quot;\rAlternatively, we can load the whole series and restrict using xts function last()\ngetSymbols(\u0026quot;AAPL\u0026quot;)\r## [1] \u0026quot;AAPL\u0026quot;\rAAPL \u0026lt;- last(AAPL,\u0026#39;1 year\u0026#39;)\rhead(AAPL)\r## AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted\r## 2020-01-02 296.24 300.60 295.19 300.35 33870100 298.8300\r## 2020-01-03 297.15 300.58 296.50 297.43 36580700 295.9247\r## 2020-01-06 293.79 299.96 292.75 299.80 29596800 298.2827\r## 2020-01-07 299.84 300.90 297.48 298.39 27218000 296.8799\r## 2020-01-08 297.16 304.44 297.16 303.19 33019800 301.6555\r## 2020-01-09 307.24 310.43 306.20 309.63 42527100 308.0630\rAlternatively, we can take the first 3 years by using first():\ngetSymbols(\u0026quot;AAPL\u0026quot;)\r## [1] \u0026quot;AAPL\u0026quot;\rAAPL \u0026lt;- first(AAPL,\u0026#39;3 years\u0026#39;)\rhead(AAPL)\r## AAPL.Open AAPL.High AAPL.Low AAPL.Close AAPL.Volume AAPL.Adjusted\r## 2007-01-03 12.32714 12.36857 11.70000 11.97143 309579900 10.36364\r## 2007-01-04 12.00714 12.27857 11.97429 12.23714 211815100 10.59366\r## 2007-01-05 12.25286 12.31428 12.05714 12.15000 208685400 10.51822\r## 2007-01-08 12.28000 12.36143 12.18286 12.21000 199276700 10.57016\r## 2007-01-09 12.35000 13.28286 12.16429 13.22429 837324600 11.44823\r## 2007-01-10 13.53571 13.97143 13.35000 13.85714 738220000 11.99609\rWe can also import three stocks at the same time by using a vector.\ngetSymbols(c(\u0026quot;AAPL\u0026quot;,\u0026quot;GOOG\u0026quot;))\r## [1] \u0026quot;AAPL\u0026quot; \u0026quot;GOOG\u0026quot;\rAlternatively, we can assign a vector of stocks and import based on the vector.\nstocklist \u0026lt;- c(\u0026quot;AAPL\u0026quot;,\u0026quot;GOOG\u0026quot;)\rgetSymbols(stocklist)\rThe package can also import non-US stocks.\ngetSymbols(\u0026quot;0941.hk\u0026quot;)\r#If error, try instead the following:\r#getSymbols(\u0026quot;0941.HK\u0026quot;,src=\u0026quot;yahoo\u0026quot;, auto.assign=FALSE)\rhead(`0941.HK`)\r## 0941.HK.Open 0941.HK.High 0941.HK.Low 0941.HK.Close 0941.HK.Volume\r## 2007-01-02 67.25 70.00 67.10 69.6 35293388\r## 2007-01-03 69.90 71.80 69.50 70.7 41163203\r## 2007-01-04 70.60 70.95 67.30 68.2 37286533\r## 2007-01-05 67.50 69.50 66.30 69.5 24502496\r## 2007-01-08 67.50 68.40 67.45 67.7 15584163\r## 2007-01-09 68.00 68.60 65.55 66.3 17861491\r## 0941.HK.Adjusted\r## 2007-01-02 42.11264\r## 2007-01-03 42.77821\r## 2007-01-04 41.26554\r## 2007-01-05 42.05212\r## 2007-01-08 40.96300\r## 2007-01-09 40.11592\rBesides prices, very often we are interested in the trading volume. Moreover, we would like to find volume over time: weekly, monthly, quarterly and yearly. We can use apply and sum to calculate the rolling sum of volume to each distinct period.\nWeekVoYa\u0026lt;- apply.weekly(Vo(AAPL),sum)\r# sum from Monday to Friday\rMonthVoYa \u0026lt;- apply.monthly(Vo(AAPL),sum)\r# sum to month\rQuarterVoYa \u0026lt;- apply.quarterly(Vo(AAPL),sum)\r# sum to quarter\rYearVoYa \u0026lt;- apply.yearly(Vo(AAPL),sum)\r# sum to year\rIn some case, we are interested in average than the sum. Then we can use apply and mean.\nWeekAveVoClYa\u0026lt;- apply.weekly(Vo(AAPL),mean)\r# weekly average volume\rCharting\rQuantmod draw nice charts of following common types:\nline\rbars\rcandlesticks\rWe can use chartSeries() and specify the types directly.\nThe line chart displays stock price of AAPL in 2007 by using the subset option. The option theme is set to be chartTheme(‘white’) as the default option chartTheme(‘black’) is not printer-friendly.\nchartSeries(AAPL,\rtype=\u0026quot;line\u0026quot;,\rsubset=\u0026#39;2007\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\rThe bar chart displays stock price of AAPL in May to June 2007 by using the subset option.\nchartSeries(AAPL,\rtype=\u0026quot;bar\u0026quot;,\rsubset=\u0026#39;2007-05::2007-06\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\rThe following candle stick chart displays stock price of AAPL in May only.\nchartSeries(AAPL,\rtype=\u0026quot;candlesticks\u0026quot;,\rsubset=\u0026#39;2007-05\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\rFinally The following candle stick chart displays stock price of AAPL a few days in May.\nchartSeries(AAPL,\rtype=\u0026quot;auto\u0026quot;,\rsubset=\u0026#39;2007-05-10::2007-05-30\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\rTechnical Indicators\rTechnical trading rule (TTR) package is loaded when we load quantmod package.\nIf you want to use it separately, then just load the package as usual:\ninstall.packages(\u0026quot;TTR\u0026quot;)\rlibrary(TTR)\rSimple Moving Average\rsma \u0026lt;-SMA(Cl(AAPL),n=20)\rtail(sma,n=5)\r## SMA\r## 2020-06-24 339.9440\r## 2020-06-25 342.2735\r## 2020-06-26 344.0580\r## 2020-06-29 346.0545\r## 2020-06-30 348.1275\rExponential moving average\rema \u0026lt;-EMA(Cl(AAPL),n=20)\rtail(ema,n=5)\r## EMA\r## 2020-06-24 341.9732\r## 2020-06-25 344.1510\r## 2020-06-26 345.0538\r## 2020-06-29 346.6468\r## 2020-06-30 348.3756\rBollinger band\rbb \u0026lt;-BBands(Cl(AAPL),s.d=2)\rtail(bb,n=5)\r## dn mavg up pctB\r## 2020-06-24 310.2851 339.9440 369.6029 0.8391221\r## 2020-06-25 312.4778 342.2735 372.0692 0.8786875\r## 2020-06-26 316.0863 344.0580 372.0297 0.6711018\r## 2020-06-29 319.0240 346.0545 373.0850 0.7908848\r## 2020-06-30 322.0402 348.1275 374.2148 0.8195523\rMomentum\rWe calculate 2-day momentum based on closing price of AAPL.\nM \u0026lt;- momentum(Cl(AAPL), n=2)\rhead (M,n=5)\r## AAPL.Close\r## 2007-01-03 NA\r## 2007-01-04 NA\r## 2007-01-05 0.178571\r## 2007-01-08 -0.027143\r## 2007-01-09 1.074286\rROC\rROC \u0026lt;- ROC(Cl(AAPL),n=2)\r# 2-day ROC\rhead(ROC,n=5)\r## AAPL.Close\r## 2007-01-03 NA\r## 2007-01-04 NA\r## 2007-01-05 0.014806276\r## 2007-01-08 -0.002220547\r## 2007-01-09 0.084725818\rMACD\rmacd \u0026lt;- MACD(Cl(AAPL), nFast=12, nSlow=26,\rnSig=9, maType=SMA)\rtail(macd,n=5)\r## macd signal\r## 2020-06-24 4.702688 3.881592\r## 2020-06-25 4.600372 4.069203\r## 2020-06-26 4.210396 4.195984\r## 2020-06-29 4.315137 4.293894\r## 2020-06-30 4.410221 4.367458\rRSI\rrsi = RSI(Cl(AAPL), n=14)\rtail(rsi,n=5)\r## rsi\r## 2020-06-24 68.10366\r## 2020-06-25 70.22649\r## 2020-06-26 60.12087\r## 2020-06-29 64.15899\r## 2020-06-30 65.55100\rCharting with Indicators\rCharting SMA\rWe use the function addSMA() to put\nchartSeries(AAPL,\rsubset=\u0026#39;2007-05::2009-01\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddSMA(n=30,on=1,col = \u0026quot;blue\u0026quot;)\raddSMA(n=200,on=1,col = \u0026quot;red\u0026quot;)\rCharting EMA\rchartSeries(AAPL,\rsubset=\u0026#39;2007-05::2009-01\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddEMA(n=30,on=1,col = \u0026quot;blue\u0026quot;)\raddEMA(n=200,on=1,col = \u0026quot;red\u0026quot;)\rCharting Bollinger band\rchartSeries(AAPL,\rsubset=\u0026#39;2007-05::2009-01\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddBBands(n=20,sd=2)\rCharting Momentum\rchartSeries(AAPL,\rsubset=\u0026#39;2007-05::2009-01\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddMomentum(n=1)\rCharting ROC\rchartSeries(AAPL,\rsubset=\u0026#39;2007-05::2008-01\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddROC(n=7)\rCharting MACD\rchartSeries(AAPL,\rsubset=\u0026#39;2007-05::2008-01\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddMACD(fast=12,slow=26,signal=9,type=\u0026quot;EMA\u0026quot;)\rCharting RSI\rchartSeries(AAPL,\rsubset=\u0026#39;2007-05::2009-01\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddRSI(n=14,maType=\u0026quot;EMA\u0026quot;)\rCharting Custom TA\rsma \u0026lt;- SMA(Cl(AAPL),n=14)\rchartSeries(AAPL,\rsubset=\u0026#39;2007-05::2009-01\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddTA(sma, on=1, col=\u0026quot;red\u0026quot;)\rCharting Price changes of two stocks\rTo compare prices fo different stocks, we need to calculat the price change:\nNS \u0026lt;- function(xdat) xdat / coredata(xdat)[1]\ra \u0026lt;- NS(Cl(AAPL))-1\rg \u0026lt;- NS(Cl(GOOG))-1\rm \u0026lt;- NS(Cl(MSFT))-1\rchartSeries(a,\rsubset = \u0026#39;2007\u0026#39;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddTA(g, on=1, col=\u0026quot;red\u0026quot;, lty=\u0026quot;dotted\u0026quot;)\raddTA(m, on=1, col=\u0026quot;blue\u0026quot;, lty=\u0026quot;dashed\u0026quot;)\rThe option lty is to make the line becomes other line styles where dotted means dotted line and dashed means dashed line.\nPerformance Evaluation\rThe package is a collection of econometric functions for performance and risk analysis.\nWe first install and load PerformanceAnalytics package.\ninstall.packages(\u0026quot;PerformanceAnalytics\u0026quot;)\rlibrary(PerformanceAnalytics)\rEvaluating Trading Rules\rTo simplify, we first evaluate several trading rules based on day trading:\nbuy signal based on simple filter rule\rbuy and sell signals based on simple filter rule\rbuy signal based on RSI\rbuy signal based on EMA and sell signal based on RSI\rbuy signal based on RSI but trading size depends on price history\rFinally, we consider the rule that does non-day trading. In this case, we need to keep track of both cash and stock holdings.\nSimple filter Buy\rHere we create trading signal based on simple filter rule. Recall that simple filter rule suggests buying when the price increases a lot compared to the yesterday price:\r\\[\\begin{align*}\r\\text{Buy}\u0026amp;:\\frac{P_t}{P_{t-1}}\u0026gt;1+\\delta \\\\\r\\end{align*}\\]\rwhere \\(P_t\\) is the closing price at time \\(t\\) and \\(\\delta\u0026gt;0\\) is an arbitrary threshold\nWe illustrate using Microsoft with ticker MSFT.\nWe first download the data using getSymbols(“MSFT”).\nlibrary(quantmod)\rgetSymbols(\u0026quot;MSFT\u0026quot;)\r## [1] \u0026quot;MSFT\u0026quot;\rWe first will use closing price to perform calculation. We calculate the percentage price change by dividing the current close price by its own lag and then minus 1.\nNow we generate buying signal based on filter rule:\nprice \u0026lt;- Cl(MSFT) # close price\rr \u0026lt;- price/Lag(price) - 1 # % price change\rdelta \u0026lt;-0.005 #threshold\rsignal \u0026lt;-c(0) # first date has no signal\r#Loop over all trading days (except the first)\rfor (i in 2: length(price)){\rif (r[i] \u0026gt; delta){\rsignal[i]\u0026lt;- 1\r} else\rsignal[i]\u0026lt;- 0\r}\rNote that signal is just a vector without time stamp. We use the function reclass to convert it into an xts object.\n# Each data is not attached with time\rhead(signal, n=3)\r## [1] 0 0 0\r# Assign time to action variable using reclass;\rsignal\u0026lt;-reclass(signal,price)\r# Each point is now attached with time\rtail(signal, n=3)\r## [,1]\r## 2020-06-26 0\r## 2020-06-29 1\r## 2020-06-30 1\rWe are now ready to chart the trading indicators:\n# Charting with Trading rule\rchartSeries(MSFT,\rtype = \u0026#39;line\u0026#39;,\rsubset=\u0026quot;2009-08::2009-09-15\u0026quot;,\rtheme=chartTheme(\u0026#39;white\u0026#39;))\raddTA(signal,type=\u0026#39;S\u0026#39;,col=\u0026#39;red\u0026#39;)\rWe consider trading based on yesterday indicator:\ntrade \u0026lt;- Lag(signal,1) # trade based on yesterday signal\rTo keep it simple, we evaluate using day trading:\nbuy at open\rsell at close\rtrading size: all in\rThen daily profit rate is \\(dailyReturn=\\frac{Close - Open}{open}\\)\nret\u0026lt;-dailyReturn(MSFT)*trade\rnames(ret)\u0026lt;-\u0026quot;filter\u0026quot;\rBased on daily return, we can see the summary of performance using charts.PerformanceSummary() to evaluate the performance.\n#Performance Summary\rcharts.PerformanceSummary(ret, main=\u0026quot;Naive Buy Rule\u0026quot;)\rSimple fiter buy-sell\rHere we create trading signal based on simple filter rule. Recall that simple filter rule suggests buying when the price increases a lot compared to the yesterday price and selling when price decreases a lot:\r\\[\\begin{align*}\r\\text{Buy}\u0026amp;:\\frac{P_t}{P_{t-1}}\u0026gt;1+\\delta \\\\\r\\text{Sell}\u0026amp;:\\frac{P_t}{P_{t-1}}\u0026lt;1-\\delta\r\\end{align*}\\]\rwhere \\(P_t\\) is the closing price at time \\(t\\) and \\(\\delta\u0026gt;0\\) is an arbitrary threshold\nWe first download the data:\nlibrary(quantmod)\rgetSymbols(\u0026quot;MSFT\u0026quot;)\r## [1] \u0026quot;MSFT\u0026quot;\rprice \u0026lt;- Cl(MSFT)\rr \u0026lt;- price/Lag(price) - 1\rdelta\u0026lt;-0.005\rsignal \u0026lt;-c(NA) # first signal is NA\rfor (i in 2: length(Cl(MSFT))){\rif (r[i] \u0026gt; delta){\rsignal[i]\u0026lt;- 1\r} else if (r[i]\u0026lt; -delta){\rsignal[i]\u0026lt;- -1\r} else\rsignal[i]\u0026lt;- 0\r}\rsignal\u0026lt;-reclass(signal,Cl(MSFT))\rtrade1 \u0026lt;- Lag(signal)\rret1\u0026lt;-dailyReturn(MSFT)*trade1\rnames(ret1) \u0026lt;- \u0026#39;Naive\u0026#39;\rcharts.PerformanceSummary(ret1)\rExercise\rTest the following strategy based on EMA:\r- Buy/Sell signal based on EMA rule.\r- Day trading based on yesterday signal:\r- buy at open and\r- sell at close on the same day\nAn example using RSI\rConsider following day-trading strategy based on 14-day RSI:\nbuy one unit if RSI \u0026lt;30 and\rotherwise no trade.\rEvaluate this based on day trading and compare it with simple filter rule:\nday \u0026lt;-14\rprice \u0026lt;- Cl(MSFT)\rsignal \u0026lt;- c() #initialize vector\rrsi \u0026lt;- RSI(price, day) #rsi is the lag of RSI\rsignal [1:day+1] \u0026lt;- 0 #0 because no signal until day+1\rfor (i in (day+1): length(price)){\rif (rsi[i] \u0026lt; 30){ #buy if rsi \u0026lt; 30\rsignal[i] \u0026lt;- 1\r}else { #no trade all if rsi \u0026gt; 30\rsignal[i] \u0026lt;- 0\r}\r}\rsignal\u0026lt;-reclass(signal,Cl(MSFT))\rtrade2 \u0026lt;- Lag(signal)\r#construct a new variable ret1\rret1 \u0026lt;- dailyReturn(MSFT)*trade1\rnames(ret1) \u0026lt;- \u0026#39;Naive\u0026#39;\r# construct a new variable ret2\rret2 \u0026lt;- dailyReturn(MSFT)*trade2\rnames(ret2) \u0026lt;- \u0026#39;RSI\u0026#39;\rNow compare strategies with the filter rule:\nretall \u0026lt;- cbind(ret1, ret2)\rcharts.PerformanceSummary(retall, main=\u0026quot;Naive v.s. RSI\u0026quot;)\rMore efficient code\rIn the RSI code above, we have written that:\nsignal [1:day+1] \u0026lt;- 0 for (i in (day+1): length(price)){\rif (rsi[i] \u0026lt; 30){ signal[i] \u0026lt;- 1\r}else { signal[i] \u0026lt;- 0\r}\r}\rA more efficient but less readable code is to avoid counting:\nfor (i in 1:length(price)){\rsignal[i] \u0026lt;- 0\rif (isTRUE(rsi[i] \u0026lt; 30)){ signal[i] \u0026lt;- 1\r}\r}\rCombining two indicators: filter and RSI\rTest the following strategy using filter and RSI based on day trading:\nBuy signal based on filter rule.\nSell signal based on RSI rule.\nTie-breaking: buy-signal has priority\nWe use 14-day RSI and use 70 as threshold for selling.\nn \u0026lt;- 14\rdelta\u0026lt;-0.005\rprice \u0026lt;- Cl(MSFT) r \u0026lt;- price/Lag(price) - 1 rsi \u0026lt;- RSI(price, n) signal \u0026lt;-c() # first signal is NA\rsignal[1:n] \u0026lt;-0\r# Generate Trading Signal\rfor (i in (n+1):length(price)){\rif (r[i] \u0026gt; delta){\rsignal[i]\u0026lt;- 1\r} else if (rsi[i] \u0026gt; 70){\rsignal[i]\u0026lt;- -1\r} else\rsignal[i]\u0026lt;- 0\r}\rsignal\u0026lt;-reclass(signal,price)\r## Apply Trading Rule\rtrade3 \u0026lt;- Lag(signal)\rret3\u0026lt;-dailyReturn(MSFT)*trade3 names(ret3) \u0026lt;- \u0026#39;Combine\u0026#39;\rretall \u0026lt;- cbind(ret1, ret2, ret3)\rTo draw trade performance summary with different colors, we use the option colorset. Common options includes redfocus, bluefocus, greenfocus, rainbow4equal andrich12equal.\ncharts.PerformanceSummary(\rretall, main=\u0026quot;Naive v.s. RSI v.s. Combine\u0026quot;,\rcolorset=bluefocus)\rExercise\rTest the following strategy based on EMA and RSI\nBuy signal based on EMA rule.\nSell signal based on RSI rule\nDay trading based on yesterday signal: buy at open and sell at close\nTrading Size\rWealth: 1 million\nTrade unit: 1000 stocks per trade\nTest the following strategy based on 14-day RSI :\nBuy one more unit if RSI \u0026lt;30.\nKeep buying the same if 30 \u0026lt; RSI \u0026lt; 50\nStop trading if RSI \u0026gt;= 50\nEvaluate based on day trading\nTo take trade size into account, we need to keep track of wealth:\nqty \u0026lt;-1000\rday \u0026lt;-14\rsignal \u0026lt;- c() #trade signal with size\rsignal[1:(day+1)] \u0026lt;- 0 price \u0026lt;- Cl(MSFT)\rwealth \u0026lt;-c()\rwealth[1:(day+1)] \u0026lt;- 1000000 return\u0026lt;-c() return[1:(day+1)] \u0026lt;- 0\rprofit \u0026lt;-c()\rprofit[1:(day+1)] \u0026lt;- 0\rWe now generate trading signal with size:\nrsi \u0026lt;- RSI(price, day) #rsi is the lag of RSI\rfor (i in (day+1): length(price)){\rif (rsi[i] \u0026lt; 30){ #buy one more unit if rsi \u0026lt; 30\rsignal[i] \u0026lt;- signal[i-1]+1\r} else if (rsi[i] \u0026lt; 50){ #no change if rsi \u0026lt; 50\rsignal[i] \u0026lt;- signal[i-1] } else { #sell if rsi \u0026gt; 50\rsignal[i] \u0026lt;- 0\r}\r}\rsignal\u0026lt;-reclass(signal,price)\rNow we are ready to apply Trade Rule\nClose \u0026lt;- Cl(MSFT)\rOpen \u0026lt;- Op(MSFT)\rtrade \u0026lt;- Lag(signal)\rfor (i in (day+1):length(price)){\rprofit[i] \u0026lt;- qty * trade[i] * (Close[i] - Open[i]) wealth[i] \u0026lt;- wealth[i-1] + profit[i]\rreturn[i] \u0026lt;- (wealth[i] / wealth[i-1]) -1 }\rret3\u0026lt;-reclass(return,price)\rcharts.PerformanceSummary(ret3, main=\u0026quot;Trade Size\u0026quot;)\rNon-Day Trading\rTrading signal:\nBuy signal arises if 14-day RSI \u0026lt; 30\nSell signal arises if 14-day RSI \u0026gt; 50\nTrading Rule\nBuy 300 units under buy signal\nSell all when sell signal appears\nInitial wealth: 10,000\nNote that we need to keep track of both cash and stock holdings.\nqty \u0026lt;-300\rday \u0026lt;-14\rsignal \u0026lt;- c() #trade signal\rsignal[1:(day+1)] \u0026lt;- 0 price \u0026lt;- Cl(MSFT)\rstock \u0026lt;- c() #stock holding\rstock[1:(day+1)] \u0026lt;-0\rcash \u0026lt;-c()\rcash[1:(day+1)] \u0026lt;- 10000 Trading signal is based on simple RSI:\nrsi \u0026lt;- RSI(price, day) #rsi is the lag of RSI\rfor (i in (day+1): length(price)){\rif (rsi[i] \u0026lt; 30){ #buy one more unit if rsi \u0026lt; 30\rsignal[i] \u0026lt;- 1\r} else if (rsi[i] \u0026lt; 50){ #no change if rsi \u0026lt; 50\rsignal[i] \u0026lt;- 0\r} else { #sell if rsi \u0026gt; 50\rsignal[i] \u0026lt;- -1\r}\r}\rsignal\u0026lt;-reclass(signal,price)\rAssume buying at closing price. We keep track of how cash and stock changes:\ntrade \u0026lt;- Lag(signal) #rsi is the lag of RSI\rfor (i in (day+1): length(price)){\rif (trade[i]\u0026gt;=0){\rstock[i] \u0026lt;- stock[i-1] + qty*trade[i]\rcash[i] \u0026lt;- cash[i-1] - qty*trade[i]*price[i]\r} else{\rstock[i] \u0026lt;- 0\rcash[i] \u0026lt;- cash[i-1] + stock[i-1]*price[i]\r}\r}\rstock\u0026lt;-reclass(stock,price)\rcash\u0026lt;-reclass(cash,price)\rTo evaluate performance, we calculate equity using cash and stock holdings.\nequity \u0026lt;-c()\requity[1:(day+1)] \u0026lt;- 10000 return\u0026lt;-c() return[1:(day+1)] \u0026lt;- 0\rfor (i in (day+1): length(price)){\requity[i] \u0026lt;- stock[i] * price[i] + cash[i]\rreturn[i] \u0026lt;- equity[i]/equity[i-1]-1\r}\requity\u0026lt;-reclass(equity,price)\rreturn\u0026lt;-reclass(return,price)\rPerformance Charts\ncharts.PerformanceSummary(return, main=\u0026quot;Non-Day-Trading\u0026quot;)\rWe can plot the equity line showing how the performance of the strategy:\nchart_Series(equity, main=\u0026quot;equity line\u0026quot;)\rWe can check the cash account over time:\nchart_Series(cash, name=\u0026quot;Cash Holding\u0026quot;)\rFinall, We can stock holdings:\nchart_Series(stock, name=\u0026quot;Stock Holding\u0026quot;)\rExercise\rTrading signal:\nBuy signal arises if RSI \u0026lt; 30\nSell signal arises if RSI \u0026gt;50\nTrading Rule\nBuy 1000 units under buy signal\nSell 1000 units under sell signal\n","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"f34ba7f0ae2d531c6e3ae71e1b1bb10b","permalink":"/programming/r-programming/ta-with-r-ch7/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r-ch7/","section":"programming","summary":"no\rQuantmod\rQuantmod stands for ``quantitative financial modelling framework’’. It has three main functions:\ndownload data,\rcharting, and\rtechnical indicator.\rThen we can conduct simple test on trading strategies. We will learn how to test more complicated strategies.","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":"\rno\rQuanstrat\rSince quantstrat is not standard package, we first learn how to install custom package.\nWe will illustrate the usage of the quantstrat package by showing how four different rules be applied:\nnaive filter rule,\rbuy and hold,\rsimple SMA rule,\rSMA rule with a volatility filter.\rSince the coding is complicated, we first overview the structure of the code. There are five parts:\nInitialization\rIndicator: filter rule/SMA rule\rSignals: buy/sell signals\rRule: buy or sell? quantity?\rEvaluation of results.\rBefore we start, let us make sure that we have installed the following four standard packages:\nquantmod,\rPerformanceAnalytics,\rFinancialInstrument, and\rforeach.\rIf your R does not have them, please run the following code:\ninstall.packages(\u0026quot;quantmod\u0026quot;)\rinstall.packages(\u0026quot;FinancialInstrument\u0026quot;)\rinstall.packages(\u0026quot;PerformanceAnalytics\u0026quot;)\rinstall.packages(\u0026quot;foreach\u0026quot;)\rFinancialInstrument allows you to specify your assets class (e.g., stock, derivatives, currency) and foreach is a package that allow fast computation (i.e., parallel computation).\nInstall custom packages\rSince blotter and quanstrat are still under development, they are not yet available at CRAN. We need to install the two package from github. We need to install devtools package first.\nThen we use the function install_github to download the packages, and then we load them into the system.\ninstall.packages(\u0026quot;devtools\u0026quot;)\rlibrary(devtools)\r# Install from github directly\rinstall_github(\u0026quot;braverock/blotter\u0026quot;)\rinstall_github(\u0026quot;braverock/quanstrat\u0026quot;)\rlibrary(blotter)\rlibrary(quantstrat)\rIF there is an error during installation process, try again after installing the latest R and update all packages.\nBlotter Package\rSince working through quanstrat package requires the blotter package, which is rather complicated, we demostrate first how the blotter pacakge works first.\nAs we have seen, recording tranasction of stocks, keeping track of cash and stock holding, and evaluate return is rather messy. The blotter package is mainly for this purpose.\nWe first need to setup the working space.\nWe need to setup the currency and declare the data is the stock (using FinancialInstrument package).\nThe multipler is always one for stock, and currency is USD for US stock.\noptions(\u0026quot;getSymbols.warning4.0\u0026quot;=FALSE)\rfrom =\u0026quot;2008-01-01\u0026quot;\rto =\u0026quot;2012-12-31\u0026quot;\rsymbols = c(\u0026quot;AAPL\u0026quot;, \u0026quot;IBM\u0026quot;)\rcurrency(\u0026quot;USD\u0026quot;)\rgetSymbols(symbols, from=from, to=to, adjust=TRUE)\rstock(symbols, currency=\u0026quot;USD\u0026quot;, multiplier=1)\rinitEq=10^6\rTo start, we initialize account and portfolio where:\nPorfolio: stores which stocks to be traded\nAccount: stores which money transactions\nrm(\u0026quot;account.buyHold\u0026quot;,pos=.blotter)\rrm(\u0026quot;portfolio.buyHold\u0026quot;,pos=.blotter)\rinitPortf(\u0026quot;buyHold\u0026quot;, symbol=symbols)\rinitAcct(\u0026quot;buyHold\u0026quot;, portfolios = \u0026quot;buyHold\u0026quot;,\rinitEq = initEq)\rBuy and hold\rTo illustrate, we just consider buy and hold strategy:\nBuy on the first day at closing price\rSell on the last day at closing price\rWe first get the price and timing data:\nApple.Buy.Date \u0026lt;- first(time(AAPL))\rApple.Buy.Price \u0026lt;- as.numeric(Cl(AAPL[Apple.Buy.Date,]))\rApple.Sell.Date \u0026lt;- last(time(AAPL))\rApple.Sell.Price \u0026lt;- as.numeric(Cl(AAPL[Apple.Sell.Date,]))\rApple.Qty \u0026lt;- trunc(initEq/(2*Apple.Buy.Price))\rIBM.Buy.Date \u0026lt;- first(time(IBM))\rIBM.Buy.Price \u0026lt;- as.numeric(Cl(IBM[IBM.Buy.Date,]))\rIBM.Sell.Date \u0026lt;- last(time(IBM))\rIBM.Sell.Price \u0026lt;- as.numeric(Cl(IBM[IBM.Sell.Date,]))\rIBM.Qty \u0026lt;- trunc(initEq/(2*IBM.Buy.Price))\rWe first add buy transactions to the system using the function addTxn:\naddTxn(Portfolio = \u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;AAPL\u0026quot;, TxnDate = Apple.Buy.Date, TxnQty = Apple.Qty,\rTxnPrice = Apple.Buy.Price,\rTxnFees = 0)\raddTxn(Portfolio = \u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;IBM\u0026quot;, TxnDate = IBM.Buy.Date, TxnQty = IBM.Qty,\rTxnPrice = IBM.Buy.Price,\rTxnFees = 0)\rThen we add the sell transactions:\naddTxn(Portfolio = \u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;AAPL\u0026quot;, TxnDate = Apple.Sell.Date, TxnQty = -Apple.Qty,\rTxnPrice = Apple.Sell.Price,\rTxnFees = 0)\raddTxn(Portfolio = \u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;IBM\u0026quot;, TxnDate = IBM.Sell.Date, TxnQty = -IBM.Qty,\rTxnPrice = IBM.Sell.Price,\rTxnFees = 0)\rNow we can update the account based on the added transactions:\nupdatePortf(Portfolio = \u0026quot;buyHold\u0026quot;)\r## [1] \u0026quot;buyHold\u0026quot;\rupdateAcct(name = \u0026quot;buyHold\u0026quot;)\r## [1] \u0026quot;buyHold\u0026quot;\rupdateEndEq(Account = \u0026quot;buyHold\u0026quot;)\r## [1] \u0026quot;buyHold\u0026quot;\rWe can chart our trading positions:\nchart.Posn(\u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;AAPL\u0026quot;)\rchart.Posn(\u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;IBM\u0026quot;)\rWe can see the trading statistics\nout \u0026lt;- perTradeStats(\u0026quot;buyHold\u0026quot;, \u0026quot;IBM\u0026quot;)\rt(out)\r## [,1] ## Start \u0026quot;2008-01-02 08:00:00\u0026quot;\r## End \u0026quot;2012-12-28 08:00:00\u0026quot;\r## Init.Qty \u0026quot;5223\u0026quot; ## Init.Pos \u0026quot;5223\u0026quot; ## Max.Pos \u0026quot;5223\u0026quot; ## End.Pos \u0026quot;0\u0026quot; ## Closing.Txn.Qty \u0026quot;-5223\u0026quot; ## Num.Txns \u0026quot;2\u0026quot; ## Max.Notional.Cost \u0026quot;499963.2\u0026quot; ## Net.Trading.PL \u0026quot;491518.9\u0026quot; ## MAE \u0026quot;-151359.1\u0026quot; ## MFE \u0026quot;597287.7\u0026quot; ## Pct.Net.Trading.PL \u0026quot;0.98311\u0026quot; ## Pct.MAE \u0026quot;-0.3027405\u0026quot; ## Pct.MFE \u0026quot;1.194663\u0026quot; ## tick.Net.Trading.PL \u0026quot;9410.662\u0026quot; ## tick.MAE \u0026quot;-15135911\u0026quot; ## tick.MFE \u0026quot;59728767\u0026quot; ## duration \u0026quot;157420800 secs\u0026quot;\rout \u0026lt;- perTradeStats(\u0026quot;buyHold\u0026quot;, \u0026quot;AAPL\u0026quot;)\rt(out)\r## [,1] ## Start \u0026quot;2008-01-02 08:00:00\u0026quot;\r## End \u0026quot;2012-12-28 08:00:00\u0026quot;\r## Init.Qty \u0026quot;18122\u0026quot; ## Init.Pos \u0026quot;18122\u0026quot; ## Max.Pos \u0026quot;18122\u0026quot; ## End.Pos \u0026quot;0\u0026quot; ## Closing.Txn.Qty \u0026quot;-18122\u0026quot; ## Num.Txns \u0026quot;2\u0026quot; ## Max.Notional.Cost \u0026quot;499972.9\u0026quot; ## Net.Trading.PL \u0026quot;819282.7\u0026quot; ## MAE \u0026quot;-299306.3\u0026quot; ## MFE \u0026quot;1309400\u0026quot; ## Pct.Net.Trading.PL \u0026quot;1.638654\u0026quot; ## Pct.MAE \u0026quot;-0.598645\u0026quot; ## Pct.MFE \u0026quot;2.618941\u0026quot; ## tick.Net.Trading.PL \u0026quot;4520.929\u0026quot; ## tick.MAE \u0026quot;-29930631\u0026quot; ## tick.MFE \u0026quot;130939964\u0026quot; ## duration \u0026quot;157420800 secs\u0026quot;\rBuy Filter Rule\rWe use blotter package to apply simple filter rule\nbuy 1000 units signal if buy signal\nhold otherwise\nWe first Download Data:\nfrom =\u0026quot;2009-01-01\u0026quot;\rto =\u0026quot;2012-12-31\u0026quot;\rsymbols = c(\u0026quot;MSFT\u0026quot;)\rcurrency(\u0026quot;USD\u0026quot;)\rgetSymbols(symbols, from=from, to=to, adjust=TRUE)\rstock(symbols, currency=\u0026quot;USD\u0026quot;, multiplier=1)\rinitEq=10^6\rThen setup the account and portfolio:\nrm(\u0026quot;account.filter\u0026quot;,pos=.blotter)\rrm(\u0026quot;portfolio.filter\u0026quot;,pos=.blotter)\rinitPortf(\u0026quot;filter\u0026quot;, symbol=symbols)\rinitAcct(\u0026quot;filter\u0026quot;, portfolios = \u0026quot;filter\u0026quot;,\rinitEq = initEq)\rHere we generate trading indicator:\nprice \u0026lt;- Cl(MSFT) r \u0026lt;- price/Lag(price) - 1 delta\u0026lt;-0.03\rsignal \u0026lt;-c(NA)\rfor (i in 2: length(price)){\rif (r[i] \u0026gt; delta){\rsignal[i]\u0026lt;- 1\r} else if (r[i]\u0026lt; -delta){\rsignal[i]\u0026lt;- -1\r} else\rsignal[i]\u0026lt;- 0\r}\rsignal\u0026lt;-reclass(signal,Cl(MSFT))\rThis convert trading indicator to trading signal:\ntrade \u0026lt;- Lag(signal)\rtrade \u0026lt;- na.fill(trade,0)\rNow we are ready to apply trading signal into trading action:\nfor (i in 1:length(price)){\rif (as.numeric(trade[i]) == 1){\raddTxn(Portfolio = \u0026quot;filter\u0026quot;,\rSymbol = \u0026quot;MSFT\u0026quot;, TxnDate = time(price[i]), TxnQty = 1000,\rTxnPrice = price[i],\rTxnFees = 0) }\rif (as.numeric(trade[i]) == -1){\raddTxn(Portfolio = \u0026quot;filter\u0026quot;,\rSymbol = \u0026quot;MSFT\u0026quot;, TxnDate = time(price[i]), TxnQty = -1000,\rTxnPrice = price[i],\rTxnFees = 0) }\r}\rFinally, we update the account and do charting:\nupdatePortf(Portfolio = \u0026quot;filter\u0026quot;)\rupdateAcct(name = \u0026quot;filter\u0026quot;)\rupdateEndEq(Account = \u0026quot;filter\u0026quot;)\rchart.Posn(\u0026quot;filter\u0026quot;, Symbol = \u0026quot;MSFT\u0026quot;)\rQuanstrat Simple Filter Rule\rStep 1: Initialization\rWe need to install standard packages and custom packages. After loading all the packages, we initialize are variables and then download data.\nThen we need to get the data and define initial variables.Download using getSybmols()\noptions(\u0026quot;getSymbols.warning4.0\u0026quot;=FALSE)\rfrom =\u0026quot;2003-01-01\u0026quot;\rto =\u0026quot;2012-12-31\u0026quot;\rsymbols = c(\u0026quot;MSFT\u0026quot;, \u0026quot;IBM\u0026quot;)\rgetSymbols(symbols, from=from, to=to, adjust=TRUE)\rCurrency is USD for US stocks and the multiplier is always 1 for stocks.\ncurrency(\u0026quot;USD\u0026quot;)\rstock(symbols, currency=\u0026quot;USD\u0026quot;, multiplier=1)\rWe first define our strategy, portfolio and account name.\nstrategy.st \u0026lt;- \u0026quot;filter\u0026quot;\rportfolio.st \u0026lt;- \u0026quot;filter\u0026quot;\raccount.st \u0026lt;- \u0026quot;filter\u0026quot;\rRemove any old variables\nrm.strat(\u0026quot;filter\u0026quot;)\rAfter naming strategy, portfolio and account, we initialize them:\ninitEq=100000\rinitDate=\u0026quot;1990-01-01\u0026quot;\rinitPortf(name=portfolio.st, symbols=symbols, initDate=initDate, currency=\u0026#39;USD\u0026#39;)\rinitAcct(name=account.st, portfolios=portfolio.st, initDate=initDate, currency=\u0026#39;USD\u0026#39;, initEq=initEq)\rinitOrders(portfolio=portfolio.st, symbols=symbols,\rinitDate=initDate)\rstrategy(strategy.st, store=TRUE)\rStep 2: Define indicator\rIndicator is just a function based on price. Since simple filter is not a standard technical indicator, we need to define it first.\nfilter \u0026lt;- function(price) {\rlagprice \u0026lt;- lag(price,1)\rtemp\u0026lt;-price/lagprice - 1\rcolnames(temp) \u0026lt;- \u0026quot;filter\u0026quot;\rreturn(temp)\r} We add the simple filter as an indicator. Here the name is the indicator function we have defined. We need to specify what data to be used by the indicator. Since we have defined that the simple filter rule takes price as input, we need to tell the problem we are using the closing price. Note that the label filter is the variable assigned to this indicator, which implies it must be unique.\nadd.indicator(\rstrategy=strategy.st,\rname = \u0026quot;filter\u0026quot;, arguments = list(price = quote(Cl(mktdata))), label= \u0026quot;filter\u0026quot;)\rTo check if the indicator is defined correctly, use applyindicators to see if it works. The function try() is to allow the program continue to run even if there is an error.\ntest \u0026lt;-try(applyIndicators(strategy.st, mktdata=OHLC(AAPL)))\rhead(test, n=4)\rStep 3: Trading Signals\rTrading signals is generated from the trading indicators. For example, simple trading rule dictates that there is a buy signal when the filter exceeds certain threshold.\nIn quantstrat, there are three ways one can use a signal. It is refer to as name:\nsigThreshold: more or less than a fixed value\rsigCrossover: when two signals cross over\rsigComparsion: compare two signals\rThe column refers to the data for calculation of signal. There are five possible relationship:\ngt = greater than\rgte = greater than or equal to\rlt = less than\rlte = less than or equal to\req = equal to\rBuy Signal under simple trading rule with threshold \\(\\delta=0.05\\)\n# enter when filter \u0026gt; 1+\\delta\radd.signal(strategy.st, name=\u0026quot;sigThreshold\u0026quot;,\rarguments = list(threshold=0.05, column=\u0026quot;filter\u0026quot;,\rrelationship=\u0026quot;gt\u0026quot;, cross=TRUE),\rlabel=\u0026quot;filter.buy\u0026quot;)\rSell Signal under simple trading rule with threshold \\(\\delta=-0.05\\)\n# exit when filter \u0026lt; 1-delta\radd.signal(strategy.st, name=\u0026quot;sigThreshold\u0026quot;,\rarguments = list(threshold=-0.05, column=\u0026quot;filter\u0026quot;,\rrelationship=\u0026quot;lt\u0026quot;,\rcross=TRUE),\rlabel=\u0026quot;filter.sell\u0026quot;) Step 4. Trading Rules\rWhile trading signals tell us buy or sell, but it does not specify the execution details.\nTrading rules will specify the following seven elements:\nSigCol: Name of Signal\rSigVal: implement when there is signal (or reverse)\rOrdertype: market, stoplimit\rOrderside: long, short\rPricemethod: market\rReplace: whether to replace other others\rType: enter or exit the order\rBuy rule specifies that when a buy signal appears, place a buy market order with quantity size.\nadd.rule(strategy.st, name=\u0026#39;ruleSignal\u0026#39;, arguments = list(sigcol=\u0026quot;filter.buy\u0026quot;, sigval=TRUE, orderqty=1000,\rordertype=\u0026#39;market\u0026#39;, orderside=\u0026#39;long\u0026#39;,\rpricemethod=\u0026#39;market\u0026#39;,\rreplace=FALSE), type=\u0026#39;enter\u0026#39;, path.dep=TRUE)\rSell rule specifies that when a sell signal appears, place a sell market order with quantity size.\nadd.rule(strategy.st, name=\u0026#39;ruleSignal\u0026#39;, arguments = list(sigcol=\u0026quot;filter.sell\u0026quot;,\rsigval=TRUE, orderqty=-1000, ordertype=\u0026#39;market\u0026#39;, orderside=\u0026#39;long\u0026#39;, pricemethod=\u0026#39;market\u0026#39;, replace=FALSE), type=\u0026#39;enter\u0026#39;, path.dep=TRUE) Step 5. Evaluation Results\rWe will apply the our trading strategy, and the we update the portfolio, account and equity.\nout\u0026lt;-try(applyStrategy(strategy=strategy.st,\rportfolios=portfolio.st))\r## [1] \u0026quot;2003-01-21 08:00:00 IBM -1000 @ 69.9146713309017\u0026quot;\r## [1] \u0026quot;2005-04-18 08:00:00 IBM -1000 @ 67.691321496698\u0026quot;\r## [1] \u0026quot;2007-11-12 08:00:00 IBM -1000 @ 92.7608829720924\u0026quot;\r## [1] \u0026quot;2008-01-15 08:00:00 IBM 1000 @ 93.1083408368158\u0026quot;\r## [1] \u0026quot;2008-10-02 08:00:00 IBM -1000 @ 96.9042005511082\u0026quot;\r## [1] \u0026quot;2008-10-09 08:00:00 IBM -1000 @ 82.3417415861382\u0026quot;\r## [1] \u0026quot;2008-10-14 08:00:00 IBM 1000 @ 86.5976050312253\u0026quot;\r## [1] \u0026quot;2008-10-16 08:00:00 IBM -1000 @ 84.6732128420016\u0026quot;\r## [1] \u0026quot;2008-10-23 08:00:00 IBM -1000 @ 78.0396150349132\u0026quot;\r## [1] \u0026quot;2008-10-29 08:00:00 IBM 1000 @ 81.6015883244063\u0026quot;\r## [1] \u0026quot;2008-11-14 08:00:00 IBM 1000 @ 74.7358386209428\u0026quot;\r## [1] \u0026quot;2008-11-20 08:00:00 IBM -1000 @ 66.7440405789453\u0026quot;\r## [1] \u0026quot;2008-11-25 08:00:00 IBM 1000 @ 75.0335538924886\u0026quot;\r## [1] \u0026quot;2008-12-02 08:00:00 IBM -1000 @ 74.279956529227\u0026quot;\r## [1] \u0026quot;2008-12-09 08:00:00 IBM 1000 @ 76.9314887485928\u0026quot;\r## [1] \u0026quot;2009-01-22 08:00:00 IBM 1000 @ 83.7975453378965\u0026quot;\r## [1] \u0026quot;2009-03-24 08:00:00 IBM 1000 @ 91.9519343052697\u0026quot;\r## [1] \u0026quot;2011-07-20 08:00:00 IBM 1000 @ 179.10642184081\u0026quot;\r## [1] \u0026quot;2003-01-21 08:00:00 MSFT -1000 @ 9.73380568942909\u0026quot;\r## [1] \u0026quot;2003-02-19 08:00:00 MSFT 1000 @ 18.666511126893\u0026quot;\r## [1] \u0026quot;2003-03-14 08:00:00 MSFT 1000 @ 18.9176301004257\u0026quot;\r## [1] \u0026quot;2003-04-03 08:00:00 MSFT 1000 @ 19.5796702696815\u0026quot;\r## [1] \u0026quot;2003-10-27 08:00:00 MSFT -1000 @ 20.5924922489539\u0026quot;\r## [1] \u0026quot;2004-04-26 08:00:00 MSFT 1000 @ 20.8450200245821\u0026quot;\r## [1] \u0026quot;2006-05-01 08:00:00 MSFT -1000 @ 21.1026943697531\u0026quot;\r## [1] \u0026quot;2007-10-29 08:00:00 MSFT 1000 @ 30.6765128730564\u0026quot;\r## [1] \u0026quot;2008-02-04 08:00:00 MSFT -1000 @ 26.8783911230083\u0026quot;\r## [1] \u0026quot;2008-04-28 08:00:00 MSFT -1000 @ 25.9103071615352\u0026quot;\r## [1] \u0026quot;2008-07-21 08:00:00 MSFT -1000 @ 23.0005500775628\u0026quot;\r## [1] \u0026quot;2008-09-18 08:00:00 MSFT -1000 @ 22.7500449360055\u0026quot;\r## [1] \u0026quot;2008-09-30 08:00:00 MSFT -1000 @ 24.037954160413\u0026quot;\r## [1] \u0026quot;2008-10-01 08:00:00 MSFT 1000 @ 23.8488198695735\u0026quot;\r## [1] \u0026quot;2008-10-07 08:00:00 MSFT -1000 @ 20.9217554973638\u0026quot;\r## [1] \u0026quot;2008-10-14 08:00:00 MSFT 1000 @ 21.7053081139245\u0026quot;\r## [1] \u0026quot;2008-10-15 08:00:00 MSFT -1000 @ 20.4083934382378\u0026quot;\r## [1] \u0026quot;2008-10-17 08:00:00 MSFT 1000 @ 21.5522001313782\u0026quot;\r## [1] \u0026quot;2008-10-22 08:00:00 MSFT -1000 @ 19.3906765725354\u0026quot;\r## [1] \u0026quot;2008-10-29 08:00:00 MSFT 1000 @ 20.7146094033305\u0026quot;\r## [1] \u0026quot;2008-11-06 08:00:00 MSFT -1000 @ 18.8052618968231\u0026quot;\r## [1] \u0026quot;2008-11-17 08:00:00 MSFT -1000 @ 17.4002718987976\u0026quot;\r## [1] \u0026quot;2008-11-20 08:00:00 MSFT -1000 @ 15.8950903484207\u0026quot;\r## [1] \u0026quot;2008-11-24 08:00:00 MSFT 1000 @ 18.7603774354557\u0026quot;\r## [1] \u0026quot;2008-12-02 08:00:00 MSFT -1000 @ 17.3640024419997\u0026quot;\r## [1] \u0026quot;2008-12-09 08:00:00 MSFT 1000 @ 18.6787702509239\u0026quot;\r## [1] \u0026quot;2008-12-12 08:00:00 MSFT -1000 @ 17.5544179969251\u0026quot;\r## [1] \u0026quot;2008-12-17 08:00:00 MSFT 1000 @ 17.826438016173\u0026quot;\r## [1] \u0026quot;2009-01-08 08:00:00 MSFT -1000 @ 18.2435376760854\u0026quot;\r## [1] \u0026quot;2009-01-21 08:00:00 MSFT -1000 @ 17.5725509118512\u0026quot;\r## [1] \u0026quot;2009-01-23 08:00:00 MSFT -1000 @ 15.595867329838\u0026quot;\r## [1] \u0026quot;2009-03-06 08:00:00 MSFT -1000 @ 13.9499293968326\u0026quot;\r## [1] \u0026quot;2009-03-11 08:00:00 MSFT 1000 @ 15.6206352048257\u0026quot;\r## [1] \u0026quot;2009-03-24 08:00:00 MSFT 1000 @ 16.369256157409\u0026quot;\r## [1] \u0026quot;2009-03-27 08:00:00 MSFT 1000 @ 16.5518459433669\u0026quot;\r## [1] \u0026quot;2009-04-01 08:00:00 MSFT 1000 @ 17.6291310669443\u0026quot;\r## [1] \u0026quot;2009-04-27 08:00:00 MSFT 1000 @ 18.624251288965\u0026quot;\r## [1] \u0026quot;2009-07-27 08:00:00 MSFT -1000 @ 21.2323467096564\u0026quot;\r## [1] \u0026quot;2009-10-26 08:00:00 MSFT 1000 @ 26.4979519060214\u0026quot;\r## [1] \u0026quot;2010-09-14 08:00:00 MSFT 1000 @ 23.5668456416348\u0026quot;\r## [1] \u0026quot;2011-08-11 08:00:00 MSFT -1000 @ 24.161608834081\u0026quot;\r## [1] \u0026quot;2012-01-23 08:00:00 MSFT 1000 @ 28.912330972876\u0026quot;\rNow we can update the portfolio, account and equity.\nupdatePortf(portfolio.st)\r## [1] \u0026quot;filter\u0026quot;\rupdateAcct(portfolio.st)\r## [1] \u0026quot;filter\u0026quot;\rupdateEndEq(account.st)\r## [1] \u0026quot;filter\u0026quot;\rWe can visualize the trading position, profit and loss, and drawdown in graph.\nfor(symbol in symbols) {\rchart.Posn(Portfolio=portfolio.st,\rSymbol=symbol,\rlog=TRUE)\r}\rWe can also look at the details of the trading statistics of trading strategies such as the number for trades, and profitability of trades.\ntstats \u0026lt;- tradeStats(portfolio.st)\rt(tstats) #transpose tstats\r## IBM MSFT ## Portfolio \u0026quot;filter\u0026quot; \u0026quot;filter\u0026quot; ## Symbol \u0026quot;IBM\u0026quot; \u0026quot;MSFT\u0026quot; ## Num.Txns \u0026quot;18\u0026quot; \u0026quot;42\u0026quot; ## Num.Trades \u0026quot; 9\u0026quot; \u0026quot;20\u0026quot; ## Net.Trading.PL \u0026quot;-129514.67\u0026quot; \u0026quot; -36142.16\u0026quot; ## Avg.Trade.PL \u0026quot;-14390.519\u0026quot; \u0026quot; -1178.172\u0026quot; ## Med.Trade.PL \u0026quot;-3391.6402\u0026quot; \u0026quot; 257.6423\u0026quot; ## Largest.Winner \u0026quot;7730.306\u0026quot; \u0026quot;1715.447\u0026quot; ## Largest.Loser \u0026quot;-101634.719\u0026quot; \u0026quot; -8932.705\u0026quot;\r## Gross.Profits \u0026quot;12637.141\u0026quot; \u0026quot; 9785.414\u0026quot; ## Gross.Losses \u0026quot;-142151.81\u0026quot; \u0026quot; -33348.85\u0026quot; ## Std.Dev.Trade.PL \u0026quot;33664.545\u0026quot; \u0026quot; 3514.473\u0026quot; ## Std.Err.Trade.PL \u0026quot;11221.52\u0026quot; \u0026quot; 785.86\u0026quot; ## Percent.Positive \u0026quot;44.44444\u0026quot; \u0026quot;60.00000\u0026quot; ## Percent.Negative \u0026quot;55.55556\u0026quot; \u0026quot;40.00000\u0026quot; ## Profit.Factor \u0026quot;0.08889891\u0026quot; \u0026quot;0.29342583\u0026quot; ## Avg.Win.Trade \u0026quot;3159.2852\u0026quot; \u0026quot; 815.4511\u0026quot; ## Med.Win.Trade \u0026quot;2183.3104\u0026quot; \u0026quot; 780.7065\u0026quot; ## Avg.Losing.Trade \u0026quot;-28430.363\u0026quot; \u0026quot; -4168.606\u0026quot; ## Med.Losing.Trade \u0026quot;-14480.231\u0026quot; \u0026quot; -3272.433\u0026quot; ## Avg.Daily.PL \u0026quot;-14390.519\u0026quot; \u0026quot; -1178.172\u0026quot; ## Med.Daily.PL \u0026quot;-3391.6402\u0026quot; \u0026quot; 257.6423\u0026quot; ## Std.Dev.Daily.PL \u0026quot;33664.545\u0026quot; \u0026quot; 3514.473\u0026quot; ## Std.Err.Daily.PL \u0026quot;11221.52\u0026quot; \u0026quot; 785.86\u0026quot; ## Ann.Sharpe \u0026quot;-6.785846\u0026quot; \u0026quot;-5.321679\u0026quot; ## Max.Drawdown \u0026quot;-167086.24\u0026quot; \u0026quot; -72041.99\u0026quot; ## Profit.To.Max.Draw \u0026quot;-0.7751367\u0026quot; \u0026quot;-0.5016819\u0026quot; ## Avg.WinLoss.Ratio \u0026quot;0.1111236\u0026quot; \u0026quot;0.1956172\u0026quot; ## Med.WinLoss.Ratio \u0026quot;0.1507787\u0026quot; \u0026quot;0.2385707\u0026quot; ## Max.Equity \u0026quot;36050.15\u0026quot; \u0026quot;24686.16\u0026quot; ## Min.Equity \u0026quot;-131036.09\u0026quot; \u0026quot; -47355.83\u0026quot; ## End.Equity \u0026quot;-129514.67\u0026quot; \u0026quot; -36142.16\u0026quot;\rThen we can evaluate the performance using PerfomanceAnalytics package to see how is the return of the trading strategy.\nrets \u0026lt;- PortfReturns(Account = account.st)\rrownames(rets) \u0026lt;- NULL\rtab \u0026lt;- table.Arbitrary(rets,\rmetrics=c(\r\u0026quot;Return.cumulative\u0026quot;,\r\u0026quot;Return.annualized\u0026quot;,\r\u0026quot;SharpeRatio.annualized\u0026quot;,\r\u0026quot;CalmarRatio\u0026quot;),\rmetricsNames=c(\r\u0026quot;Cumulative Return\u0026quot;,\r\u0026quot;Annualized Return\u0026quot;,\r\u0026quot;Annualized Sharpe Ratio\u0026quot;,\r\u0026quot;Calmar Ratio\u0026quot;))\rtab\r## IBM.DailyEqPL MSFT.DailyEqPL\r## Cumulative Return -0.8776990 -0.39612665\r## Annualized Return -0.1897894 -0.04926439\r## Annualized Sharpe Ratio -0.4801946 -0.29236267\r## Calmar Ratio -0.2135370 -0.09109193\rWe can visualize the performance of the trading rule\ncharts.PerformanceSummary(rets, colorset = bluefocus)\rBuy and Hold\rWe want to compare buy and hold strategy.\nWe first get the data\ngetSymbols(\u0026quot;SPY\u0026quot;, from=from, to=to, adjust=TRUE)\rStep 1: Initialization\rrm.strat(\u0026quot;buyHold\u0026quot;)\r#Initial Setup\rinitPortf(\u0026quot;buyHold\u0026quot;, \u0026quot;SPY\u0026quot;, initDate = initDate)\rinitAcct(\u0026quot;buyHold\u0026quot;, portfolios = \u0026quot;buyHold\u0026quot;,\rinitDate = initDate, initEq = initEq)\rSteps 2-4: Applying trading rule\rSince buy and sell are not given by trading rule, we directly add transaction to it.\nWe first add the transaction to buy at the beginning:\nFirstDate \u0026lt;- first(time(SPY))\r# Enter order on the first date\rBuyDate \u0026lt;- FirstDate\requity = getEndEq(\u0026quot;buyHold\u0026quot;, FirstDate)\rFirstPrice \u0026lt;- as.numeric(Cl(SPY[BuyDate,]))\rUnitSize = as.numeric(trunc(equity/FirstPrice))\raddTxn(\u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;SPY\u0026quot;, TxnDate = BuyDate, TxnPrice = FirstPrice,\rTxnQty = UnitSize, TxnFees = 0)\rWe first add the transaction to sell at the end:\nLastDate \u0026lt;- last(time(SPY))\r# Exit order on the Last Date\rLastPrice \u0026lt;- as.numeric(Cl(SPY[LastDate,]))\raddTxn(\u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;SPY\u0026quot;, TxnDate = LastDate, TxnPrice = LastPrice,\rTxnQty = -UnitSize , TxnFees = 0)\rStep 5: Evaluation\rAfter updates, we can plot the trading position.\nupdatePortf(Portfolio = \u0026quot;buyHold\u0026quot;)\r## [1] \u0026quot;buyHold\u0026quot;\rupdateAcct(name = \u0026quot;buyHold\u0026quot;)\r## [1] \u0026quot;buyHold\u0026quot;\rupdateEndEq(Account = \u0026quot;buyHold\u0026quot;)\r## [1] \u0026quot;buyHold\u0026quot;\rchart.Posn(\u0026quot;buyHold\u0026quot;, Symbol = \u0026quot;SPY\u0026quot;)\rNow we are ready to compare buy-hold and the simple trading rule.\n# Compare strategy and market\rrets \u0026lt;- PortfReturns(Account = account.st)\rrets.bh \u0026lt;- PortfReturns(Account = \u0026quot;buyHold\u0026quot;)\rreturns \u0026lt;- cbind(rets, rets.bh)\rcharts.PerformanceSummary(\rreturns, geometric = FALSE,\rwealth.index = TRUE, main = \u0026quot;Strategy vs. Market\u0026quot;)\rSMA Rule\rWe will show how to apply the following SMA Rule:\nBuy every day when SMA30 SMA200\nSell everything when SMA30 SMA200\nStep 1: Initialization\rWe first initialize the setup.\noptions(\u0026quot;getSymbols.warning4.0\u0026quot;=FALSE)\rfrom =\u0026quot;2012-01-01\u0026quot;\rto =\u0026quot;2012-12-31\u0026quot;\rsymbols = c(\u0026quot;IBM\u0026quot;,\u0026quot;MSFT\u0026quot;)\rgetSymbols(symbols, from=from, to=to, adjust=TRUE)\rNow we initilized setup:\ncurrency(\u0026quot;USD\u0026quot;)\rstrategy.st \u0026lt;- portfolio.st \u0026lt;- account.st \u0026lt;- \u0026quot;SMA\u0026quot;\rrm.strat(strategy.st)\rinitPortf(portfolio.st, symbols)\rinitAcct(account.st, portfolios=portfolio.st, initEq = initEq)\rinitOrders(portfolio.st)\rstrategy(strategy.st, store=TRUE)\rStep 2: Indicator\rNow we add two indicators: SMA30 and SMA200. Here, the argument is different from simple trading rule. For the SMA function, we need to tell the price vector and the number of period.\nadd.indicator(\rstrategy.st, name=\u0026quot;SMA\u0026quot;,\rarguments=list(x=quote(Cl(mktdata)), n=30),\rlabel=\u0026quot;sma30\u0026quot;)\radd.indicator(\rstrategy.st, name=\u0026quot;SMA\u0026quot;,\rarguments=list(x=quote(Cl(mktdata)), n=200),\rlabel=\u0026quot;sma200\u0026quot;)\rStep 3: Signals\rNow we add two signals: Buy signal appears when SMA30 is greater than SMA200. Sell signals appears when SMA30 is less than SMA200. Hence, this is different from simple trading rule.\nHere, we are going to do signal comparison so that we set name to sigComparison. We will compare two signals: sma30 and sma200. Then the relationship is greater than for buy and less than for less. We name the former to be a buy signal and the latter for a sell signal.\n# Bull market if SMA30\u0026gt;SMA200\radd.signal(\rstrategy.st, name=\u0026quot;sigComparison\u0026quot;,\rarguments=list(columns=c(\u0026quot;sma30\u0026quot;,\u0026quot;sma200\u0026quot;),\rrelationship=\u0026quot;gt\u0026quot;),\rlabel=\u0026quot;buy\u0026quot;)\r# Sell market if SMA30\u0026lt;SMA200\radd.signal(\rstrategy.st, name=\u0026quot;sigComparison\u0026quot;,\rarguments=list(columns=c(\u0026quot;sma30\u0026quot;,\u0026quot;sma200\u0026quot;), relationship=\u0026quot;lt\u0026quot;), label=\u0026quot;sell\u0026quot;)\rNote that here we use SigComparsion instead of SigCrossover. It is because SigComparsion will generate signals all the time but SigCrossover will generate signal only at cross.\nStep 4: Rules\rWe will consider buy and sell rules using market order. Note that we sell everything when sell signal arise. Hence, the order quantity is all and the type is exit.\n# Buy Rule\radd.rule(strategy.st, name=\u0026#39;ruleSignal\u0026#39;, arguments = list(sigcol=\u0026quot;buy\u0026quot;, sigval=TRUE, orderqty=1000, ordertype=\u0026#39;market\u0026#39;, orderside=\u0026#39;long\u0026#39;, pricemethod=\u0026#39;market\u0026#39;, replace=FALSE), type=\u0026#39;enter\u0026#39;, path.dep=TRUE)\r# Sell Rule\radd.rule(strategy.st, name=\u0026#39;ruleSignal\u0026#39;, arguments = list(sigcol=\u0026quot;sell\u0026quot;, sigval=TRUE, orderqty=\u0026#39;all\u0026#39;, ordertype=\u0026#39;market\u0026#39;, orderside=\u0026#39;long\u0026#39;, pricemethod=\u0026#39;market\u0026#39;, replace=FALSE), type=\u0026#39;exit\u0026#39;, path.dep=TRUE) Step 5: Evaluation\rWe first try to apply the trading rule.\nout\u0026lt;-try(applyStrategy(strategy.st, portfolios=portfolio.st))\r## [1] \u0026quot;2012-10-17 08:00:00 IBM 1000 @ 199.755777809092\u0026quot;\r## [1] \u0026quot;2012-10-18 08:00:00 IBM 1000 @ 194.1104863151\u0026quot;\r## [1] \u0026quot;2012-10-19 08:00:00 IBM 1000 @ 192.517452197251\u0026quot;\r## [1] \u0026quot;2012-10-22 08:00:00 IBM 1000 @ 193.552913521349\u0026quot;\r## [1] \u0026quot;2012-10-23 08:00:00 IBM 1000 @ 190.416645336717\u0026quot;\r## [1] \u0026quot;2012-10-24 08:00:00 IBM 1000 @ 189.888955759662\u0026quot;\r## [1] \u0026quot;2012-10-25 08:00:00 IBM 1000 @ 190.765126217072\u0026quot;\r## [1] \u0026quot;2012-10-26 08:00:00 IBM 1000 @ 192.42784735108\u0026quot;\r## [1] \u0026quot;2012-10-31 08:00:00 IBM 1000 @ 193.682352036262\u0026quot;\r## [1] \u0026quot;2012-11-01 08:00:00 IBM 1000 @ 196.290930643838\u0026quot;\r## [1] \u0026quot;2012-11-02 08:00:00 IBM 1000 @ 192.58713921341\u0026quot;\r## [1] \u0026quot;2012-11-05 08:00:00 IBM 1000 @ 193.294051426163\u0026quot;\r## [1] \u0026quot;2012-11-06 08:00:00 IBM 1000 @ 194.220007\u0026quot;\r## [1] \u0026quot;2012-11-07 08:00:00 IBM 1000 @ 191.160004\u0026quot;\r## [1] \u0026quot;2012-11-08 08:00:00 IBM 1000 @ 190.100006\u0026quot;\r## [1] \u0026quot;2012-11-09 08:00:00 IBM 1000 @ 189.639999\u0026quot;\r## [1] \u0026quot;2012-11-12 08:00:00 IBM 1000 @ 189.25\u0026quot;\r## [1] \u0026quot;2012-11-13 08:00:00 IBM 1000 @ 188.320007\u0026quot;\r## [1] \u0026quot;2012-11-14 08:00:00 IBM 1000 @ 185.509995\u0026quot;\r## [1] \u0026quot;2012-11-15 08:00:00 IBM 1000 @ 185.850006\u0026quot;\r## [1] \u0026quot;2012-11-16 08:00:00 IBM 1000 @ 186.940002\u0026quot;\r## [1] \u0026quot;2012-11-19 08:00:00 IBM -21000 @ 190.350006\u0026quot;\r## [1] \u0026quot;2012-10-17 08:00:00 MSFT 1000 @ 29.3488341516242\u0026quot;\r## [1] \u0026quot;2012-10-18 08:00:00 MSFT 1000 @ 29.2595676739748\u0026quot;\r## [1] \u0026quot;2012-10-19 08:00:00 MSFT 1000 @ 28.4065758956973\u0026quot;\r## [1] \u0026quot;2012-10-22 08:00:00 MSFT -3000 @ 27.7717930464845\u0026quot;\rThen we can update the accounts.\nupdatePortf(portfolio.st)\rupdateAcct(portfolio.st)\rupdateEndEq(account.st)\rWe can also plot the trading positions.\nfor(symbol in symbols) {\rchart.Posn(Portfolio=portfolio.st,\rSymbol=symbol,log=TRUE)\r}\rSMA rule with volatility filter\rWe will consider the following rule:\nBuy every day when\rSMA30 SMA200 and\r52 period standard deviation of close prices is less than its median over the last N periods.\rSell everything when\rSMA30 SMA200\rStep 1: Initialization\rWe first download data\nfrom =\u0026quot;2009-01-01\u0026quot;\rto =\u0026quot;2012-12-31\u0026quot;\rsymbols = c(\u0026quot;IBM\u0026quot;)\rcurrency(\u0026quot;USD\u0026quot;)\rgetSymbols(symbols, from=from, to=to, adjust=TRUE)\rstock(symbols, currency=\u0026quot;USD\u0026quot;, multiplier=1)\rinitEq=10^6\rWe first initialize the setup.\nstrategy.st \u0026lt;- portfolio.st \u0026lt;- account.st \u0026lt;- \u0026quot;SMAv\u0026quot;\rrm.strat(\u0026quot;SMAv\u0026quot;)\rinitPortf(portfolio.st, symbols=symbols,\rinitDate=initDate, currency=\u0026#39;USD\u0026#39;)\rinitAcct(account.st, portfolios=portfolio.st, initDate=initDate, currency=\u0026#39;USD\u0026#39;,\rinitEq=initEq)\rinitOrders(portfolio.st, initDate=initDate)\rstrategy(strategy.st, store=TRUE)\rStep 2: Indicator\rBesides SMA, we will need a new indicator to give buy signal. Since it is combination of SMA and volatility, we need to construct our own indicator, RB:\nRB \u0026lt;- function(x,n){\rx \u0026lt;- x\rsd \u0026lt;- runSD(x, n, sample= FALSE)\rmed \u0026lt;- runMedian(sd,n)\rmavg \u0026lt;- SMA(x,n)\rsignal \u0026lt;- ifelse(sd \u0026lt; med \u0026amp; x \u0026gt; mavg,1,0)\rcolnames(signal) \u0026lt;- \u0026quot;RB\u0026quot;\rreclass(signal,x)\r}\rNow we are ready to define our indicators:\nadd.indicator(\rstrategy.st, name=\u0026quot;SMA\u0026quot;,\rarguments=list(x=quote(Cl(mktdata)), n=30),\rlabel=\u0026quot;sma30\u0026quot;)\radd.indicator(\rstrategy.st, name=\u0026quot;SMA\u0026quot;,\rarguments=list(x=quote(Cl(mktdata)), n=200),\rlabel=\u0026quot;sma200\u0026quot;)\radd.indicator(\rstrategy.st, name=\u0026quot;RB\u0026quot;,\rarguments=list(x=quote(Cl(mktdata)), n=200),\rlabel=\u0026quot;RB\u0026quot;)\rStep 3: Signals\rNow we add two signals: Buy signal appears when RB is greater than or equal to 1. Sell signals appears when SMA30 is less than SMA200. Hence, this is different from simple trading rule. Here, we are going to do signal comparison. There are two price lists: sma200 and sma30. Then the relationship is greater than for buy and less than for less.\n# Bull market if RB\u0026gt;=1\radd.signal(strategy.st, name=\u0026quot;sigThreshold\u0026quot;, arguments = list(threshold=1, column=\u0026quot;RB\u0026quot;,\rrelationship=\u0026quot;gte\u0026quot;,\rcross=TRUE),\rlabel=\u0026quot;buy\u0026quot;)\r# Sell market if SMA30\u0026lt;SMA200\radd.signal(strategy.st, name=\u0026quot;sigComparison\u0026quot;,\rarguments=list(columns=c(\u0026quot;sma30\u0026quot;,\u0026quot;sma200\u0026quot;), relationship=\u0026quot;lt\u0026quot;), label=\u0026quot;sell\u0026quot;)\rStep 4: Rules\rWe now consider buy and sell rules using market order. Note that this is the same as the case for simple SMA rule.\n# Buy Rule\radd.rule(strategy.st, name=\u0026#39;ruleSignal\u0026#39;, arguments = list(sigcol=\u0026quot;buy\u0026quot;, sigval=TRUE, orderqty=1000, ordertype=\u0026#39;market\u0026#39;, orderside=\u0026#39;long\u0026#39;, pricemethod=\u0026#39;market\u0026#39;, replace=FALSE), type=\u0026#39;enter\u0026#39;, path.dep=TRUE)\r# Sell Rule\radd.rule(strategy.st, name=\u0026#39;ruleSignal\u0026#39;, arguments = list(sigcol=\u0026quot;sell\u0026quot;, sigval=TRUE, orderqty=\u0026#39;all\u0026#39;, ordertype=\u0026#39;market\u0026#39;, orderside=\u0026#39;long\u0026#39;, pricemethod=\u0026#39;market\u0026#39;, replace=FALSE), type=\u0026#39;exit\u0026#39;, path.dep=TRUE) Step 5: Evaluation\rWe first try to apply the trading rule.\nout\u0026lt;-try(applyStrategy(strategy.st,\rportfolios=portfolio.st))\r## [1] \u0026quot;2010-09-07 08:00:00 IBM 1000 @ 121.265927698413\u0026quot;\r## [1] \u0026quot;2010-09-13 08:00:00 IBM 1000 @ 124.789816471828\u0026quot;\r## [1] \u0026quot;2011-07-14 08:00:00 IBM 1000 @ 169.919478248927\u0026quot;\r## [1] \u0026quot;2011-08-08 08:00:00 IBM 1000 @ 162.813574456635\u0026quot;\r## [1] \u0026quot;2011-08-24 08:00:00 IBM 1000 @ 163.342502099495\u0026quot;\r## [1] \u0026quot;2011-09-13 08:00:00 IBM 1000 @ 160.080743434437\u0026quot;\r## [1] \u0026quot;2012-07-06 08:00:00 IBM 1000 @ 189.765720727769\u0026quot;\r## [1] \u0026quot;2012-07-20 08:00:00 IBM 1000 @ 190.796779800297\u0026quot;\r## [1] \u0026quot;2012-07-26 08:00:00 IBM -8000 @ 192.283894241252\u0026quot;\r## [1] \u0026quot;2012-07-27 08:00:00 IBM 1000 @ 194.702935714691\u0026quot;\r## [1] \u0026quot;2012-07-30 08:00:00 IBM -1000 @ 194.990438558152\u0026quot;\rThen we can update the accounts.\nupdatePortf(portfolio.st)\rupdateAcct(portfolio.st)\rupdateEndEq(account.st)\rWe can also plot the trading positions.\nchart.Posn(Portfolio=portfolio.st,\rSymbol=\u0026quot;IBM\u0026quot;,\rlog=TRUE)\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"1bfc717d20cd939e48be742cbfbafeeb","permalink":"/programming/r-programming/ta-with-r-ch8/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r-ch8/","section":"programming","summary":"no\rQuanstrat\rSince quantstrat is not standard package, we first learn how to install custom package.\nWe will illustrate the usage of the quantstrat package by showing how four different rules be applied:","tags":null,"title":"","type":"docs"},{"authors":null,"categories":null,"content":"\rIndifference Curve\r\\begin{tikzpicture}[scale=.7]\r% Axis\r\\draw [-\u0026gt;] (0,0) node [below] {0} -- (0,0) -- (5.5,0) node [below] {Good 1};\r\\draw [-\u0026gt;] (0,0) node [below] {0} -- (0,0) -- (0,5.5) node [above] {Good 2};\r% Indifference curve\r\\draw (0.3,5) to [out=280,in=175] (5.5,0.5);\r\\draw (1,5) to [out=280,in=175] (5.5,1.2);\r\\draw (1.6,5) to [out=280,in=175] (5.5,1.8);\r\\end{tikzpicture}\rUtility Maximization\r\\begin{tikzpicture}[scale=.7]\r\\draw[thick,\u0026lt;-\u0026gt;] (0,10) node[above]{$y$}--(0,0)--(10,0) node[right]{$x$};\r\\node [below left] at (0,0) {$0$};\r\\node [below] at (5,0) {$x^{*}$};\r\\node [left] at (0,5) {$y^{*}$};\r\\draw(1,9)--(9,1) node[right]{$p_xx+p_yy=I$};\r\\draw(0,5)--(5,5)--(5,0);\r\\draw(2,10) ..controls (3.33,6) and (6,3.33) .. (10,2) node[right]{$U(x,y)=U_0$};\r\\end{tikzpicture}\rHicks Decomposition\r\\begin{tikzpicture}[scale=1.2]\r\\draw [thick] (0,0) -- (8,0);\r\\draw [thick] (0,0) -- (0,5);\r\\node [right] at (8,0) {$x_1$};\r\\node [above] at (0,5) {$x_2$};\r\\draw [thick] (2.2,3.8) to [out=310,in=170] (5.5,1.8);\r\\draw [thick] (0.3,4.5) to [out=290,in=165] (3.1,1.6);\r\\node [right] at (6,1.1) {$C$};\r\\node [right] at (0.5,4.1) {$\\texttt{I}$};\r\\draw [thick] (0,4.8) -- (7.5,0);\r\\draw [thick] (0,4.8) -- (2.7,0);\r\\draw[dashed](0.9,3.2)--(0.9,0);\r\\draw[dashed](3.4,2.6)--(3.4,0);\r\\draw [thick] (0,3.3) -- (5.3,0);\r\\draw[dashed](2.2,1.9)--(2.2,0);\r\\node [above] at (2.4,1.9) {$x^B$};\r\\draw[fill] (2.22,1.9) circle [radius =0.06];\r\\node [above] at (3,1.7) {$\\texttt{I}$};\r\\node [right] at (0.8,3.5) {$x^A$};\r\\draw[fill] (0.9,3.25) circle [radius =0.06];\r\\node [right] at (3.4,2.8) {$x^C$};\r\\draw[fill] (3.43,2.6) circle [radius =0.06];\r\\node [right] at (0.5,4.6) {$C$};\r\\node [right] at (-0.1,4.2) {$A$};\r\\node [left] at (2.6,0.2) {$A$};\r\\node [right] at (5.3,0.2) {$B$};\r\\node [right] at (-0.1,3.5) {$B$};\r\\end{tikzpicture}\rSlustsky Decomposition\r\\begin{tikzpicture}[scale=1.2]\r\\draw [thick] (0,0) -- (8,0);\r\\draw [thick] (0,0) -- (0,5);\r\\node [right] at (8,0) {$x_1$};\r\\node [above] at (0,5) {$x_2$};\r\\draw [thick] (1.7,4.2) to [out=310,in=160] (5.4,1.5);\r\\draw [thick] (0.6,4) to [out=295,in=165] (3.5,1);\r\\draw [thick] (1.4,3.2) to [out=290,in=155] (3.5,1.3);\r\\node [right] at (6.5,0.9) {$C$};\r\\draw [thick] (0,4.6) -- (7.5,0);\r\\draw [thick] (0,4.6) -- (3.15,0);\r\\draw[dashed](1.4,2.5)--(1.4,0);\r\\draw[dashed](3.4,2.5)--(3.4,0);\r\\draw [thick] (0,3.4) -- (5.4,0);\r\\draw[dashed](2.4,1.9)--(2.4,0);\r\\node [above] at (2.4,2) {$x^B$};\r\\draw[fill] (2.4,1.9) circle [radius =0.06];\r\\node [left] at (1.3,2.5) {$x^A$};\r\\draw[fill] (1.4,2.5) circle [radius =0.06];\r\\node [right] at (3.2,3) {$x^C$};\r\\draw[fill] (3.4,2.5) circle [radius =0.06];\r\\node [right] at (0.5,4.6) {$C$};\r\\node [right] at (-0.1,4) {$A$};\r\\node [left] at (2.9,0.2) {$A$};\r\\node [right] at (4.3,0.2) {$B$};\r\\node [right] at (-0.1,3.1) {$B$};\r\\end{tikzpicture}\rEngle Curve\r\\begin{tikzpicture}[scale=1]\r\\draw [-\u0026gt;] (0,0) node [below] {0} -- (0,0) -- (6.5,0);\r\\draw [-\u0026gt;] (0,0) node [below] {0} -- (0,0) -- (0,5.5);\r\\node [align=left, left] at (-0.2,5.3) {Expenditure\\\\ on Good$(v_i)$};\r\\node [below] at (5.7,-0.1) {$Income(y)$};\r\\draw (0,0) to [out=15,in=255] (4.4,4.8);\r\\node [align=left, above] at (4.5,4.8) {luxury\\\\ $\\eta_i\u0026gt;0$};\r\\draw (0.5,5) to [out=270,in=175] (4.8,0.7);\r\\node [align=left, above] at (5.4,0.4) {inferior\\\\ $\\eta_i\u0026lt;0$};\r\\draw (0,0) to [out=40,in=185] (5,2);\r\\node [align=left, right] at (5,2) {necessity\\\\ $0\u0026lt;\\eta_i\u0026lt;1$};\r\\draw (0,0)--(5,2.6);\r\\node [above] at (5,2.6) {$\\eta_i=1$};\r\\end{tikzpicture}\rConsumer Surplus\r\\begin{tikzpicture}[scale=1]\r\\draw [-\u0026gt;] (0,0) node [below] {0} -- (0,0) -- (6,0) node [right] {$\\texttt{Quantity}$};\r\\draw [-\u0026gt;] (0,0) node [below] {0} -- (0,0) -- (0,5.5) node [above] {$\\texttt{Price}$};\r\\draw (0,5)--(6,1.4);\r\\node [right] at (6,1.4) {$D$};\r\\draw (0,3.5)--(2.5,3.5);\r\\draw (0,2)--(5,2);\r\\draw (5,2)--(5,0);\r\\draw (2.5,0)--(2.5,3.5);\r\\node [right] at (5,2.2) {$B$};\r\\node [right] at (2.5,4) {$A$};\r\\node [right] at (.2,5.2) {$I$};\r\\node [left] at (0,1.5) {$P\u0026#39;$};\r\\node [left] at (0,3.5) {$P$};\r\\node [below] at (2.2,0) {$Q$};\r\\node [below] at (5,0) {$Q\u0026#39;$};\r\\end{tikzpicture}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"a9010b277977d36b6e8b5ef6267cf120","permalink":"/programming/tikz/consumer/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/consumer/","section":"programming","summary":"Indifference Curve\r\\begin{tikzpicture}[scale=.7]\r% Axis\r\\draw [-\u0026gt;] (0,0) node [below] {0} -- (0,0) -- (5.5,0) node [below] {Good 1};\r\\draw [-\u0026gt;] (0,0) node [below] {0} -- (0,0) -- (0,5.5) node [above] {Good 2};\r% Indifference curve\r\\draw (0.","tags":null,"title":"Consumer Theory","type":"docs"},{"authors":null,"categories":null,"content":"\rMonopoly\r\\begin{tikzpicture}[scale=1]\r\\draw (0,5.8) node [left] {$Y$} --(0,0) node [left] {$O$} --(4.8,0) node [right] {$X$};\r\\node [below] at (1.5,0) {$A$};\r\\node [below] at (2.4,0) {$B$};\r\\node [below] at (3.6,0) {$C$};\r\\node [left] at (0,2) {$H$};\r\\node [left] at (0,3) {$K$};\r\\node [right] at (1.5,1.5) {$E$};\r\\node [above left] at (0.8,3) {$F$};\r\\node [above] at (2.4,2) {$P$};\r\\node [above right] at (1.5,3) {$Q$};\r%line M\r\\draw (1.53,0)--(1.53,4.8) node [above] {$M$} ;\r% Line GEA\r\\draw (0,1.55)--(1.53,1.55)--(1.53,0);\r\\node [left] at (0,1.6) {$G$};\r\\draw (0,2)--(2.35,2)--(2.35,0);\r\\draw (0,3)--(3.6,3)--(3.6,0);\r\\draw (0,1) ..controls (2.3,1.6) and (4,3) ..(4.6,4.5) node [above right] {$S\u0026#39;$};\r\\draw (0,5.6) ..controls (0.8,3) and (1.5,1.5) ..(2.1,0.5) node [below] {$d\u0026#39;$};\r\\draw (0,5.6) ..controls (1.5,2.75) and (2.4,1.6) ..(4.4,0.4) node [above right] {$D\u0026#39;$};\r\\end{tikzpicture}\rDemand and Supply\r\\begin{tikzpicture}[scale=0.6]\r\\draw[thick,\u0026lt;-\u0026gt;] (0,10) node[above]{$P$}--(0,0)--(10,0) node[right]{$Q$};\r\\node [below left] at (0,0) {$0$};\r\\node [below] at (5,0) {$Q^*$};\r\\node [left] at (0,5) {$P^*$};\r\\draw(1,1)--(9,9) node[right]{$S$};\r\\draw(1,9)--(9,1) node[right]{$D$};\r\\draw[dashed](0,5)--(5,5)--(5,0);\r\\end{tikzpicture}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"585f24f9fd7ef47292d94d47aab46633","permalink":"/programming/tikz/demand-and-supply/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/demand-and-supply/","section":"programming","summary":"Monopoly\r\\begin{tikzpicture}[scale=1]\r\\draw (0,5.8) node [left] {$Y$} --(0,0) node [left] {$O$} --(4.8,0) node [right] {$X$};\r\\node [below] at (1.5,0) {$A$};\r\\node [below] at (2.4,0) {$B$};\r\\node [below] at (3.6,0) {$C$};\r\\node [left] at (0,2) {$H$};\r\\node [left] at (0,3) {$K$};\r\\node [right] at (1.","tags":null,"title":"Demand and Supply","type":"docs"},{"authors":null,"categories":null,"content":"In this book, we learn how to do financial programming in two steps. We first cover Excel that requires minimum programming technique, it is desirable to start learning it first. Excel VBA is covered to provide a smooth transition to more complicated R programming. In particular, students first learn how to use Excel to generate a simple trading system and this builds the foundation for the more complicated trading system in R.\nExcel VBA is commonly used for computationally less demanding calculations in both academic and business world. Students are prepared to how to use them to do various financial analysis including fundamental analysis, technical analysis and time series analysis. In particular, students will learn how to write an analyst report, and create the computer-aided technical trading system.\nThe book is available through Google Play or Google book. You can read the whole book through free sampling and preview. If you think that I have done a good or bad job, please feel free to drop me an email with comments/suggestions. Of course, you are very welcome to consider buying me a cup of coffee through purchasing the ebook.\nAfter purchasing through Google Play, you may download acsm file to be opened by specialized software such as Adobe Digital Edition. The software will download the pdf file to be read offline. ","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"51d4e99984bc916177e3f7493a57ee39","permalink":"/programming/r-programming/excel-vba-r/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/excel-vba-r/","section":"programming","summary":"In this book, we learn how to do financial programming in two steps. We first cover Excel that requires minimum programming technique, it is desirable to start learning it first. Excel VBA is covered to provide a smooth transition to more complicated R programming.","tags":null,"title":"Financial programming with Excel VBA R","type":"docs"},{"authors":null,"categories":null,"content":"\rBest Reply\r\\begin{tikzpicture}[scale=0.7]\r\\tiny\r\\draw (0,0) -- (6,0) node [below] {$s_B$};\r\\draw (0,0) -- (0,6) node [left] {$s_A$};\r\\node [below] at (0,0) {$O$};\r\\draw(0,0.7) to [out=15,in=230] (5.5,4);\r\\node [below] at (5.4,3.3) {$R_A(s_B)$};\r\\draw [-\u0026gt;] (3,0.5) -- (3,1.4);\r\\draw [xshift=7cm](0,0) -- (6,0) node [below] {$s_B$};\r\\draw [xshift=7cm] (0,0) -- (0,6) node [left] {$s_A$};\r\\node [xshift=4.7cm][below] at (0,0) {$O$};\r\\draw [xshift=7cm] (1,0) to [out=40,in=260] (3.5,3);\r\\draw [xshift=7cm] (3.5,3) to [out=85,in=220] (5.5,5);\r\\node [xshift=6cm][below] at (4.6,4.4) {$R_B(s_A)$};\r\\draw [xshift=7cm][-\u0026gt;] (0.5,2.5) -- (2,2.5);\r\\end{tikzpicture}\rNash Equilibrium\r\\begin{tikzpicture}[scale=0.7]\r\\tiny\r\\draw (0,0) -- (6,0) node [below] {$s_B$};\r\\draw (0,0) -- (0,6) node [left] {$s_A$};\r\\node [below] at (0,0) {$O$};\r\\draw (0,0.7) to [out=15,in=230] (5.5,4.6);\r\\node [below] at (6,4) {$R_A(s_B)$};\r\\node [below] at (4,5) {$R_B(s_A)$};\r\\draw (1,0) to [out=40,in=260] (3.5,3);\r\\draw (3.5,3) to [out=85,in=220] (5.3,5.3);\r\\node [below] at (3.3,0) {$s^*_B$};\r\\draw[dotted](3.3,0)--(3.3,2.4);\r\\draw[dotted](0,2.4)--(3.3,2.4);\r\\node [left] at (0,2.4) {$s^*_A$};\r\\end{tikzpicture}\rMixed-strategy Nash equilibrium\r\\begin{tikzpicture}[scale=0.8]\r\\tiny\r% Left Graph\r\\draw (0,0) -- (3.3,0);\r\\draw (0,0) -- (0,3.3);\r\\draw [thick] (0,0)--(1.5,0)--(1.5,3) -- (3,3);\r\\draw [dashed] (0,3)--(1.5,3);\r\\draw [dashed] (3,3)--(3,0);\r\\node [right] at (3,3) {$R_A(q_B)$};\r\\node [below] at (0,0) {$0$};\r\\node [below] at (1.5,0) {$1\\over 2$};\r\\node [below] at (3,0) {$1$};\r\\node [right] at (3.3,0) {$q_B$};\r\\node [left] at (0,3) {$1$};\r\\node [above] at (0,3.3) {$q_A$};\r% Middle Graph\r\\draw [xshift=5.1cm] (0,0) -- (3.3,0);\r\\draw [xshift=5.1cm] (0,0) -- (0,3.3);\r\\draw [xshift=5.1cm,thick] (3,0) -- (3,1.5)--(0,1.5)--(0,3);\r\\draw [xshift=5.1cm][dashed] (0,3)--(3,3);\r\\draw [xshift=5.1cm][dashed] (0,1.5)--(3,1.5);\r\\draw [xshift=5.1cm][dashed] (3,3)--(3,1.5);\r\\node [xshift=3.9cm][right] at (3.3,0.4) {$R_B(q_A)$};\r\\node [xshift=4.1cm][below] at (0,0) {$0$};\r\\node [xshift=4.1cm][left] at (0,1.5) {$1\\over 2$};\r\\node [xshift=4.1cm][below] at (3,0) {$1$};\r\\node [xshift=4.1cm][right] at (3.3,0) {$q_B$};\r\\node [xshift=4.1cm][left] at (0,3) {$1$};\r\\node [xshift=4.1cm][above] at (0,3.3) {$q_A$};\r% Right Graph\r\\draw [xshift=10cm] (0,0) -- (3.3,0);\r\\draw [xshift=10cm] (0,0) -- (0,3.3);\r\\draw [xshift=10cm] (3,0) -- (3,1.5);\r\\draw [xshift=10cm,thick] (0,0)--(1.5,0)--(1.5,3) -- (3,3);\r\\draw [xshift=10cm,thick] (3,0) -- (3,1.5)--(0,1.5)--(0,3);\r\\draw [xshift=10cm][dashed] (0,3)--(3,3);\r\\draw [xshift=10cm][dashed] (0,1.5)--(3,1.5);\r\\draw [xshift=10cm][dashed] (3,3)--(3,1.5);\r\\node [xshift=8cm][right] at (3,3) {$R_A(q_B)$};\r\\node [xshift=8cm][right] at (3,1) {$R_B(q_A)$};\r\\node [xshift=8cm][below] at (0,0) {$0$};\r\\node [xshift=8cm][left] at (0.1,1.5) {$q^*_A=\\frac{1}{2}$};\r\\node [xshift=8cm][below] at (3,0) {$1$};\r\\node [xshift=8cm][right] at (3.3,0) {$q_B$};\r\\node [xshift=8cm][left] at (0,3) {$1$};\r\\node [xshift=8cm][above] at (0,3.3) {$q_A$};\r\\draw [xshift=10cm] (1.5,0) -- (1.5,3);\r\\draw [xshift=10cm] (1.5,3) -- (3,3);\r\\node [xshift=8cm][below] at (1.5,0) {$q^*_B=\\frac{1}{2}$};\r\\end{tikzpicture}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"e367aaf85ba168656d02c9d6e61fc08a","permalink":"/programming/tikz/game-theory/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/game-theory/","section":"programming","summary":"Best Reply\r\\begin{tikzpicture}[scale=0.7]\r\\tiny\r\\draw (0,0) -- (6,0) node [below] {$s_B$};\r\\draw (0,0) -- (0,6) node [left] {$s_A$};\r\\node [below] at (0,0) {$O$};\r\\draw(0,0.7) to [out=15,in=230] (5.5,4);\r\\node [below] at (5.","tags":null,"title":"Game Theory","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nWhat is R? What is RStudio?\nInstall R an RStudio\nFamiliarize with RStudio interface\nWhat is R and RStudio? R is a high-level computer language that is designed for statistics and graphics. One main feature is vector program language like Matlab. It is initially written by Ross Ihaka and Robert Gentleman (hence the name of the software). Currently, it is a free open source software maintained by several contributors.\nCompared to alternatives, SAS, Matlab or Stata, R is completely free. Another benefit is that it is open source. This means that there is no black box for everything you use. You know what you are doing. It is also freely expendable so that you can do what you want to do.\nRStudio is an integrated development editor (IDE) for R. It is easier to write code using the editor.\nDownload We first cover how to download R and RStudio. Then we will study the basic interface for RStudio.\nDownload R Head to http://cran.r-project.org/ to download R. On the top of the page, you should see this. Choose the option based on your operating system.\nFigure 1. Download R: Choosing operating system For example, if you choose the option for Windows, you will then see this. Click on the option install R for the first time.\nFigure 2. Download R You will then reach this page. Click on the link to download R version 3.3.3. The download should then start.\nFigure 3. Download R for Windows For Mac OS, clicking on the option for Mac brings you to this page. Click on the link in the red box to download R for Mac. The download should start when you click the link.\nFigure 4. Download R for Mac Using RStduio Opening RStudio, you should see something as in Figure 5.\nFigure 5. RStudio Interface As in Figure 6, there are 2 places where you can enter your code, as highlighted in red.\nFigure 6. RStudio Interface Left The top part is called the code editor, where you can type your code, and choose to run it after you finish typing all of it.\nYou can also type your code in the console, which is below the code editor.\nIn the console, seeing the \u0026gt; symbol means that you are writing a new line of code. You can use the console for calculations, but for coding it is recommended you use the code editor if you wish to edit or reuse the code in future.\nAs in Figure 7, on the top right hand side, you will see a window called Global Environment. This is where all your data(downloaded data, assigned vectors etc) will be shown. Clicking on a data name in this part will open up the data.\nFigure 7. RStudio Interface Top Right You can also view your history of past commands in the History tab.\nAs in Figure 8, at the bottom right hand side, you see this window which shows you the files, viewer, packages, and also the help window.\nFigure 8. RStudio Interface Bottom Right For this course, we will mainly be using this to view plots/graphs, which will be displayed here when you run the code to generate the graphs.\n","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"74e4d18c652f734163a96fc376995b79","permalink":"/programming/r-programming/installation/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/installation/","section":"programming","summary":"Learning Objectives:\nWhat is R? What is RStudio?\nInstall R an RStudio\nFamiliarize with RStudio interface\nWhat is R and RStudio? R is a high-level computer language that is designed for statistics and graphics.","tags":null,"title":"Installation","type":"docs"},{"authors":null,"categories":null,"content":"\rLabor Supply Decision\r\\begin{tikzpicture}[scale=0.7]\r\\draw [\u0026lt;-\u0026gt;] (0,10.4) node [above] {\\small $Daily\\ Income$} --(0,0) node [left] {$O$} --(9,0);\r\\node [below] at (8.6, -0.6) {\\small $House\\ of\\ Leisure$};\r\\node [left] at (0,3.2) {$A$};\r\\node [left] at (0,5.9) {$B$};\r\\node [left] at (0,9.1) {$C$};\r\\node [below] at (8.6,0) {$D$};\r\\node [below] at (6.4,0.8) {$a$};\r\\node [above] at (5.5,2.2) {$b$};\r\\node [right] at (6.4,2.4) {$c$};\r% Slope OW\r\\draw (0,3.2)--(8.6,0);\r\\draw (0,5.9)--(8.6,0);\r\\draw (0,9.1)--(8.6,0);\r\\draw [-\u0026gt;] (0.75,2) node [below] {\\footnotesize$Slope = OW_1$}--(0.8,2.7);\r\\draw [-\u0026gt;] (0.75,4.5) node [below] {\\footnotesize$Slope = OW^*$} --(0.8,5.3);\r\\draw [-\u0026gt;] (0.75,7.2) node [below] {\\footnotesize$Slope = OW_2$} --(0.8,8.1);\r% ICs\r\\draw (1.3,8.7) node [above] {\\footnotesize$IC_1$} ..controls (2.6,2.4) and (6,0.1) ..(8.3,0.7);\r\\draw (2.2,8.5) node [right] {\\footnotesize$IC_2$} ..controls (3.8,3.2) and (5.2,1.8) ..(6.8,1.7);\r\\draw (3.2,8.3) node [right] {\\footnotesize$IC_3$} ..controls (4.7,3.7) and (6.4,2.1) ..(7.3,1.8);\r\\end{tikzpicture}\rLabor Supply Curve\r\\begin{tikzpicture}[scale=0.7]\r\\draw [\u0026lt;-\u0026gt;] (0,10.2) node [above] {\\small $Real\\ Wage\\ Rate$} --(0,0) node [below left] {$O$}--(9.5,0) node [below left] {\\small $House\\ of\\ Work$};\r\\node [left] at (0,3.4) {$W_1$};\r\\node [left] at (0,5.6) {$W_*$};\r\\node [left] at (0,7.6) {$W_2$};\r\\node [right] at (7.3,3.4) {$a$};\r\\node [right] at (8.2,5.6) {$b$};\r\\node [right] at (7.5,7.6) {$c$};\r\\draw [dashed] (0,3.4)--(7.3,3.4);\r\\draw [dashed] (0,5.6)--(8.2,5.6);\r\\draw [dashed] (0,7.6)--(7.4,7.6);\r\\draw (3.8,1.7) node [below] {$S_L$} to [out=20, in=-90] (8.2,5.6) to [out=90, in=-20] (4.3,9.2) node [below left] {$S_L$};\r\\end{tikzpicture}\rBackward Bending Labor Supply Curve\r\\begin{tikzpicture}[scale=0.8]\r\\draw [\u0026lt;-\u0026gt;] (0,8.3) node [above] {\\small $Real \\ Wage \\ Rate$} --(0,0) node [below] {$O$}--(7.6,0) node [below] {\\small $Hours \\ of \\ Work$};\r\\node [left] at (0,4.7){$W_*$};\r\\draw (6,8.2)node [below] {$S_L$} to [out=-165, in=90] (2.4, 4.7) to [out=-90, in=180] (6.6,2) node [below] {$S_L$};\r\\end{tikzpicture}\rLabor Demand and Supply\r\\begin{tikzpicture}[scale=0.8]\r\\draw (0,0) -- (6,0) node [right] {$L$};\r\\draw (0,0) -- (0,6) node [left] {$P_L$};\r\\node at (-0.5,-0.5) {O};\r\\draw (0,3)--(5.5,3);\r\\node at (5.9,3) {$s_L$};\r\\node at (-0.5,3) {$w$};\r\\draw (0,5.7)--(5.6,1);\r\\node at (6.8,0.8) {$D_L=MP_L$};\r\\draw[dashed](3.2,0)--(3.2,3.1);\r\\node at (3.2,-0.5) {$L^{*}$};\r\\end{tikzpicture}\rIncome distribution\r\\begin{tikzpicture}[scale=0.8]\r\\tiny\r\\draw (0,0) -- (6,0) node [right] {$L$};\r\\draw (0,0) -- (0,6) node [left] {$P_L$};\r\\node at (-0.3,-0.3) {O};\r\\draw (0,3)--(6,3);\r\\node at (6.2,3) {$S_L$};\r\\node at (-0.5,3) {$W$};\r\\draw (0,5.4)--(5.6,1.27);\r\\node at (3.4,3.4) {$A$};\r\\node at (6.4,0.8) {$MP_L$};\r\\draw[dashed](3.2,0)--(3.2,3.85);\r\\node at (-0.5,3.85) {$C$};\r\\node at (3.2,4.3) {$B$};\r\\draw[dashed](0,3.85)--(3.2,3.85);\r\\node at (3.2,-0.5) {$L_0$};\r\\draw (0,5.4)--(5.5,2.8);\r\\node at (5.8,2.5) {$AP_L$};\r\\end{tikzpicture}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"943a4d03c7dac7e63bcdb09c91c5a759","permalink":"/programming/tikz/labour-economics/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/labour-economics/","section":"programming","summary":"Labor Supply Decision\r\\begin{tikzpicture}[scale=0.7]\r\\draw [\u0026lt;-\u0026gt;] (0,10.4) node [above] {\\small $Daily\\ Income$} --(0,0) node [left] {$O$} --(9,0);\r\\node [below] at (8.6, -0.6) {\\small $House\\ of\\ Leisure$};\r\\node [left] at (0,3.","tags":null,"title":"Labor Economics","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nVariable: \\newcommand, newenvironment Conditional: if Iteration: for loop Newcommand Basic Newcommand \\newcommand\\NUS{National University of Singapore}\rI like \\NUS{}. Do you like \\NUS{}?\rMath newcommand \\newcommand\\sumx{\\ensuremath{x_1+\\cdots+x_n}}\rI like \\sumx{}.\rNewcommand with argument \\newcommand\\poem[1]{#1 eats an apple.}\r\\poem{Peter}\r\\poem{Mary}\r\\newcommand\\poems[2]{#1 eats #2.}\r\\poems{Peter}{apple}\r\\poems{John}{banana}\rMath newcommand with argument \\newcommand\\sumint[1]{\\ensuremath{1+\\cdots+#1}}\rI like to do \\sumint{3} and \\sumint{n}.\r\\newcommand\\sumints[2]{\\ensuremath{#1+\\cdots+#2}}\rI like to do \\sumints{1}{2} and \\sumints{3}{n}.\rNew Environment Baisc newenvironment \\newenvironment{important}\r{\\begin{center}\\color{red}}\r{\\end{center}}\rI like think the following is important:\r\\begin{important}\rI eat an apple.\r\\end{important}\rNewenvironemt with argument \\newenvironment{important}[1]\r{\\begin{center}\\color{#1}}\r{\\end{center}}\rI like think the following is important:\r\\begin{important}{blue}\rI eat an apple.\r\\end{important}\rNewenvironment with arguments \\newenvironment{important}[2]\r{\\begin{center}\\textbf{#2:} \\color{#1}}\r{\\end{center}}\rI like think the following is important:\r\\begin{important}{blue}{Peter}\rI eat an apple.\r\\end{important}\rConditional Conditional If \\newenvironment{important}[2]\r{\\begin{center}\\textbf{#2:} \\color{#1}}\r{\\end{center}}\rI like think the following is important:\r\\begin{important}{blue}{Peter}\rI eat an apple.\r\\end{important}\rConditional If else \\newif\\ifcond\r\\condfalse % try \\condtrue\r\\ifcond\rYes, this is not me. % run if true\r\\else No, this is you. % run if false\r\\fi\rIteration Iteration for each loop \\usepackage{pgffor}\r\\foreach \\person in {Peter, John, Mary}\r{\\person{} eats an apple.\\par}\r\\foreach \\n in {1,...,10}\r{\\n +}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"3155894f4ec920bab62f6a15a1e09836","permalink":"/programming/latex/latexprogramming/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/latex/latexprogramming/","section":"programming","summary":"Learning Objectives:\nVariable: \\newcommand, newenvironment Conditional: if Iteration: for loop Newcommand Basic Newcommand \\newcommand\\NUS{National University of Singapore}\rI like \\NUS{}. Do you like \\NUS{}?\rMath newcommand \\newcommand\\sumx{\\ensuremath{x_1+\\cdots+x_n}}\rI like \\sumx{}.\rNewcommand with argument \\newcommand\\poem[1]{#1 eats an apple.","tags":null,"title":"LaTeX Programming","type":"docs"},{"authors":null,"categories":null,"content":"Learning Objectives:\nVariable: \\newcommand, newenvironment Conditional: if Iteration: for loop Newcommand Basic Newcommand \\newcommand\\NUS{National University of Singapore}\rI like \\NUS{}. Do you like \\NUS{}?\rMath newcommand \\newcommand\\sumx{\\ensuremath{x_1+\\cdots+x_n}}\rI like \\sumx{}.\rNewcommand with argument \\newcommand\\poem[1]{#1 eats an apple.}\r\\poem{Peter}\r\\poem{Mary}\r\\newcommand\\poems[2]{#1 eats #2.}\r\\poems{Peter}{apple}\r\\poems{John}{banana}\rMath newcommand with argument \\newcommand\\sumint[1]{\\ensuremath{1+\\cdots+#1}}\rI like to do \\sumint{3} and \\sumint{n}.\r\\newcommand\\sumints[2]{\\ensuremath{#1+\\cdots+#2}}\rI like to do \\sumints{1}{2} and \\sumints{3}{n}.\rNew Environment Baisc newenvironment \\newenvironment{important}\r{\\begin{center}\\color{red}}\r{\\end{center}}\rI like think the following is important:\r\\begin{important}\rI eat an apple.\r\\end{important}\rNewenvironemt with argument \\newenvironment{important}[1]\r{\\begin{center}\\color{#1}}\r{\\end{center}}\rI like think the following is important:\r\\begin{important}{blue}\rI eat an apple.\r\\end{important}\rNewenvironment with arguments \\newenvironment{important}[2]\r{\\begin{center}\\textbf{#2:} \\color{#1}}\r{\\end{center}}\rI like think the following is important:\r\\begin{important}{blue}{Peter}\rI eat an apple.\r\\end{important}\rConditional Conditional If \\newenvironment{important}[2]\r{\\begin{center}\\textbf{#2:} \\color{#1}}\r{\\end{center}}\rI like think the following is important:\r\\begin{important}{blue}{Peter}\rI eat an apple.\r\\end{important}\rConditional If else \\newif\\ifcond\r\\condfalse % try \\condtrue\r\\ifcond\rYes, this is not me. % run if true\r\\else No, this is you. % run if false\r\\fi\rIteration Iteration for each loop \\usepackage{pgffor}\r\\foreach \\person in {Peter, John, Mary}\r{\\person{} eats an apple.\\par}\r\\foreach \\n in {1,...,10}\r{\\n +}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"99aa40c0252f84caa62e2d9a4736a0e2","permalink":"/programming/tikz/latexprogramming/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/latexprogramming/","section":"programming","summary":"Learning Objectives:\nVariable: \\newcommand, newenvironment Conditional: if Iteration: for loop Newcommand Basic Newcommand \\newcommand\\NUS{National University of Singapore}\rI like \\NUS{}. Do you like \\NUS{}?\rMath newcommand \\newcommand\\sumx{\\ensuremath{x_1+\\cdots+x_n}}\rI like \\sumx{}.\rNewcommand with argument \\newcommand\\poem[1]{#1 eats an apple.","tags":null,"title":"LaTeX Programming","type":"docs"},{"authors":null,"categories":null,"content":"\rAS-AD\r\\begin{tikzpicture}[scale=0.8]\r\\draw[thick] (0,9) node[above]{$P$}--(0,0) node[below right]{$0$}--(12,0) node[below]{$Y$};\r\\draw(1,1.5) ..controls (5,2) and (8,3) .. (8.5,9) node[above]{$AS$};\r\\draw (2,9) node[above]{$AD$}--(8.5,1.3);\r\\draw(8,9)--(8,0) node[below]{$Y_f$};\r\\draw[dashed](6.53,3.6)--(6.53,0) node[below] {$Y_e$};\r\\end{tikzpicture}\rKeyesnian Cross\r\\begin{tikzpicture}[scale=0.5]\r\\scriptsize\r\\draw[thick] (0,12) node[above]{$E$}--(0,0) node[below right]{$0$}--(12,0) node[below]{$Y$};\r\\draw(0,2)--(12,11) node[right]{$C(Y)+I+G+X-M(Y)$};\r\\draw(0,0)--(12,12) node[right]{$E(Y)=Y$};\r\\draw[dashed](8,8)--(8,0) node[below]{$Y_e$};\r\\draw[dashed](10,9.5)--(10,0) node[below]{$Y_f$};\r\\draw (0,0) ++(0:2) arc(0:45:2);\r\\node [right] at (0.5,0.5) {45$^{\\circ}$};\r\\end{tikzpicture}\rIS-LM\r\\begin{tikzpicture}[scale=0.5]\r\\scriptsize\r\\draw[thick] (0,9) node[left]{$i$}--(0,0) node[below left]{$0$}--(11,0) node[below]{$Y$};\r\\draw(6,9) node[left]{$IS_0$} ..controls (8,8) and (10,7) .. (11,2.5);\r\\draw(6,9) node[left]{$IS_0$} ..controls (8,8) and (10,7) .. (11,2.5);\r\\draw(3.3,6.5) node[left]{$IS_2$} ..controls (5,5.6) and (6,3.8) .. (6.8,1.2);\r\\draw(1.45,4.9) node[left]{$IS_1$} ..controls (2,4.5) and (3.5,4) .. (4,0.65);\r\\draw(0.8,1.1) ..controls (3.8,1.2) and (6.5,1.5) .. (8.25,6.2);\r\\draw[dashed](3.8,1.45) ..controls (6.2,1.7) and (8,2.5) .. (9.5,6.2);\r\\draw(9.5,0) node[below]{$Y_a$}--(9.5,6.2);\r\\draw[dashed](9.5,6.2)--(9.5,9);\r\\draw(8.25,0) node[below]{$Y_0$}--(8.25,9);\r\\node[above] at (8.1,9){$LM_0$};\r\\node[above] at (9.7,9){$LM_1$};\r\\draw(0,1.47) node[left]{$i_1$}--(3.8,1.47)--(3.8,0) node[below]{$Y_1$};\r\\draw(0,2.8) node[left]{$i_2$}--(6.2,2.8)--(6.2,0) node[below]{$Y_2$};\r\\draw(0,6.2) node[left]{$i_a$}--(9.5,6.2);\r\\draw(0,7.6) node[left]{$i_0$}--(8.25,7.6);\r\\end{tikzpicture}\rSolow Growth\r\\begin{tikzpicture}[scale=0.6]\r\\draw[thick,\u0026lt;-\u0026gt;] (0,10) node[above]{depreciation,saving}--(0,0)--(10,0) node[right]{$k$};\r\\node [below left] at (0,0) {$0$};\r\\draw(0,0)--(9,9) node[right]{$\\delta k$};\r\\draw(0,0) ..controls (1,5) and (5,6) .. (10,7) node[right]{$sf(k)$};\r\\end{tikzpicture}\rMoney Demand\r\\begin{tikzpicture}[scale=0.5]\r\\tiny\r\\draw (0,13) node[below left]{$r$} -- (0,0) node[below left]{$0$} -- (14,0) node[below]{$M$};\r\\draw(0,11) node[above left]{$r\u0026#39;$} ..controls (0.5,2) and (6,2) .. (8,2);\r\\draw[dashed](0,2) node[left]{$r\u0026#39;\u0026#39;$} -- (8,2);\r\\draw(8,2) -- (13,2) node[right]{$L_2$} ;\r\\draw(2.5,11) node[above]{$M(y=y_4)$} -- (2.5,0);\r\\draw(5,11) node[above]{$M(y=y_3)$} -- (5,0);\r\\draw(8,11) node[above]{$M(y=y_2)$} -- (8,0);\r\\draw(10.5,11) node[above]{$M(y=y_1)$} -- (10.5,0);\r\\end{tikzpicture}\rPhilips Curves\r\\begin{tikzpicture}[scale=0.5]\r\\scriptsize\r\\draw[thick] (0,6) node[below left] {$\\dot{W}$} -- (0,0) node[below left]{$0$} -- (6,0) node[right]{$U$};\r\\node[below] at (3,-0.5) {$(i)$};\r\\draw(0.5,6) node[above right]{$PC_W$} ..controls (0.6,0.5) and (0.7,0) .. (5.8,-0.3);\r\\draw[thick][xshift=8cm] (0,6) node[below left] {$\\dot{P}$} -- (0,0) node[below left]{$0$} -- (6,0) node[right]{$Y$};\r\\node[below] at (11,-0.5) {$(ii)$};\r\\draw[xshift=8cm](0,-0.6) ..controls (5,-0.5) and (5.5,0) .. (6,5.9) node[above]{$PC_P$};\r\\end{tikzpicture}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"a0b17937955c021fa6f0b6eecfb647f4","permalink":"/programming/tikz/macroeconomics/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/macroeconomics/","section":"programming","summary":"AS-AD\r\\begin{tikzpicture}[scale=0.8]\r\\draw[thick] (0,9) node[above]{$P$}--(0,0) node[below right]{$0$}--(12,0) node[below]{$Y$};\r\\draw(1,1.5) ..controls (5,2) and (8,3) .. (8.5,9) node[above]{$AS$};\r\\draw (2,9) node[above]{$AD$}--(8.5,1.3);\r\\draw(8,9)--(8,0) node[below]{$Y_f$};\r\\draw[dashed](6.53,3.6)--(6.53,0) node[below] {$Y_e$};\r\\end{tikzpicture}\rKeyesnian Cross\r\\begin{tikzpicture}[scale=0.5]\r\\scriptsize\r\\draw[thick] (0,12) node[above]{$E$}--(0,0) node[below right]{$0$}--(12,0) node[below]{$Y$};\r\\draw(0,2)--(12,11) node[right]{$C(Y)+I+G+X-M(Y)$};\r\\draw(0,0)--(12,12) node[right]{$E(Y)=Y$};\r\\draw[dashed](8,8)--(8,0) node[below]{$Y_e$};\r\\draw[dashed](10,9.","tags":null,"title":"Macroeconomics","type":"docs"},{"authors":null,"categories":null,"content":"\rIsoquant\r\\begin{tikzpicture}[scale=1.2]\r\\draw (0,0) -- (5.5,0);\r\\draw (0,0) -- (0,5.5);\r\\node [left] at (-0.2,5.3) {$\\texttt{K}$};\r\\node [below] at (5.3,-0.1) {$\\texttt{L}$};\r\\draw [thick] (1.7,4.8) to [out=275,in=180] (5,1.3);\r\\node [right] at (1.5,5) {$I$};\r\\node [right] at (5,1.3) {$I$};\r\\draw [thick] (0,0) -- (2.7,4.5);\r\\draw [thick] (0,0) -- (4,3.7);\r\\draw[dotted, thick](1,4.05)--(4.1,0.95);\r\\draw[dotted, thick](1.15,5.1)--(3.35,0.8);\r\\node [right] at (0.7,4.4) {$C^1$};\r\\node [below] at (4.2,0.9) {$C^1$};\r\\node [above] at (1.1,5.2) {$C^2$};\r\\node [below] at (3.3,0.8) {$C^2$};\r\\node [right] at (2,3.4) {$B$};\r\\node [right] at (2.7,2.4) {$A$};\r\\end{tikzpicture}\rCost Minimization\r\\begin{tikzpicture}[scale=.9]\r\\draw (0,7.7) node [left] {$K$} -- (0,0) node [below left] {$0_1$} -- (8.2,0) node [below right] {$L$};\r\\node [left] at (0,6.1) {$C/r$};\r\\node [below] at (5.75,0) {$C/w$};\r\\node [below] at (2.9,0) {$L_1$};\r\\node [left] at (0,3) {$K_1$};\r\\node [right] at (6,1.4) {$x_1$};\r\\node [right] at (2.9,.9) {\\tiny $|slope|=w/r$};\r\\draw [dotted, thick] (0,3) -- (2.9,3) -- (2.9,0);\r\\draw (1.5,6.4) to [out=-90, in=130] (2.9,3) to [out=-50, in=170] (6,1.4);\r\\draw (0,6.1) -- (5.75,0);\r\\end{tikzpicture}\rShort-run Cost Curves\r\\begin{tikzpicture}[scale=0.8]\r\\tiny\r\\draw (0,0) -- (8,0) node [below] {Quantity, units};\r\\draw (0,-0.5) -- (0,5) node [above] {Cost per unit, \\$};\r\\draw (0.2,5) to [out=270,in=172] (2.6,0.4);\r\\draw (2.6,0.4) to [out=350.5,in=178] (7,0.1);\r\\node [right] at (7,0.5) {$AFC$};\r\\draw (0.3,5) to [out=280,in=150] (2,2.1);\r\\draw (2,2.1) to [out=330,in=200] (7,2);\r\\node [right] at (7,2.3) {$ATC$};\r\\draw (0,2) to [out=340,in=200] (7,1.8);\r\\node [right] at (7,1.8) {$AVC$};\r\\draw (0,2) to [out=315,in=240] (7,5);\r\\node [right] at (7,5) {$MC$};\r\\end{tikzpicture}\rLong-run Cost Curves\r\\begin{tikzpicture}[scale=0.8]\r\\tiny\r\\draw (-0.3,0)-- (0,0) -- (8,0) node [below] {Quantity, units};\r\\draw (0,-0.5)-- (0,0) -- (0,5) node [above] {Average total cost, \\$};\r\\draw (0.2,3.7) to [out=290,in=180] (3.75,1);\r\\draw (3.75,1) to [out=360,in=260] (7.6,3.9);\r\\node [above] at (7.5,4) {$LRAC$};\r\\draw (0.5,3.3) to [out=280,in=180] (1.5,2.2);\r\\draw (1.5,2.2) to [out=360,in=255] (2.8,3.3);\r\\draw [fill] (0.75,2.65) circle [radius =0.06];\r\\node [below] at (0.75,2.55){$a$};\r\\node [left] at (2.8,3.3){$SRAC$};\r\\draw (2,2.6) to [out=280,in=180] (3.75,1);\r\\draw (3.75,1) to [out=360,in=255] (5.3,2.6);\r\\draw [fill] (3.75,1) circle [radius =0.06];\r\\node [below] at (3.75,1) {$b$};\r\\node [left] at (5.1,2) {$SRAC$};\r\\draw (4.8,3.4) to [out=280,in=180] (6,2.3);\r\\draw (6,2.3) to [out=360,in=270] (7.4,3.5);\r\\draw [fill] (7.32,3) circle [radius =0.06];\r\\node [below] at (7.32,3) {$c$};\r\\node [left] at (7.22,3.2) {$SRAC$};\r\\end{tikzpicture}\rProduction Possibility Frontier\r\\begin{tikzpicture}[scale=1.2]\r\\draw (0,5.1) node [left] {$Y$} -- (0,0) node [below left] {$0$} -- (4,0) node [below] {$X$};\r\\draw (0,4.1) to [out=-15, in=120] (2.8,2) to [out=-60, in=95] (3.4,0);\r\\draw [-\u0026gt;] (2.8,2) -- (3.3,2.2);\r\\draw [dashed] (1.2,3.6) -- (3.1,1.3);\r\\draw [dashed] (1.2,3.6) -- (2.9,3.2);\r\\node [right] at (3.3,2.2) {$E$};\r\\node [right] at (3.1,1.3) {$B$};\r\\node [left] at (0,4.1) {$F$};\r\\draw [fill] (0,4.1) circle [radius=.05];\r\\node [right] at (0,4.5) {$H$};\r\\draw [fill] (0,4.5) circle [radius=.05];\r\\node [above left] at (3.4,0) {$G$};\r\\draw [fill] (3.4,0) circle [radius=.05];\r\\node [right] at (2.5,2.5) {$I$};\r\\draw [fill] (2.5,2.5) circle [radius=.05];\r\\node [above] at (2.9,2) {$D$};\r\\draw [fill] (2.8,2) circle [radius=.05];\r\\node [right] at (2.9,3.2) {$C$};\r\\draw [fill] (2.9,3.2) circle [radius=.05];\r\\node [above right] at (1.2,3.6) {$A$};\r\\draw [fill] (1.2,3.6) circle [radius=.05];\r\\end{tikzpicture}\r","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"1ed89902e608c2262b1b92300460f9c4","permalink":"/programming/tikz/producer/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/producer/","section":"programming","summary":"Isoquant\r\\begin{tikzpicture}[scale=1.2]\r\\draw (0,0) -- (5.5,0);\r\\draw (0,0) -- (0,5.5);\r\\node [left] at (-0.2,5.3) {$\\texttt{K}$};\r\\node [below] at (5.3,-0.1) {$\\texttt{L}$};\r\\draw [thick] (1.7,4.8) to [out=275,in=180] (5,1.3);\r\\node [right] at (1.","tags":null,"title":"Produer Theory","type":"docs"},{"authors":null,"categories":null,"content":"I have written an introductory book with R, titled Technical Analysis with R. Readers are prepared how to do\ndata manipulation (dyplr package), conduct econometric analysis (regression, time series), plotting (ggplot2 package, dygraphs package), webscrapping (rvest package, wbstat package, quantmod package), and financial analysis (quantmod package, quantstrat package). backtest a complex trading strategy and evaluate the performance. The book is available through here (this website), bookdown (free online gitbook) or Gumroad (name-your-own-price offline pdf and epub). You can read the whole book through bookdown. Of course, you are very welcome to consider buying me a cup of coffee by purchasing the ebook.\nAfter purchasing through Gumroad, you can download pdf and epub. ","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"3b3821b849fbc002ee909416aa6c5520","permalink":"/programming/r-programming/technical-analysis-with-r/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/technical-analysis-with-r/","section":"programming","summary":"I have written an introductory book with R, titled Technical Analysis with R. Readers are prepared how to do\ndata manipulation (dyplr package), conduct econometric analysis (regression, time series), plotting (ggplot2 package, dygraphs package), webscrapping (rvest package, wbstat package, quantmod package), and financial analysis (quantmod package, quantstrat package).","tags":null,"title":"Technical analysis with R","type":"docs"},{"authors":null,"categories":null,"content":"I have written an introductory book with R, titled Technical Analysis with R. Readers are prepared how to do\ndata manipulation (dyplr package) conduct econometric analysis (regression, time series), plotting (ggplot2 package, dygraphs package), webscrapping (rvest package, wbstat package, quantmod package), and financial analysis (quantmod package, quantstrat package). backtest a complex trading strategy and evaluate the performance. The book is available through here (this website), bookdown (free online gitbook) or Gumroad (name-your-own-price offline pdf and epub). You can read the whole book through bookdown. Of course, you are very welcome to consider buying me a cup of coffee by purchasing the ebook.\nAfter purchasing through Gumroad, you can download pdf and epub. ","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"ed2705d7fd136243248f92c11ac781dc","permalink":"/programming/r-programming/ta-with-r/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/r-programming/ta-with-r/","section":"programming","summary":"I have written an introductory book with R, titled Technical Analysis with R. Readers are prepared how to do\ndata manipulation (dyplr package) conduct econometric analysis (regression, time series), plotting (ggplot2 package, dygraphs package), webscrapping (rvest package, wbstat package, quantmod package), and financial analysis (quantmod package, quantstrat package).","tags":null,"title":"Technical Analysis with R","type":"docs"},{"authors":null,"categories":null,"content":"TikZ is a drawing package in LaTeX. It is very useful to draw a professional-looking diagram. However, the learning curve is a little bit steep for a beginner. I have recently compiled a 629-page cookbook that provides step-by-step illustrations on how to use TikZ to draw various diagrams in economics:\nThe book is available through Google Play or Google Book. You can read the whole book through free sampling. Of course, you are very welcome to consider buying me a cup of coffee by purchasing the ebook.\nAfter purchasing, you may copy code directly through Google Play (only benefit of spending your money) and you can download a pdf file of the book but the pdf file does not allow search nor copy. ","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"ec7f508035e2a9cbb4627c6fa80c5c62","permalink":"/programming/tikz/tikz-cookbook/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/tikz-cookbook/","section":"programming","summary":"TikZ is a drawing package in LaTeX. It is very useful to draw a professional-looking diagram. However, the learning curve is a little bit steep for a beginner. I have recently compiled a 629-page cookbook that provides step-by-step illustrations on how to use TikZ to draw various diagrams in economics:","tags":null,"title":"Tikz CookBook","type":"docs"},{"authors":null,"categories":null,"content":"Related to the first book (TikZ Cookbook), I have compiled a companion textbook with more examples. The book shows 100 diagrams that can be found in textbooks of introductory principle classes.\nThe book is available through Google Play or Google book. You can read the whole book through free sampling and preview. If you think that I have done a good or bad job, please feel free to drop me an email with comments/suggestions. Of course, you are very welcome to consider buying me a cup of coffee through purchasing the ebook.\nAfter purchasing through Google Play, you may download acsm file to be opened by specialized software such as Adobe Digital Edition. The software will download the pdf file to be read offline. ","date":1536422400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1536422400,"objectID":"2c7a6dbc04d43ae973278a9ac14ebd83","permalink":"/programming/tikz/tikz-cookbook-companion/","publishdate":"2018-09-09T00:00:00+08:00","relpermalink":"/programming/tikz/tikz-cookbook-companion/","section":"programming","summary":"Related to the first book (TikZ Cookbook), I have compiled a companion textbook with more examples. The book shows 100 diagrams that can be found in textbooks of introductory principle classes.","tags":null,"title":"TikZ Cookbook Companion","type":"docs"},{"authors":["Rube Juarez","Chiu Yu Ko","Jingyi Xue"],"categories":null,"content":"","date":1535731200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1535731200,"objectID":"e14936b0ba5ff3fc238e361eba68cd1a","permalink":"/publication/network-sharing/","publishdate":"2018-09-01T00:00:00+08:00","relpermalink":"/publication/network-sharing/","section":"publication","summary":"We study the decentralized implementation of efficient outcomes through multilateral bargaining in the river sharing problem. We consider a class of mechanisms where agents first announce consumption levels and then bargain over monetary compensation. We first determine which mechanisms give incentives to always allocate the water efficiently. Among these, we take an axiomatic approach to single out three mechanisms that guarantee a fair division of the welfare gain.","tags":["Game Theory","Fair Sharing","Network Sharing"],"title":"Sharing sequential values in a network","type":"publication"},{"authors":["Chiu Yu Ko"],"categories":null,"content":"","date":1502899200,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1502899200,"objectID":"173b3c486a2760cb9844ba9a431a3cae","permalink":"/publication/common-agency/","publishdate":"2017-08-17T00:00:00+08:00","relpermalink":"/publication/common-agency/","section":"publication","summary":"In common agency games without budget constraints and outside option, Bernheim and Whinston (1986) show that CPNE=TNE=Principal-optimal core in the payoff space. With budget constraints or outside options, CPNE and TNE may not exist and may not be equivalent to each other. TNEs can be Pareto ranked, contrary to Dixit, Grossman, and Helpman (1996). CPNEs do not avoid a coordination problem, as they can be Pareto dominated by a TNE.","tags":["Game Theory","Political Economy"],"title":"A Note on Budget Constraints and Outside Options in Common Agency","type":"publication"},{"authors":null,"categories":null,"content":"Overview\nWe cover how theoretical models and the associated empirical analysis can be applied in practice We first review classical stock market analysis techniques: fundamental analysis and technical analysis. We investigate various trading strategies adopted by market participants. We continue to study how modern time series models can help to analyze and predict future stock price. Then we examine several market microstructure models. trading models. to understand trading behavior such as bid-ask spread, liquidity, trading volume, and trading behaviors, Finanly, to understand increasingly popular computerized trading, we cover programming and econometric software such as Excel VBA and R. Topics:\nEquity research Technical trading Investor trading behavior Excel VBA programming R programming Overview Video:\n","date":1461686400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461686400,"objectID":"5ce0cee691a7b08305c2436b5861c77e","permalink":"/teaching/applied-financial-economics/","publishdate":"2016-04-27T00:00:00+08:00","relpermalink":"/teaching/applied-financial-economics/","section":"teaching","summary":"Master (Spring 2017, Spring 2018, Spring 2019, Spring 2020)","tags":["Master"],"title":"Applied Financial Economics","type":"teaching"},{"authors":null,"categories":null,"content":"Overview:\nMarket microstructure studies price movement and how trading takes place in financial markets. First, We analyze the movement of security prices by fundamental analysis, technical analysis, time series, trade price and factor price models. Second, we investigate models of trading: inventory models, sequential trading models, strategic trading and behavioral models. Topics:\nFundamental analysis Technical analysis Time series analysis Event study methdology Factor pricing models Inventory models Sequential trade models Strategic tarde models Behavorial models Overview Video:\n","date":1461686400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461686400,"objectID":"19401eb6896b397946be3389103456a8","permalink":"/teaching/financial-market-microstructure/","publishdate":"2016-04-27T00:00:00+08:00","relpermalink":"/teaching/financial-market-microstructure/","section":"teaching","summary":"Undergraduate (Fall 2015, Fall 2016, Fall 2017, Spring 2018, Fall 2018, Spring 2019, Fall 2019)","tags":["Undergraduate"],"title":"Financial Market Microsturcture","type":"teaching"},{"authors":null,"categories":null,"content":"Overview:\nReview Basic concepts of the non-cooperative game theory Build foundation to study various applications of game-theoretic models in the field of industrial organization. in-depth analysis and understand various theoretical issues of the modern industrial organization. the approach of this course is game theoretic Topics:\nMonopoly pricing Monopoly dynamic decision Competition with homogeneous good Competitio with produce differentiation Network externality Consmer Search Innovation and technology Entry deterence Collusion ","date":1461686400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461686400,"objectID":"f1e6d6ec52b26d842638de2a12820b94","permalink":"/teaching/industrial-organization/","publishdate":"2016-04-27T00:00:00+08:00","relpermalink":"/teaching/industrial-organization/","section":"teaching","summary":"Ph.D. (Fall 2012, Fall 2013, Fall 2014, Fall 2015, Fall 2016)","tags":["PhD"],"title":"Industrial Organization","type":"teaching"},{"authors":null,"categories":null,"content":"Overview:\nWe cover basic statistics in this course. The first part is descriptive statistics, and the second part is inferential statistics. Topics:\nProbability Random variables Sampling distributions Estimation of parameters Tests of hypotheses Regression Forecasting ","date":1461686400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1461686400,"objectID":"548d7baec5a01072ac03da7e21a72300","permalink":"/teaching/statistics/","publishdate":"2016-04-27T00:00:00+08:00","relpermalink":"/teaching/statistics/","section":"teaching","summary":"Undergradudate (Fall 2011, Spring 2011)","tags":["Undergradudate"],"title":"Statistics","type":"teaching"},{"authors":["Chiu Yu Ko","Mak Koyama","Tuan-Hwee Sng"],"categories":null,"content":"","date":1441036800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1441036800,"objectID":"443936370cd03356f4864fbea4502c52","permalink":"/publication/europe-china/","publishdate":"2015-09-01T00:00:00+08:00","relpermalink":"/publication/europe-china/","section":"publication","summary":"Severe and unidirectional threat of external invasion fostered political centralization in China. Europe faced a wider variety of smaller external threats and remained politically fragmented. Political centralization in China led to lower taxation and hence faster population growth during peacetime than in Europe. China was relatively fragile in the event of an external invasion.","tags":["Game Theory","Political Economy","Political History"],"title":"Unified China and Divided Europe","type":"publication"},{"authors":["Chiu Yu Ko","Tuan-Hwee Sng"],"categories":null,"content":"","date":1376668800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1376668800,"objectID":"654f2fb68852484a51175434bd288c61","permalink":"/publication/dependence-china/","publishdate":"2013-08-17T00:00:00+08:00","relpermalink":"/publication/dependence-china/","section":"publication","summary":"Eurasian geography created significant and persistent defense externalities between the Chinese regions. Centralized state is required to enforce cooperation. Building of the national capital in the region where the externality originate. Explain why China’s capitals in strategically important north and west instead of the economically productive south and east.","tags":["Economic History","Political Economy"],"title":"Regional Dependence and Political Centralization in Imperial China","type":"publication"},{"authors":["Anthony Creane","Chiu Yu Ko","Hideo Konishi"],"categories":null,"content":"","date":1373644800,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1373644800,"objectID":"1787bcdb00a46101b111a6ca4b3a511d","permalink":"/publication/choosing-rivals/","publishdate":"2013-07-13T00:00:00+08:00","relpermalink":"/publication/choosing-rivals/","section":"publication","summary":"Licensing technology to a rival firm when firms have heterogeneous technologies. If a third firm remains in the industry, licensing technology is profitable. Dependent on criteria, chosen licensees are different. Joint-profit- or welfare-maximization, or auction outcomes as a selection criterion.","tags":["Game Theory","Industrial Organization","Innovation"],"title":"Choosing a licensee from heterogeneous rivals","type":"publication"},{"authors":null,"categories":null,"content":"Overview\nBegin with a normative perspective and ask how consumers derive their choices from preferences and what allocations are efficient Then turn to a positive study focusing on competitive markets and strategic interactions. the development of analytical tools and the understanding of how the theories are constructed and the working and failure cases of the market system. Topics:\nConsumer theory Production theory General equilibrium Uncertainty Game theory Information economics Auction Matching ","date":1335456000,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1335456000,"objectID":"9ed0d73df4ff9697ebbd0ed59bac1c8a","permalink":"/teaching/microeconomics/","publishdate":"2012-04-27T00:00:00+08:00","relpermalink":"/teaching/microeconomics/","section":"teaching","summary":"Undergraduate (Fall 2012, Fall 2013, Spring 2015)","tags":["Undergraduate"],"title":"Microeconomics Analysis III","type":"teaching"},{"authors":["Anthony Creane","Chiu Yu Ko","Hideo Konishi"],"categories":null,"content":"","date":1313510400,"expirydate":-62135596800,"kind":"page","lang":"en","lastmod":1313510400,"objectID":"9103b6fdfbd48745a63de42bb46ab317","permalink":"/publication/matchmaker/","publishdate":"2011-08-17T00:00:00+08:00","relpermalink":"/publication/matchmaker/","section":"publication","summary":"Profit-maximizing matchmaker in the many-to-one assignment problem. Consider individualized and package price message spaces as firmsʼ strategy sets. Restricting message space improves resource allocation.  Implementation of the stable correspondence in strong equilibrium.","tags":["Game Theory","Matching Market"],"title":"Profit-maximizing Matchmaker","type":"publication"}]